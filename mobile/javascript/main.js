(function(a,b){function c(a){return f.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}function d(a){if(!ha[a]){var b=v.body,c=f("<"+a+">").appendTo(b),d=c.css("display");c.remove();if("none"===d||""===d){M||(M=v.createElement("iframe"),M.frameBorder=M.width=M.height=0);b.appendChild(M);if(!W||!M.createElement)W=(M.contentWindow||M.contentDocument).document,W.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),W.close();c=W.createElement(a);W.body.appendChild(c);d=f.css(c,
"display");b.removeChild(M)}ha[a]=d}return ha[a]}function e(a,b){var c={};f.each(ba.concat.apply([],ba.slice(0,b)),function(){c[this]=a});return c}function g(){ca=b}function h(){setTimeout(g,0);return ca=f.now()}function j(){try{return new a.XMLHttpRequest}catch(b){}}function k(a,b,c,d){if(f.isArray(b))f.each(b,function(b,A){c||Va.test(a)?d(a,A):k(a+"["+("object"==typeof A?b:"")+"]",A,c,d)});else if(!c&&"object"===f.type(b))for(var e in b)k(a+"["+e+"]",b[e],c,d);else d(a,b)}function o(a,c){var d,
D,e=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((e[d]?a:D||(D={}))[d]=c[d]);D&&f.extend(!0,a,D)}function r(a,c,d,f,e,g){e=e||c.dataTypes[0];g=g||{};g[e]=!0;for(var e=a[e],h=0,l=e?e.length:0,j=a===ia,k;h<l&&(j||!k);h++)k=e[h](c,d,f),"string"==typeof k&&(!j||g[k]?k=b:(c.dataTypes.unshift(k),k=r(a,c,d,f,k,g)));(j||!k)&&!g["*"]&&(k=r(a,c,d,f,"*",g));return k}function n(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");if(f.isFunction(c))for(var d=b.toLowerCase().split(ua),e=0,g=d.length,
h,l;e<g;e++)h=d[e],(l=/^\+/.test(h))&&(h=h.substr(1)||"*"),h=a[h]=a[h]||[],h[l?"unshift":"push"](c)}}function t(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e="width"===b?1:0;if(0<d){if("border"!==c)for(;4>e;e+=2)c||(d-=parseFloat(f.css(a,"padding"+T[e]))||0),"margin"===c?d+=parseFloat(f.css(a,c+T[e]))||0:d-=parseFloat(f.css(a,"border"+T[e]+"Width"))||0;return d+"px"}d=X(a,b);if(0>d||null==d)d=a.style[b];if(ja.test(d))return d;d=parseFloat(d)||0;if(c)for(;4>e;e+=2)d+=parseFloat(f.css(a,"padding"+
T[e]))||0,"padding"!==c&&(d+=parseFloat(f.css(a,"border"+T[e]+"Width"))||0),"margin"===c&&(d+=parseFloat(f.css(a,c+T[e]))||0);return d+"px"}function y(a){var b=(a.nodeName||"").toLowerCase();"input"===b?m(a):"script"!==b&&"undefined"!=typeof a.getElementsByTagName&&f.grep(a.getElementsByTagName("input"),m)}function m(a){if("checkbox"===a.type||"radio"===a.type)a.defaultChecked=a.checked}function z(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?
a.querySelectorAll("*"):[]}function w(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?b.outerHTML=a.outerHTML:"input"!==c||"checkbox"!==a.type&&"radio"!==a.type?"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),
b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function I(a,b){if(1===b.nodeType&&f.hasData(a)){var c,d,e;d=f._data(a);var g=f._data(b,d),h=d.events;if(h)for(c in delete g.handle,g.events={},h){d=0;for(e=h[c].length;d<e;d++)f.event.add(b,c,h[c][d])}g.data&&(g.data=f.extend({},g.data))}}function x(a){var b=va.split("|"),a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function p(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,
function(a,q){return!!b.call(a,q,a)===c});if(b.nodeType)return f.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=f.grep(a,function(a){return 1===a.nodeType});if(Wa.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a){return 0<=f.inArray(a,b)===c})}function u(){return!0}function s(){return!1}function Q(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&("queue"===c||!f._data(a,e))&&("mark"===c||!f._data(a,g))&&setTimeout(function(){!f._data(a,
e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function J(a){for(var b in a)if(!("data"===b&&f.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function K(a,c,d){if(d===b&&1===a.nodeType)if(d="data-"+c.replace(F,"-$1").toLowerCase(),d=a.getAttribute(d),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:f.isNumeric(d)?+d:l.test(d)?f.parseJSON(d):d}catch(e){}f.data(a,c,d)}else d=b;return d}function R(a){var b=S[a]={},c,d,a=a.split(/\s+/);c=0;for(d=a.length;c<d;c++)b[a[c]]=
!0;return b}var v=a.document,N=a.navigator,P=a.location,f=function(){function c(){if(!d.isReady){try{v.documentElement.doScroll("left")}catch(a){setTimeout(c,1);return}d.ready()}}var d=function(a,b){return new d.fn.init(a,b,g)},f=a.jQuery,e=a.$,g,h=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,l=/\S/,j=/^\s+/,k=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,o=/^[\],:{}\s]*$/,C=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,n=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,la=/(?:^|:|,)(?:\s*\[)+/g,
r=/(webkit)[ \/]([\w.]+)/,H=/(opera)(?:.*version)?[ \/]([\w.]+)/,p=/(msie) ([\w.]+)/,F=/(mozilla)(?:.*? rv:([\w.]+))?/,t=/-([a-z]|[0-9])/ig,u=/^-ms-/,w=function(a,b){return(b+"").toUpperCase()},s=N.userAgent,da,Y,Xa=Object.prototype.toString,ma=Object.prototype.hasOwnProperty,na=Array.prototype.push,aa=Array.prototype.slice,wa=String.prototype.trim,xa=Array.prototype.indexOf,x={};d.fn=d.prototype={constructor:d,init:function(a,c,q){var f,e;if(!a)return this;if(a.nodeType)return this.context=this[0]=
a,this.length=1,this;if("body"===a&&!c&&v.body)return this.context=v,this[0]=v.body,this.selector=a,this.length=1,this;if("string"==typeof a){"<"!==a.charAt(0)||">"!==a.charAt(a.length-1)||3>a.length?f=h.exec(a):f=[null,a,null];if(f&&(f[1]||!c)){if(f[1])return e=(c=c instanceof d?c[0]:c)?c.ownerDocument||c:v,(q=m.exec(a))?d.isPlainObject(c)?(a=[v.createElement(q[1])],d.fn.attr.call(a,c,!0)):a=[e.createElement(q[1])]:(q=d.buildFragment([f[1]],[e]),a=(q.cacheable?d.clone(q.fragment):q.fragment).childNodes),
d.merge(this,a);if((c=v.getElementById(f[2]))&&c.parentNode){if(c.id!==f[2])return q.find(a);this.length=1;this[0]=c}this.context=v;this.selector=a;return this}return!c||c.jquery?(c||q).find(a):this.constructor(c).find(a)}if(d.isFunction(a))return q.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return d.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return aa.call(this,0)},get:function(a){return null==a?this.toArray():
0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var q=this.constructor();d.isArray(a)?na.apply(q,a):d.merge(q,a);q.prevObject=this;q.context=this.context;"find"===b?q.selector=this.selector+(this.selector?" ":"")+c:b&&(q.selector=this.selector+"."+b+"("+c+")");return q},each:function(a,b){return d.each(this,a,b)},ready:function(a){d.bindReady();da.add(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},
slice:function(){return this.pushStack(aa.apply(this,arguments),"slice",aa.call(arguments).join(","))},map:function(a){return this.pushStack(d.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:na,sort:[].sort,splice:[].splice};d.fn.init.prototype=d.fn;d.extend=d.fn.extend=function(){var a,c,q,f,e,B,D=arguments[0]||{},g=1,h=arguments.length,l=!1;"boolean"==typeof D&&(l=D,D=arguments[1]||{},g=2);"object"!=typeof D&&!d.isFunction(D)&&
(D={});for(h===g&&(D=this,--g);g<h;g++)if(null!=(a=arguments[g]))for(c in a)q=D[c],f=a[c],D!==f&&(l&&f&&(d.isPlainObject(f)||(e=d.isArray(f)))?(e?(e=!1,B=q&&d.isArray(q)?q:[]):B=q&&d.isPlainObject(q)?q:{},D[c]=d.extend(l,B,f)):f!==b&&(D[c]=f));return D};d.extend({noConflict:function(b){a.$===d&&(a.$=e);b&&a.jQuery===d&&(a.jQuery=f);return d},isReady:!1,readyWait:1,holdReady:function(a){a?d.readyWait++:d.ready(!0)},ready:function(a){if(!0===a&&!--d.readyWait||!0!==a&&!d.isReady){if(!v.body)return setTimeout(d.ready,
1);d.isReady=!0;!0!==a&&0<--d.readyWait||(da.fireWith(v,[d]),d.fn.trigger&&d(v).trigger("ready").off("ready"))}},bindReady:function(){if(!da){da=d.Callbacks("once memory");if("complete"===v.readyState)return setTimeout(d.ready,1);if(v.addEventListener)v.addEventListener("DOMContentLoaded",Y,!1),a.addEventListener("load",d.ready,!1);else if(v.attachEvent){v.attachEvent("onreadystatechange",Y);a.attachEvent("onload",d.ready);var b=!1;try{b=null==a.frameElement}catch(f){}v.documentElement.doScroll&&
b&&c()}}},isFunction:function(a){return"function"===d.type(a)},isArray:Array.isArray||function(a){return"array"===d.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?""+a:x[Xa.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==d.type(a)||a.nodeType||d.isWindow(a))return!1;try{if(a.constructor&&!ma.call(a,"constructor")&&!ma.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var q in a);
return q===b||ma.call(a,q)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseJSON:function(b){if("string"!=typeof b||!b)return null;b=d.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(o.test(b.replace(C,"@").replace(n,"]").replace(la,"")))return(new Function("return "+b))();d.error("Invalid JSON: "+b)},parseXML:function(c){if("string"!=typeof c||!c)return null;var q,f;try{a.DOMParser?(f=new DOMParser,q=f.parseFromString(c,"text/xml")):(q=
new ActiveXObject("Microsoft.XMLDOM"),q.async="false",q.loadXML(c))}catch(e){q=b}(!q||!q.documentElement||q.getElementsByTagName("parsererror").length)&&d.error("Invalid XML: "+c);return q},noop:function(){},globalEval:function(b){b&&l.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(u,"ms-").replace(t,w)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,q){var f,e=0,B=a.length,D=B===b||d.isFunction(a);
if(q)if(D)for(f in a){if(!1===c.apply(a[f],q))break}else for(;e<B&&!1!==c.apply(a[e++],q););else if(D)for(f in a){if(!1===c.call(a[f],f,a[f]))break}else for(;e<B&&!1!==c.call(a[e],e,a[e++]););return a},trim:wa?function(a){return null==a?"":wa.call(a)}:function(a){return null==a?"":(a+"").replace(j,"").replace(k,"")},makeArray:function(a,b){var c=b||[];if(null!=a){var q=d.type(a);null==a.length||"string"===q||"function"===q||"regexp"===q||d.isWindow(a)?na.call(c,a):d.merge(c,a)}return c},inArray:function(a,
b,c){var q;if(b){if(xa)return xa.call(b,a,c);q=b.length;for(c=c?0>c?Math.max(0,q+c):c:0;c<q;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var q=a.length,d=0;if("number"==typeof c.length)for(var f=c.length;d<f;d++)a[q++]=c[d];else for(;c[d]!==b;)a[q++]=c[d++];a.length=q;return a},grep:function(a,b,c){for(var q=[],d,c=!!c,f=0,A=a.length;f<A;f++)d=!!b(a[f],f),c!==d&&q.push(a[f]);return q},map:function(a,c,q){var f,e,B=[],D=0,g=a.length;if(a instanceof d||g!==b&&"number"==typeof g&&(0<
g&&a[0]&&a[g-1]||0===g||d.isArray(a)))for(;D<g;D++)f=c(a[D],D,q),null!=f&&(B[B.length]=f);else for(e in a)f=c(a[e],e,q),null!=f&&(B[B.length]=f);return B.concat.apply([],B)},guid:1,proxy:function(a,c){if("string"==typeof c)var q=a[c],c=a,a=q;if(!d.isFunction(a))return b;var f=aa.call(arguments,2),q=function(){return a.apply(c,f.concat(aa.call(arguments)))};q.guid=a.guid=a.guid||q.guid||d.guid++;return q},access:function(a,c,q,f,e,B,D){var g,h=null==q,l=0,E=a.length;if(q&&"object"==typeof q){for(l in q)d.access(a,
c,l,q[l],1,B,f);e=1}else if(f!==b){g=D===b&&d.isFunction(f);h&&(g?(g=c,c=function(a,b,c){return g.call(d(a),c)}):(c.call(a,f),c=null));if(c)for(;l<E;l++)c(a[l],q,g?f.call(a[l],l,c(a[l],q)):f,D);e=1}return e?a:h?c.call(a):E?c(a[0],q):B},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();a=r.exec(a)||H.exec(a)||p.exec(a)||0>a.indexOf("compatible")&&F.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}d.extend(!0,
a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,q){q&&q instanceof d&&!(q instanceof a)&&(q=a(q));return d.fn.init.call(this,c,q,b)};a.fn.init.prototype=a.fn;var b=a(v);return a},browser:{}});d.each("Boolean,Number,String,Function,Array,Date,RegExp,Object".split(","),function(a,b){x["[object "+b+"]"]=b.toLowerCase()});s=d.uaMatch(s);s.browser&&(d.browser[s.browser]=!0,d.browser.version=s.version);d.browser.webkit&&(d.browser.safari=!0);l.test("\u00a0")&&
(j=/^[\s\xA0]+/,k=/[\s\xA0]+$/);g=d(v);v.addEventListener?Y=function(){v.removeEventListener("DOMContentLoaded",Y,!1);d.ready()}:v.attachEvent&&(Y=function(){"complete"===v.readyState&&(v.detachEvent("onreadystatechange",Y),d.ready())});return d}(),S={};f.Callbacks=function(a){var a=a?S[a]||R(a):{},c=[],d=[],e,g,h,l,j,k,m=function(b){var d,e,B,g;d=0;for(e=b.length;d<e;d++)B=b[d],g=f.type(B),"array"===g?m(B):"function"===g&&(!a.unique||!C.has(B))&&c.push(B)},o=function(b,f){f=f||[];e=!a.memory||[b,
f];h=g=!0;k=l||0;l=0;for(j=c.length;c&&k<j;k++)if(!1===c[k].apply(b,f)&&a.stopOnFalse){e=!0;break}h=!1;c&&(a.once?!0===e?C.disable():c=[]:d&&d.length&&(e=d.shift(),C.fireWith(e[0],e[1])))},C={add:function(){if(c){var a=c.length;m(arguments);h?j=c.length:e&&!0!==e&&(l=a,o(e[0],e[1]))}return this},remove:function(){if(c)for(var b=arguments,d=0,f=b.length;d<f;d++)for(var e=0;e<c.length&&!(b[d]===c[e]&&(h&&e<=j&&(j--,e<=k&&k--),c.splice(e--,1),a.unique));e++);return this},has:function(a){if(c)for(var b=
0,q=c.length;b<q;b++)if(a===c[b])return!0;return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b;(!e||!0===e)&&C.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(h?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){C.fireWith(this,arguments);return this},fired:function(){return!!g}};return C};var H=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),
c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){l.done(a).fail(b).progress(c);return this},always:function(){l.done.apply(l,arguments).fail.apply(l,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(q){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],d=b[1],A;f.isFunction(c)?
l[a](function(){(A=c.apply(this,arguments))&&f.isFunction(A.promise)?A.promise().then(q.resolve,q.reject,q.notify):q[d+"With"](this===l?q:this,[A])}):l[a](q[d])})}).promise()},promise:function(a){if(null==a)a=h;else for(var b in h)a[b]=h[b];return a}},l=h.promise({}),j;for(j in g)l[j]=g[j].fire,l[j+"With"]=g[j].fireWith;l.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock);a&&a.call(l,l);return l},when:function(a){function b(a){return function(b){h[a]=1<
arguments.length?H.call(arguments,0):b;j.notifyWith(k,h)}}function c(a){return function(b){d[a]=1<arguments.length?H.call(arguments,0):b;--l||j.resolveWith(j,d)}}var d=H.call(arguments,0),e=0,g=d.length,h=Array(g),l=g,j=1>=g&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(1<g){for(;e<g;e++)d[e]&&d[e].promise&&f.isFunction(d[e].promise)?d[e].promise().then(c(e),j.reject,b(e)):--l;l||j.resolveWith(j,d)}else j!==a&&j.resolveWith(j,g?[a]:[]);return k}});f.support=function(){var b,c,d,e,g,
h,l,j,k=v.createElement("div");k.setAttribute("className","t");k.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";c=k.getElementsByTagName("*");d=k.getElementsByTagName("a")[0];if(!c||!c.length||!d)return{};e=v.createElement("select");g=e.appendChild(v.createElement("option"));c=k.getElementsByTagName("input")[0];b={leadingWhitespace:3===k.firstChild.nodeType,tbody:!k.getElementsByTagName("tbody").length,htmlSerialize:!!k.getElementsByTagName("link").length,
style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.55/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===c.value,optSelected:g.selected,getSetAttribute:"t"!==k.className,enctype:!!v.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==v.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,
pixelMargin:!0};f.boxModel=b.boxModel="CSS1Compat"===v.compatMode;c.checked=!0;b.noCloneChecked=c.cloneNode(!0).checked;e.disabled=!0;b.optDisabled=!g.disabled;try{delete k.test}catch(m){b.deleteExpando=!1}!k.addEventListener&&k.attachEvent&&k.fireEvent&&(k.attachEvent("onclick",function(){b.noCloneEvent=!1}),k.cloneNode(!0).fireEvent("onclick"));c=v.createElement("input");c.value="t";c.setAttribute("type","radio");b.radioValue="t"===c.value;c.setAttribute("checked","checked");c.setAttribute("name",
"t");k.appendChild(c);d=v.createDocumentFragment();d.appendChild(k.lastChild);b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;b.appendChecked=c.checked;d.removeChild(c);d.appendChild(k);if(k.attachEvent)for(l in{submit:1,change:1,focusin:1})c="on"+l,(j=c in k)||(k.setAttribute(c,"return;"),j="function"==typeof k[c]),b[l+"Bubbles"]=j;d.removeChild(k);d=e=g=k=c=null;f(function(){var c,d,A,e,g,B,D=v.getElementsByTagName("body")[0];!D||(c=v.createElement("div"),c.style.cssText="padding:0;margin:0;border:0;visibility:hidden;width:0;height:0;position:static;top:0;margin-top:1px",
D.insertBefore(c,D.firstChild),k=v.createElement("div"),c.appendChild(k),k.innerHTML="<table><tr><td style='padding:0;margin:0;border:0;display:none'></td><td>t</td></tr></table>",h=k.getElementsByTagName("td"),j=0===h[0].offsetHeight,h[0].style.display="",h[1].style.display="none",b.reliableHiddenOffsets=j&&0===h[0].offsetHeight,a.getComputedStyle&&(k.innerHTML="",B=v.createElement("div"),B.style.width="0",B.style.marginRight="0",k.style.width="2px",k.appendChild(B),b.reliableMarginRight=0===(parseInt((a.getComputedStyle(B,
null)||{marginRight:0}).marginRight,10)||0)),"undefined"!=typeof k.style.zoom&&(k.innerHTML="",k.style.width=k.style.padding="1px",k.style.border=0,k.style.overflow="hidden",k.style.display="inline",k.style.zoom=1,b.inlineBlockNeedsLayout=3===k.offsetWidth,k.style.display="block",k.style.overflow="visible",k.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=3!==k.offsetWidth),k.style.cssText="position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:0;visibility:hidden;",
k.innerHTML="<div style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;display:block;'><div style='padding:0;margin:0;border:0;display:block;overflow:hidden;'></div></div><table style='position:absolute;top:0;left:0;width:1px;height:1px;padding:0;margin:0;border:5px solid #000;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",d=k.firstChild,A=d.firstChild,e=d.nextSibling.firstChild.firstChild,g={doesNotAddBorder:5!==A.offsetTop,doesAddBorderForTableAndCells:5===
e.offsetTop},A.style.position="fixed",A.style.top="20px",g.fixedPosition=20===A.offsetTop||15===A.offsetTop,A.style.position=A.style.top="",d.style.overflow="hidden",d.style.position="relative",g.subtractsBorderForOverflowNotVisible=-5===A.offsetTop,g.doesNotIncludeMarginInBodyOffset=1!==D.offsetTop,a.getComputedStyle&&(k.style.marginTop="1%",b.pixelMargin="1%"!==(a.getComputedStyle(k,null)||{marginTop:0}).marginTop),"undefined"!=typeof c.style.zoom&&(c.style.zoom=1),D.removeChild(c),k=null,f.extend(b,
g))});return b}();var l=/^(?:\{.*\}|\[.*\])$/,F=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!J(a)},data:function(a,c,d,e){if(f.acceptData(a)){var g,h;g=f.expando;var l="string"==typeof c,j=a.nodeType,k=j?f.cache:a,m=j?a[g]:a[g]&&g,o="events"===c;if(m&&k[m]&&(o||e||k[m].data)||!(l&&d===
b)){m||(j?a[g]=m=++f.uuid:m=g);k[m]||(k[m]={},j||(k[m].toJSON=f.noop));if("object"==typeof c||"function"==typeof c)e?k[m]=f.extend(k[m],c):k[m].data=f.extend(k[m].data,c);a=g=k[m];e||(g.data||(g.data={}),g=g.data);d!==b&&(g[f.camelCase(c)]=d);if(o&&!g[c])return a.events;l?(h=g[c],null==h&&(h=g[f.camelCase(c)])):h=g;return h}}},removeData:function(a,b,c){if(f.acceptData(a)){var d,e,g,h=f.expando,l=a.nodeType,j=l?f.cache:a,k=l?a[h]:h;if(j[k]){if(b&&(d=c?j[k]:j[k].data)){f.isArray(b)||(b in d?b=[b]:
(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));e=0;for(g=b.length;e<g;e++)delete d[b[e]];if(!(c?J:f.isEmptyObject)(d))return}if(!c&&(delete j[k].data,!J(j[k])))return;f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null;l&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return!0!==b&&a.getAttribute("classid")===b}return!0}});
f.fn.extend({data:function(a,c){var d,e,g,h,l,j=this[0],k=0,m=null;if(a===b){if(this.length&&(m=f.data(j),1===j.nodeType&&!f._data(j,"parsedAttrs"))){g=j.attributes;for(l=g.length;k<l;k++)h=g[k].name,0===h.indexOf("data-")&&(h=f.camelCase(h.substring(5)),K(j,h,m[h]));f._data(j,"parsedAttrs",!0)}return m}if("object"==typeof a)return this.each(function(){f.data(this,a)});d=a.split(".",2);d[1]=d[1]?"."+d[1]:"";e=d[1]+"!";return f.access(this,function(c){if(c===b)return m=this.triggerHandler("getData"+
e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=K(j,a,m)),m===b&&d[1]?this.data(d[0]):m;d[1]=c;this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d);f.data(this,a,c);b.triggerHandler("changeData"+e,d)})},null,c,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}});f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){!0!==a&&(c=b,b=a,a=!1);if(b){var c=c||"fx",d=c+"mark";(a=a?0:(f._data(b,
d)||1)-1)?f._data(b,d,a):(f.removeData(b,d,!0),Q(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){var b=b||"fx",c=f.queue(a,b),d=c.shift(),e={};"inprogress"===d&&(d=c.shift());d&&("fx"===b&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e));c.length||(f.removeData(a,b+"queue "+b+".run",!0),Q(a,b,"queue"))}});f.fn.extend({queue:function(a,
c){var d=2;"string"!=typeof a&&(c=a,a="fx",d--);return arguments.length<d?f.queue(this[0],a):c===b?this:this.each(function(){var b=f.queue(this,a,c);"fx"===a&&"inprogress"!==b[0]&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function d(){--l||
e.resolveWith(g,[g])}"string"!=typeof a&&(c=a,a=b);for(var a=a||"fx",e=f.Deferred(),g=this,h=g.length,l=1,j=a+"defer",k=a+"queue",m=a+"mark",o;h--;)if(o=f.data(g[h],j,b,!0)||(f.data(g[h],k,b,!0)||f.data(g[h],m,b,!0))&&f.data(g[h],j,f.Callbacks("once memory"),!0))l++,o.add(d);d();return e.promise(c)}});var ya=/[\n\t\r]/g,ea=/\s+/,Ya=/\r/g,G=/^(?:button|input)$/i,Za=/^(?:button|input|object|select|textarea)$/i,$a=/^a(?:rea)?$/i,za=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
Aa=f.support.getSetAttribute,O,Ba,Ca;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,1<arguments.length)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,l;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});
if(a&&"string"==typeof a){b=a.split(ea);c=0;for(d=this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(!e.className&&1===b.length)e.className=a;else{g=" "+e.className+" ";h=0;for(l=b.length;h<l;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}return this},removeClass:function(a){var c,d,e,g,h,l,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b){c=(a||"").split(ea);d=0;for(e=this.length;d<e;d++)if(g=
this[d],1===g.nodeType&&g.className)if(a){h=(" "+g.className+" ").replace(ya," ");l=0;for(j=c.length;l<j;l++)h=h.replace(" "+c[l]+" "," ");g.className=f.trim(h)}else g.className=""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return f.isFunction(a)?this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,g=0,h=f(this),l=b,j=a.split(ea);e=j[g++];)l=d?l:!h.hasClass(e),h[l?"addClass":"removeClass"](e);
else if("undefined"===c||"boolean"===c)this.className&&f._data(this,"__className__",this.className),this.className=this.className||!1===a?"":f._data(this,"__className__")||""})},hasClass:function(a){for(var a=" "+a+" ",b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&-1<(" "+this[b].className+" ").replace(ya," ").indexOf(a))return!0;return!1},val:function(a){var c,d,e,g=this[0];if(arguments.length)return e=f.isFunction(a),this.each(function(d){var g=f(this),h;if(1===this.nodeType&&(e?h=a.call(this,
d,g.val()):h=a,null==h?h="":"number"==typeof h?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()],!c||!("set"in c)||c.set(this,h,"value")===b))this.value=h});if(g){if((c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()])&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return"string"==typeof d?d.replace(Ya,""):null==d?"":d}}});f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||
b.specified?a.value:a.text}},select:{get:function(a){var b,c,d=a.selectedIndex,e=[],g=a.options,h="select-one"===a.type;if(0>d)return null;a=h?d:0;for(c=h?d+1:g.length;a<c;a++)if(b=g[a],b.selected&&(f.support.optDisabled?!b.disabled:null===b.getAttribute("disabled"))&&(!b.parentNode.disabled||!f.nodeName(b.parentNode,"optgroup"))){b=f(b).val();if(h)return b;e.push(b)}return h&&!e.length&&g.length?f(g[d]).val():e},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=
0<=f.inArray(f(this).val(),c)});c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,l=a.nodeType;if(a&&3!==l&&8!==l&&2!==l){if(e&&c in f.attrFn)return f(a)[c](d);if("undefined"==typeof a.getAttribute)return f.prop(a,c,d);(e=1!==l||!f.isXMLDoc(a))&&(c=c.toLowerCase(),h=f.attrHooks[c]||(za.test(c)?Ba:O));if(d!==b){if(null===d){f.removeAttr(a,c);return}if(h&&"set"in h&&e&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,
""+d);return d}if(h&&"get"in h&&e&&null!==(g=h.get(a,c)))return g;g=a.getAttribute(c);return null===g?b:g}},removeAttr:function(a,b){var c,d,e,g,h,l=0;if(b&&1===a.nodeType){d=b.toLowerCase().split(ea);for(g=d.length;l<g;l++)(e=d[l])&&(c=f.propFix[e]||e,h=za.test(e),h||f.attr(a,e,""),a.removeAttribute(Aa?e:c),h&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(G.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&"radio"===b&&f.nodeName(a,
"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}},value:{get:function(a,b){return O&&f.nodeName(a,"button")?O.get(a,b):b in a?a.value:null},set:function(a,b,c){if(O&&f.nodeName(a,"button"))return O.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},
prop:function(a,c,d){var e,g,h;h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return(h=1!==h||!f.isXMLDoc(a))&&(c=f.propFix[c]||c,g=f.propHooks[c]),d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&null!==(e=g.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):Za.test(a.nodeName)||$a.test(a.nodeName)&&a.href?0:b}}}});f.attrHooks.tabindex=f.propHooks.tabIndex;Ba={get:function(a,c){var d,e=f.prop(a,c);return!0===
e||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&!1!==d.nodeValue?c.toLowerCase():b},set:function(a,b,c){var d;!1===b?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}};Aa||(Ca={name:!0,id:!0,coords:!0},O=f.valHooks.button={get:function(a,c){var d;return(d=a.getAttributeNode(c))&&(Ca[c]?""!==d.nodeValue:d.specified)?d.nodeValue:b},set:function(a,b,c){var d=a.getAttributeNode(c);d||(d=v.createAttribute(c),a.setAttributeNode(d));return d.nodeValue=
b+""}},f.attrHooks.tabindex.set=O.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),f.attrHooks.contenteditable={get:O.get,set:function(a,b,c){""===b&&(b="false");O.set(a,b,c)}});f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){a=a.getAttribute(c,2);return null===a?b:a}})});f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||
b},set:function(a,b){return a.style.cssText=""+b}});f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){a=a.parentNode;a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex);return null}}));f.support.enctype||(f.propFix.enctype="encoding");f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],
{set:function(a,b){if(f.isArray(b))return a.checked=0<=f.inArray(f(a).val(),b)}})});var oa=/^(?:textarea|input|select)$/i,Da=/^([^\.]*)?(?:\.(.+))?$/,ab=/(?:^|\s)hover(\.\S+)?\b/,bb=/^key/,cb=/^(?:mouse|contextmenu)|click/,Ea=/^(?:focusinfocus|focusoutblur)$/,db=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,eb=function(a){(a=db.exec(a))&&(a[1]=(a[1]||"").toLowerCase(),a[3]=a[3]&&RegExp("(?:^|\\s)"+a[3]+"(?:\\s|$)"));return a},Fa=function(a){return f.event.special.hover?a:a.replace(ab,"mouseenter$1 mouseleave$1")};
f.event={add:function(a,c,d,e,g){var h,l,j,k,m,o,C,n,r;if(!(3===a.nodeType||8===a.nodeType||!c||!d||!(h=f._data(a)))){d.handler&&(C=d,d=C.handler,g=C.selector);d.guid||(d.guid=f.guid++);(j=h.events)||(h.events=j={});(l=h.handle)||(h.handle=l=function(a){return"undefined"!=typeof f&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(l.elem,arguments):b},l.elem=a);c=f.trim(Fa(c)).split(" ");for(h=0;h<c.length;h++){k=Da.exec(c[h])||[];m=k[1];o=(k[2]||"").split(".").sort();r=f.event.special[m]||
{};m=(g?r.delegateType:r.bindType)||m;r=f.event.special[m]||{};k=f.extend({type:m,origType:k[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&eb(g),namespace:o.join(".")},C);n=j[m];if(!n&&(n=j[m]=[],n.delegateCount=0,!r.setup||!1===r.setup.call(a,e,o,l)))a.addEventListener?a.addEventListener(m,l,!1):a.attachEvent&&a.attachEvent("on"+m,l);r.add&&(r.add.call(a,k),k.handler.guid||(k.handler.guid=d.guid));g?n.splice(n.delegateCount++,0,k):n.push(k);f.event.global[m]=!0}a=null}},global:{},remove:function(a,
b,c,d,e){var g=f.hasData(a)&&f._data(a),h,l,j,k,m,o,n,r,H,p,F;if(g&&(n=g.events)){b=f.trim(Fa(b||"")).split(" ");for(h=0;h<b.length;h++)if(l=Da.exec(b[h])||[],j=k=l[1],l=l[2],j){r=f.event.special[j]||{};j=(d?r.delegateType:r.bindType)||j;p=n[j]||[];m=p.length;l=l?RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(o=0;o<p.length;o++)F=p[o],(e||k===F.origType)&&(!c||c.guid===F.guid)&&(!l||l.test(F.namespace))&&(!d||d===F.selector||"**"===d&&F.selector)&&(p.splice(o--,1),
F.selector&&p.delegateCount--,r.remove&&r.remove.call(a,F));0===p.length&&m!==p.length&&((!r.teardown||!1===r.teardown.call(a,l))&&f.removeEvent(a,j,g.handle),delete n[j])}else for(j in n)f.event.remove(a,j+b[h],c,d,!0);f.isEmptyObject(n)&&(H=g.handle,H&&(H.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||3!==e.nodeType&&8!==e.nodeType){var h=c.type||c,l=[],j,k,m,o,n,C;if(!Ea.test(h+f.event.triggered)&&(0<=h.indexOf("!")&&
(h=h.slice(0,-1),j=!0),0<=h.indexOf(".")&&(l=h.split("."),h=l.shift(),l.sort()),e&&!f.event.customEvent[h]||f.event.global[h]))if(c="object"==typeof c?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=j,c.namespace=l.join("."),c.namespace_re=c.namespace?RegExp("(^|\\.)"+l.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,j=0>h.indexOf(":")?"on"+h:"",e){if(c.result=b,c.target||(c.target=e),d=null!=d?f.makeArray(d):[],d.unshift(c),o=f.event.special[h]||{},!(o.trigger&&!1===o.trigger.apply(e,
d))){C=[[e,o.bindType||h]];if(!g&&!o.noBubble&&!f.isWindow(e)){k=o.delegateType||h;l=Ea.test(k+h)?e:e.parentNode;for(m=null;l;l=l.parentNode)C.push([l,k]),m=l;m&&m===e.ownerDocument&&C.push([m.defaultView||m.parentWindow||a,k])}for(k=0;k<C.length&&!c.isPropagationStopped();k++)l=C[k][0],c.type=C[k][1],(n=(f._data(l,"events")||{})[c.type]&&f._data(l,"handle"))&&n.apply(l,d),(n=j&&l[j])&&f.acceptData(l)&&!1===n.apply(l,d)&&c.preventDefault();c.type=h;!g&&!c.isDefaultPrevented()&&(!o._default||!1===
o._default.apply(e.ownerDocument,d))&&("click"!==h||!f.nodeName(e,"a"))&&f.acceptData(e)&&j&&e[h]&&("focus"!==h&&"blur"!==h||0!==c.target.offsetWidth)&&!f.isWindow(e)&&(m=e[j],m&&(e[j]=null),f.event.triggered=h,e[h](),f.event.triggered=b,m&&(e[j]=m));return c.result}}else for(k in e=f.cache,e)e[k].events&&e[k].events[h]&&f.event.trigger(c,d,e[k].handle.elem,!0)}},dispatch:function(c){var c=f.event.fix(c||a.event),d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,
0),h=!c.exclusive&&!c.namespace,l=f.event.special[c.type]||{},j=[],k,m,o,n,C,r,p;g[0]=c;c.delegateTarget=this;if(!l.preDispatch||!1!==l.preDispatch.call(this,c)){if(e&&(!c.button||"click"!==c.type)){o=f(this);o.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this)if(!0!==m.disabled){C={};r=[];o[0]=m;for(k=0;k<e;k++){n=d[k];p=n.selector;if(C[p]===b){var H=C,F=p,v;if(n.quick){v=n.quick;var t=m.attributes||{};v=(!v[1]||m.nodeName.toLowerCase()===v[1])&&(!v[2]||(t.id||{}).value===
v[2])&&(!v[3]||v[3].test((t["class"]||{}).value))}else v=o.is(p);H[F]=v}C[p]&&r.push(n)}r.length&&j.push({elem:m,matches:r})}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){e=j[k];c.currentTarget=e.elem;for(d=0;d<e.matches.length&&!c.isImmediatePropagationStopped();d++)if(n=e.matches[d],h||!c.namespace&&!n.namespace||c.namespace_re&&c.namespace_re.test(n.namespace))c.data=n.data,c.handleObj=n,n=((f.event.special[n.origType]||{}).handle||n.handler).apply(e.elem,
g),n!==b&&(c.result=n,!1===n&&(c.preventDefault(),c.stopPropagation()))}l.postDispatch&&l.postDispatch.call(this,c);return c.result}},props:"attrChange,attrName,relatedNode,srcElement,altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,relatedTarget,shiftKey,target,timeStamp,view,which".split(","),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button,buttons,clientX,clientY,fromElement,offsetX,offsetY,pageX,pageY,screenX,screenY,toElement".split(","),
filter:function(a,c){var d,f,e,g=c.button,h=c.fromElement;null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||v,f=d.documentElement,e=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||e&&e.scrollLeft||0)-(f&&f.clientLeft||e&&e.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||e&&e.scrollTop||0)-(f&&f.clientTop||e&&e.clientTop||0));!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h);!a.which&&g!==b&&(a.which=g&1?1:g&2?3:g&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var c,
d,e=a,g=f.event.fixHooks[a.type]||{},h=g.props?this.props.concat(g.props):this.props,a=f.Event(e);for(c=h.length;c;)d=h[--c],a[d]=e[d];a.target||(a.target=e.srcElement||v);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey===b&&(a.metaKey=a.ctrlKey);return g.filter?g.filter(a,e):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,
b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){a=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(a,null,b):f.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};f.event.handle=f.event.dispatch;f.removeEvent=v.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)};f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,
b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?u:s):this.type=a;b&&f.extend(this,b);this.timeStamp=a&&a.timeStamp||f.now();this[f.expando]=!0};f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=u;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=u;var a=this.originalEvent;!a||(a.stopPropagation&&
a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u;this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s};f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=a.relatedTarget,d=a.handleObj,e;if(!c||c!==this&&!f.contains(this,c))a.type=d.origType,e=d.handler.apply(this,arguments),a.type=b;return e}}});f.support.submitBubbles||
(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=f.nodeName(a,"input")||f.nodeName(a,"button")?a.form:b)&&!a._submit_attached&&(f.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),a._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,
"form"))return!1;f.event.remove(this,"._submit")}});f.support.changeBubbles||(f.event.special.change={setup:function(){if(oa.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)f.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",
function(a){a=a.target;oa.test(a.nodeName)&&!a._change_attached&&(f.event.add(a,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),a._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return oa.test(this.nodeName)}});f.support.focusinBubbles||
f.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){0===c++&&v.addEventListener(a,d,!0)},teardown:function(){0===--c&&v.removeEventListener(a,d,!0)}}});f.fn.extend({on:function(a,c,d,e,g){var h,l;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(l in a)this.on(l,c,d,a[l],g);return this}null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b));if(!1===e)e=
s;else if(!e)return this;1===g&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if("object"==typeof a){for(e in a)this.off(e,c,a[e]);return this}if(!1===c||"function"==
typeof c)d=c,c=b;!1===d&&(d=s);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,
b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1);c.preventDefault();return b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});f.each("blur,focus,focusin,focusout,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error,contextmenu".split(","),
function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)};f.attrFn&&(f.attrFn[b]=true);bb.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks);cb.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)});(function(){function a(b,c,d,f,g,h){for(var g=0,q=f.length;g<q;g++){var l=f[g];if(l){for(var j=!1,l=l[b];l;){if(l[e]===d){j=f[l.sizset];break}if(1===l.nodeType)if(h||(l[e]=d,l.sizset=g),"string"!=typeof c){if(l===c){j=!0;break}}else if(0<n.filter(c,
[l]).length){j=l;break}l=l[b]}f[g]=j}}}function c(a,b,d,f,g,h){for(var g=0,q=f.length;g<q;g++){var l=f[g];if(l){for(var j=!1,l=l[a];l;){if(l[e]===d){j=f[l.sizset];break}1===l.nodeType&&!h&&(l[e]=d,l.sizset=g);if(l.nodeName.toLowerCase()===b){j=l;break}l=l[a]}f[g]=j}}}var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,e="sizcache"+(Math.random()+"").replace(".",""),g=0,h=Object.prototype.toString,l=!1,j=!0,k=/\\/g,
m=/\r\n/g,o=/\W/;[0,0].sort(function(){j=!1;return 0});var n=function(a,b,c,f){var c=c||[],e=b=b||v;if(1!==b.nodeType&&9!==b.nodeType)return[];if(!a||"string"!=typeof a)return c;var g,q,l,j,A,k,D=!0,m=n.isXML(b),E=[],o=a;do if(d.exec(""),g=d.exec(o))if(o=g[3],E.push(g[1]),g[2]){j=g[3];break}while(g);if(1<E.length&&H.exec(a))if(2===E.length&&p.relative[E[0]])q=y(E[0]+E[1],b,f);else for(q=p.relative[E[0]]?[b]:n(E.shift(),b);E.length;)a=E.shift(),p.relative[a]&&(a+=E.shift()),q=y(a,q,f);else if(!f&&
1<E.length&&9===b.nodeType&&!m&&p.match.ID.test(E[0])&&!p.match.ID.test(E[E.length-1])&&(A=n.find(E.shift(),b,m),b=A.expr?n.filter(A.expr,A.set)[0]:A.set[0]),b){A=f?{expr:E.pop(),set:u(f)}:n.find(E.pop(),1===E.length&&("~"===E[0]||"+"===E[0])&&b.parentNode?b.parentNode:b,m);q=A.expr?n.filter(A.expr,A.set):A.set;for(0<E.length?l=u(q):D=!1;E.length;)g=k=E.pop(),p.relative[k]?g=E.pop():k="",null==g&&(g=b),p.relative[k](l,g,m)}else l=[];l||(l=q);l||n.error(k||a);if("[object Array]"===h.call(l))if(D)if(b&&
1===b.nodeType)for(a=0;null!=l[a];a++)l[a]&&(!0===l[a]||1===l[a].nodeType&&n.contains(b,l[a]))&&c.push(q[a]);else for(a=0;null!=l[a];a++)l[a]&&1===l[a].nodeType&&c.push(q[a]);else c.push.apply(c,l);else u(l,c);j&&(n(j,e,c,f),n.uniqueSort(c));return c};n.uniqueSort=function(a){if(w&&(l=j,a.sort(w),l))for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1);return a};n.matches=function(a,b){return n(a,null,null,b)};n.matchesSelector=function(a,b){return 0<n(b,null,null,[a]).length};n.find=function(a,
b,c){var d,f,e,g,q,h;if(!a)return[];f=0;for(e=p.order.length;f<e;f++)if(q=p.order[f],g=p.leftMatch[q].exec(a))if(h=g[1],g.splice(1,1),"\\"!==h.substr(h.length-1)&&(g[1]=(g[1]||"").replace(k,""),d=p.find[q](g,b,c),null!=d)){a=a.replace(p.match[q],"");break}d||(d="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName("*"):[]);return{set:d,expr:a}};n.filter=function(a,c,d,f){for(var e,g,q,h,l,j,A,k,D=a,B=[],m=c,E=c&&c[0]&&n.isXML(c[0]);a&&c.length;){for(q in p.filter)if(null!=(e=p.leftMatch[q].exec(a))&&
e[2])if(j=p.filter[q],l=e[1],g=!1,e.splice(1,1),"\\"!==l.substr(l.length-1)){m===B&&(B=[]);if(p.preFilter[q])if(e=p.preFilter[q](e,m,d,B,f,E)){if(!0===e)continue}else g=h=!0;if(e)for(A=0;null!=(l=m[A]);A++)l&&(h=j(l,e,A,m),k=f^h,d&&null!=h?k?g=!0:m[A]=!1:k&&(B.push(l),g=!0));if(h!==b){d||(m=B);a=a.replace(p.match[q],"");if(!g)return[];break}}if(a===D)if(null==g)n.error(a);else break;D=a}return m};n.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};var r=n.getText=function(a){var b,
c;b=a.nodeType;var d="";if(b)if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;if("string"==typeof a.innerText)return a.innerText.replace(m,"");for(a=a.firstChild;a;a=a.nextSibling)d+=r(a)}else{if(3===b||4===b)return a.nodeValue}else for(b=0;c=a[b];b++)8!==c.nodeType&&(d+=r(c));return d},p=n.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,
ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},
type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c="string"==typeof b,d=c&&!o.test(b),c=c&&!d;d&&(b=b.toLowerCase());for(var d=0,f=a.length,e;d<f;d++)if(e=a[d]){for(;(e=e.previousSibling)&&1!==e.nodeType;);a[d]=c||e&&e.nodeName.toLowerCase()===b?e||!1:e===b}c&&n.filter(b,a,!0)},">":function(a,b){var c,d="string"==typeof b,e=0,f=a.length;if(d&&!o.test(b))for(b=b.toLowerCase();e<f;e++){if(c=a[e])c=c.parentNode,a[e]=c.nodeName.toLowerCase()===b?c:!1}else{for(;e<f;e++)(c=
a[e])&&(a[e]=d?c.parentNode:c.parentNode===b);d&&n.filter(b,a,!0)}},"":function(b,d,e){var f,h=g++,l=a;"string"==typeof d&&!o.test(d)&&(d=d.toLowerCase(),f=d,l=c);l("parentNode",d,h,b,f,e)},"~":function(b,d,e){var f,h=g++,l=a;"string"==typeof d&&!o.test(d)&&(d=d.toLowerCase(),f=d,l=c);l("previousSibling",d,h,b,f,e)}},find:{ID:function(a,b,c){if("undefined"!=typeof b.getElementById&&!c)return(a=b.getElementById(a[1]))&&a.parentNode?[a]:[]},NAME:function(a,b){if("undefined"!=typeof b.getElementsByName){for(var c=
[],d=b.getElementsByName(a[1]),e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return 0===c.length?null:c}},TAG:function(a,b){if("undefined"!=typeof b.getElementsByTagName)return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(k,"")+" ";if(f)return a;for(var f=0,g;null!=(g=b[f]);f++)g&&(e^(g.className&&0<=(" "+g.className+" ").replace(/[\t\n\r]/g," ").indexOf(a))?c||d.push(g):c&&(b[f]=!1));return!1},ID:function(a){return a[1].replace(k,
"")},TAG:function(a){return a[1].replace(k,"").toLowerCase()},CHILD:function(a){if("nth"===a[1]){a[2]||n.error(a[0]);a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}else a[2]&&n.error(a[0]);a[0]=g++;return a},ATTR:function(a,b,c,d,e,f){b=a[1]=a[1].replace(k,"");!f&&p.attrMap[b]&&(a[1]=p.attrMap[b]);a[4]=(a[4]||a[5]||"").replace(k,"");"~="===a[2]&&(a[4]=" "+a[4]+
" ");return a},PSEUDO:function(a,b,c,e,f){if("not"===a[1])if(1<(d.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=n(a[3],null,null,b);else return a=n.filter(a[3],b,c,1^f),c||e.push.apply(e,a),!1;else if(p.match.POS.test(a[0])||p.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode&&
a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!n(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return"input"===a.nodeName.toLowerCase()&&"text"===c&&(b===c||null===b)},radio:function(a){return"input"===a.nodeName.toLowerCase()&&"radio"===a.type},checkbox:function(a){return"input"===a.nodeName.toLowerCase()&&"checkbox"===
a.type},file:function(a){return"input"===a.nodeName.toLowerCase()&&"file"===a.type},password:function(a){return"input"===a.nodeName.toLowerCase()&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"submit"===a.type},image:function(a){return"input"===a.nodeName.toLowerCase()&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return("input"===b||"button"===b)&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();
return"input"===b&&"button"===a.type||"button"===b},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,
b,c,d){var e=b[1],f=p.filters[e];if(f)return f(a,c,b,d);if("contains"===e)return 0<=(a.textContent||a.innerText||r([a])||"").indexOf(b[3]);if("not"===e){b=b[3];c=0;for(d=b.length;c<d;c++)if(b[c]===a)return!1;return!0}n.error(e)},CHILD:function(a,b){var c,d,f,g,h,q;c=b[1];q=a;switch(c){case "only":case "first":for(;q=q.previousSibling;)if(1===q.nodeType)return!1;if("first"===c)return!0;q=a;case "last":for(;q=q.nextSibling;)if(1===q.nodeType)return!1;return!0;case "nth":c=b[2];d=b[3];if(1===c&&0===
d)return!0;f=b[0];if((g=a.parentNode)&&(g[e]!==f||!a.nodeIndex)){h=0;for(q=g.firstChild;q;q=q.nextSibling)1===q.nodeType&&(q.nodeIndex=++h);g[e]=f}q=a.nodeIndex-d;return 0===c?0===q:0===q%c&&0<=q/c}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var c=b[1],c=n.attr?n.attr(a,c):p.attrHandle[c]?
p.attrHandle[c](a):null!=a[c]?a[c]:a.getAttribute(c),d=c+"",e=b[2],f=b[4];return null==c?"!="===e:!e&&n.attr?null!=c:"="===e?d===f:"*="===e?0<=d.indexOf(f):"~="===e?0<=(" "+d+" ").indexOf(f):f?"!="===e?d!==f:"^="===e?0===d.indexOf(f):"$="===e?d.substr(d.length-f.length)===f:"|="===e?d===f||d.substr(0,f.length+1)===f+"-":!1:d&&!1!==c},POS:function(a,b,c,d){var f=p.setFilters[b[2]];if(f)return f(a,c,b,d)}}},H=p.match.POS,F=function(a,b){return"\\"+(b-0+1)},t;for(t in p.match)p.match[t]=RegExp(p.match[t].source+
/(?![^\[]*\])(?![^\(]*\))/.source),p.leftMatch[t]=RegExp(/(^(?:.|\r|\n)*?)/.source+p.match[t].source.replace(/\\(\d+)/g,F));p.match.globalPOS=H;var u=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(v.documentElement.childNodes,0)[0].nodeType}catch(s){u=function(a,b){var c=0,d=b||[];if("[object Array]"===h.call(a))Array.prototype.push.apply(d,a);else if("number"==typeof a.length)for(var f=a.length;c<f;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);
return d}}var w,x;v.documentElement.compareDocumentPosition?w=function(a,b){return a===b?(l=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(w=function(a,b){if(a===b)return l=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,f=[],e=[];c=a.parentNode;d=b.parentNode;var g=c;if(c===d)return x(a,b);if(!c)return-1;if(!d)return 1;for(;g;)f.unshift(g),g=g.parentNode;for(g=d;g;)e.unshift(g),g=g.parentNode;
c=f.length;d=e.length;for(g=0;g<c&&g<d;g++)if(f[g]!==e[g])return x(f[g],e[g]);return g===c?x(a,e[g],-1):x(f[g],b,1)},x=function(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1});(function(){var a=v.createElement("div"),c="script"+(new Date).getTime(),d=v.documentElement;a.innerHTML="<a name='"+c+"'/>";d.insertBefore(a,d.firstChild);v.getElementById(c)&&(p.find.ID=function(a,c,d){if("undefined"!=typeof c.getElementById&&!d)return(c=c.getElementById(a[1]))?
c.id===a[1]||"undefined"!=typeof c.getAttributeNode&&c.getAttributeNode("id").nodeValue===a[1]?[c]:b:[]},p.filter.ID=function(a,b){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&c&&c.nodeValue===b});d.removeChild(a);d=a=null})();(function(){var a=v.createElement("div");a.appendChild(v.createComment(""));0<a.getElementsByTagName("*").length&&(p.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if("*"===a[1]){for(var d=[],f=0;c[f];f++)1===c[f].nodeType&&
d.push(c[f]);c=d}return c});a.innerHTML="<a href='#'></a>";a.firstChild&&"undefined"!=typeof a.firstChild.getAttribute&&"#"!==a.firstChild.getAttribute("href")&&(p.attrHandle.href=function(a){return a.getAttribute("href",2)});a=null})();v.querySelectorAll&&function(){var a=n,b=v.createElement("div");b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||0!==b.querySelectorAll(".TEST").length){n=function(b,c,d,f){c=c||v;if(!f&&!n.isXML(c)){var e=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(e&&
(1===c.nodeType||9===c.nodeType)){if(e[1])return u(c.getElementsByTagName(b),d);if(e[2]&&p.find.CLASS&&c.getElementsByClassName)return u(c.getElementsByClassName(e[2]),d)}if(9===c.nodeType){if("body"===b&&c.body)return u([c.body],d);if(e&&e[3]){var g=c.getElementById(e[3]);if(!g||!g.parentNode)return u([],d);if(g.id===e[3])return u([g],d)}try{return u(c.querySelectorAll(b),d)}catch(q){}}else if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){var e=c,h=(g=c.getAttribute("id"))||"__sizzle__",l=
c.parentNode,j=/^\s*[+~]/.test(b);g?h=h.replace(/'/g,"\\$&"):c.setAttribute("id",h);j&&l&&(c=c.parentNode);try{if(!j||l)return u(c.querySelectorAll("[id='"+h+"'] "+b),d)}catch(A){}finally{g||e.removeAttribute("id")}}}return a(b,c,d,f)};for(var c in a)n[c]=a[c];b=null}}();(function(){var a=v.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var c=!b.call(v.createElement("div"),"div"),d=!1;try{b.call(v.documentElement,"[test!='']:sizzle")}catch(f){d=
!0}n.matchesSelector=function(a,f){f=f.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!n.isXML(a))try{if(d||!p.match.PSEUDO.test(f)&&!/!=/.test(f)){var e=b.call(a,f);if(e||!c||a.document&&11!==a.document.nodeType)return e}}catch(g){}return 0<n(f,null,null,[a]).length}}})();(function(){var a=v.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";a.getElementsByClassName&&0!==a.getElementsByClassName("e").length&&(a.lastChild.className="e",1!==a.getElementsByClassName("e").length&&
(p.order.splice(1,0,"CLASS"),p.find.CLASS=function(a,b,c){if("undefined"!=typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a[1])},a=null))})();v.documentElement.contains?n.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:v.documentElement.compareDocumentPosition?n.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:n.contains=function(){return!1};n.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?"HTML"!==a.nodeName:!1};var y=
function(a,b,c){for(var d,f=[],e="",b=b.nodeType?[b]:b;d=p.match.PSEUDO.exec(a);)e+=d[0],a=a.replace(p.match.PSEUDO,"");a=p.relative[a]?a+"*":a;d=0;for(var g=b.length;d<g;d++)n(a,b[d],f,c);return n.filter(e,f)};n.attr=f.attr;n.selectors.attrMap={};f.find=n;f.expr=n.selectors;f.expr[":"]=f.expr.filters;f.unique=n.uniqueSort;f.text=n.getText;f.isXMLDoc=n.isXML;f.contains=n.contains})();var fb=/Until$/,gb=/^(?:parents|prevUntil|prevAll)/,hb=/,/,Wa=/^.[^:#\[\.,]*$/,ib=Array.prototype.slice,Ga=f.expr.match.globalPOS,
jb={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if("string"!=typeof a)return f(a).filter(function(){c=0;for(d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,l;c=0;for(d=this.length;c<d;c++)if(g=e.length,f.find(a,this[c],e),0<c)for(h=g;h<e.length;h++)for(l=0;l<g;l++)if(e[l]===e[h]){e.splice(h--,1);break}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,
b[a]))return!0})},not:function(a){return this.pushStack(p(this,a,!1),"not",a)},filter:function(a){return this.pushStack(p(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?Ga.test(a)?0<=f(a,this.context).index(this[0]):0<f.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){for(e=1;g&&g.ownerDocument&&g!==b;){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:e});g=g.parentNode;e++}return c}var h=Ga.test(a)||
"string"!=typeof a?f(a,b||this.context):0;d=0;for(e=this.length;d<e;d++)for(g=this[d];g;){if(h?-1<h.index(g):f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||11===g.nodeType)break}c=1<c.length?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){return!a?this[0]&&this[0].parentNode?this.prevAll().length:-1:"string"==typeof a?f.inArray(this[0],f(a)):f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c="string"==typeof a?f(a,b):f.makeArray(a&&
a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(!c[0]||!c[0].parentNode||11===c[0].parentNode.nodeType||!d[0]||!d[0].parentNode||11===d[0].parentNode.nodeType?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}});f.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,
2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,
b){f.fn[a]=function(c,d){var e=f.map(this,b,c);fb.test(a)||(d=c);d&&"string"==typeof d&&(e=f.filter(d,e));e=1<this.length&&!jb[a]?f.unique(e):e;(1<this.length||hb.test(d))&&gb.test(a)&&(e=e.reverse());return this.pushStack(e,a,ib.call(arguments).join(","))}});f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return 1===b.length?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){for(var e=[],a=a[c];a&&9!==a.nodeType&&(d===b||1!==a.nodeType||!f(a).is(d));)1===a.nodeType&&
e.push(a),a=a[c];return e},nth:function(a,b,c){for(var b=b||1,d=0;a&&!(1===a.nodeType&&++d===b);a=a[c]);return a},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var va="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",kb=/ jQuery\d+="(?:\d+|null)"/g,pa=/^\s+/,Ha=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Ia=/<([\w:]+)/,
lb=/<tbody/i,mb=/<|&#?\w+;/,nb=/<(?:script|style)/i,ob=/<(?:script|object|embed|option|style)/i,Ja=RegExp("<(?:"+va+")[\\s/>]","i"),Ka=/checked\s*(?:[^=]|=\s*.checked.)/i,La=/\/(java|ecma)script/i,pb=/^\s*<!(?:\[CDATA\[|\-\-)/,L={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],
area:[1,"<map>","</map>"],_default:[0,"",""]},qa=x(v);L.optgroup=L.option;L.tbody=L.tfoot=L.colgroup=L.caption=L.thead;L.th=L.td;f.support.htmlSerialize||(L._default=[1,"div<div>","</div>"]);f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||v).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=
f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return f.isFunction(a)?this.each(function(b){f(this).wrapInner(a.call(this,b))}):this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):
a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=
f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;null!=(d=this[c]);c++)if(!a||f.filter(a,[d]).length)!b&&1===d.nodeType&&(f.cleanData(d.getElementsByTagName("*")),
f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;null!=(b=this[a]);a++)for(1===b.nodeType&&f.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(kb,""):null;if("string"==
typeof a&&!nb.test(a)&&(f.support.leadingWhitespace||!pa.test(a))&&!L[(Ia.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ha,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});"string"!=typeof a&&(a=f(a).detach());
return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove();b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,l=a[0],j=[];if(!f.support.checkClone&&3===arguments.length&&"string"==typeof l&&Ka.test(l))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(l))return this.each(function(e){var g=f(this);a[0]=l.call(this,
e,c?g.html():b);g.domManip(a,c,d)});if(this[0]){h=l&&l.parentNode;f.support.parentNode&&h&&11===h.nodeType&&h.childNodes.length===this.length?e={fragment:h}:e=f.buildFragment(a,this,j);h=e.fragment;1===h.childNodes.length?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");g=0;for(var k=this.length,m=k-1;g<k;g++)d.call(c?f.nodeName(this[g],"table")?this[g].getElementsByTagName("tbody")[0]||this[g].appendChild(this[g].ownerDocument.createElement("tbody")):this[g]:this[g],e.cacheable||1<k&&
g<m?f.clone(h,!0,!0):h)}j.length&&f.each(j,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(pb,"/*$0*/"));b.parentNode&&b.parentNode.removeChild(b)})}return this}});f.buildFragment=function(a,b,c){var d,e,g,h,l=a[0];b&&b[0]&&(h=b[0].ownerDocument||b[0]);h.createDocumentFragment||(h=v);1===a.length&&"string"==typeof l&&512>l.length&&h===v&&"<"===l.charAt(0)&&!ob.test(l)&&(f.support.checkClone||!Ka.test(l))&&
(f.support.html5Clone||!Ja.test(l))&&(e=!0,g=f.fragments[l],g&&1!==g&&(d=g));d||(d=h.createDocumentFragment(),f.clean(a,h,d,c));e&&(f.fragments[l]=g?d:1);return{fragment:d,cacheable:e}};f.fragments={};f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],c=f(c),e=1===this.length&&this[0].parentNode;if(e&&11===e.nodeType&&1===e.childNodes.length&&1===c.length)return c[b](this[0]),this;for(var e=0,
g=c.length;e<g;e++){var h=(0<e?this.clone(!0):this).get();f(c[e])[b](h);d=d.concat(h)}return this.pushStack(d,a,c.selector)}});f.extend({clone:function(a,b,c){var d,e,g;f.support.html5Clone||f.isXMLDoc(a)||!Ja.test("<"+a.nodeName+">")?d=a.cloneNode(!0):(d=v.createElement("div"),qa.appendChild(d),d.innerHTML=a.outerHTML,d=d.firstChild);var h=d;if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(1===a.nodeType||11===a.nodeType)&&!f.isXMLDoc(a)){w(a,h);d=z(a);e=z(h);for(g=0;d[g];++g)e[g]&&w(d[g],
e[g])}if(b&&(I(a,h),c)){d=z(a);e=z(h);for(g=0;d[g];++g)I(d[g],e[g])}return h},clean:function(a,b,c,d){var e,g=[],b=b||v;"undefined"==typeof b.createElement&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||v);for(var h=0,l;null!=(l=a[h]);h++)if("number"==typeof l&&(l+=""),l){if("string"==typeof l)if(mb.test(l)){l=l.replace(Ha,"<$1></$2>");e=(Ia.exec(l)||["",""])[1].toLowerCase();var j=L[e]||L._default,k=j[0],m=b.createElement("div"),n=qa.childNodes,o;b===v?qa.appendChild(m):x(b).appendChild(m);for(m.innerHTML=
j[1]+l+j[2];k--;)m=m.lastChild;if(!f.support.tbody){k=lb.test(l);j="table"===e&&!k?m.firstChild&&m.firstChild.childNodes:"<table>"===j[1]&&!k?m.childNodes:[];for(e=j.length-1;0<=e;--e)f.nodeName(j[e],"tbody")&&!j[e].childNodes.length&&j[e].parentNode.removeChild(j[e])}!f.support.leadingWhitespace&&pa.test(l)&&m.insertBefore(b.createTextNode(pa.exec(l)[0]),m.firstChild);l=m.childNodes;m&&(m.parentNode.removeChild(m),0<n.length&&(o=n[n.length-1],o&&o.parentNode&&o.parentNode.removeChild(o)))}else l=
b.createTextNode(l);var p;if(!f.support.appendChecked)if(l[0]&&"number"==typeof(p=l.length))for(e=0;e<p;e++)y(l[e]);else y(l);l.nodeType?g.push(l):g=f.merge(g,l)}if(c){a=function(a){return!a.type||La.test(a.type)};for(h=0;g[h];h++)b=g[h],d&&f.nodeName(b,"script")&&(!b.type||La.test(b.type))?d.push(b.parentNode?b.parentNode.removeChild(b):b):(1===b.nodeType&&(l=f.grep(b.getElementsByTagName("script"),a),g.splice.apply(g,[h+1,0].concat(l))),c.appendChild(b))}return g},cleanData:function(a){for(var b,
c,d=f.cache,e=f.event.special,g=f.support.deleteExpando,h=0,l;null!=(l=a[h]);h++)if(!l.nodeName||!f.noData[l.nodeName.toLowerCase()])if(c=l[f.expando]){if((b=d[c])&&b.events){for(var j in b.events)e[j]?f.event.remove(l,j):f.removeEvent(l,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete l[f.expando]:l.removeAttribute&&l.removeAttribute(f.expando);delete d[c]}}});var ra=/alpha\([^)]*\)/i,qb=/opacity=([^)]*)/,rb=/([A-Z]|^ms)/g,sb=/^[\-+]?(?:\d*\.)?\d+$/i,ja=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,tb=/^([\-+])=([\-+.\de]+)/,
ub=/^margin/,vb={position:"absolute",visibility:"hidden",display:"block"},T=["Top","Right","Bottom","Left"],X,Ma,Na;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,1<arguments.length)};f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=X(a,"opacity");return""===c?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?
"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var g,h=f.camelCase(c),l=a.style,j=f.cssHooks[h],c=f.cssProps[h]||h;if(d===b)return j&&"get"in j&&(g=j.get(a,!1,e))!==b?g:l[c];e=typeof d;"string"===e&&(g=tb.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),e="number");if(!(null==d||"number"===e&&isNaN(d)))if("number"===e&&!f.cssNumber[h]&&(d+="px"),!j||!("set"in j)||(d=j.set(a,d))!==b)try{l[c]=d}catch(k){}}},css:function(a,c,d){var e,g,c=f.camelCase(c);
g=f.cssHooks[c];c=f.cssProps[c]||c;"cssFloat"===c&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(X)return X(a,c)},swap:function(a,b,c){var d={},e;for(e in b)d[e]=a.style[e],a.style[e]=b[e];c=c.call(a);for(e in b)a.style[e]=d[e];return c}});f.curCSS=f.css;v.defaultView&&v.defaultView.getComputedStyle&&(Ma=function(a,b){var c,d,e,g,h=a.style,b=b.replace(rb,"-$1").toLowerCase();(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),""===c&&!f.contains(a.ownerDocument.documentElement,
a)&&(c=f.style(a,b)));!f.support.pixelMargin&&e&&ub.test(b)&&ja.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c});v.documentElement.currentStyle&&(Na=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;null==f&&g&&(e=g[b])&&(f=e);ja.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left="fontSize"===b?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return""===f?"auto":f});X=Ma||Na;f.each(["height",
"width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c)return 0!==a.offsetWidth?t(a,b,d):f.swap(a,vb,function(){return t(a,b,d)})},set:function(a,b){return sb.test(b)?b+"px":b}}});f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return qb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+100*b+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(1<=
b&&""===f.trim(g.replace(ra,""))&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=ra.test(g)?g.replace(ra,e):g+" "+e}});f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?X(a,"margin-right"):a.style.marginRight})}})});f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetHeight;return 0===a.offsetWidth&&0===b||!f.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||
f.css(a,"display"))},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)});f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){for(var d="string"==typeof c?c.split(" "):[c],e={},c=0;4>c;c++)e[a+T[c]+b]=d[c]||d[c-2]||d[0];return e}}});var wb=/%20/g,Va=/\[\]$/,Oa=/\r?\n/g,xb=/#.*$/,yb=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,zb=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ab=/^(?:GET|HEAD)$/,
Bb=/^\/\//,Pa=/\?/,Cb=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Db=/^(?:select|textarea)/i,ua=/\s+/,Eb=/([?&])_=[^&]*/,Qa=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,Ra=f.fn.load,ia={},Sa={},U,V,Ta=["*/"]+["*"];try{U=P.href}catch(Kb){U=v.createElement("a"),U.href="",U=U.href}V=Qa.exec(U.toLowerCase())||[];f.fn.extend({load:function(a,c,d){if("string"!=typeof a&&Ra)return Ra.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(0<=e)var g=a.slice(e,a.length),a=
a.slice(0,e);e="GET";c&&(f.isFunction(c)?(d=c,c=b):"object"==typeof c&&(c=f.param(c,f.ajaxSettings.traditional),e="POST"));var h=this;f.ajax({url:a,type:e,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText;a.isResolved()&&(a.done(function(a){c=a}),h.html(g?f("<div>").append(c.replace(Cb,"")).find(g):c));d&&h.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Db.test(this.nodeName)||zb.test(this.type))}).map(function(a,b){var c=f(this).val();return null==c?null:f.isArray(c)?f.map(c,function(a){return{name:b.name,value:a.replace(Oa,"\r\n")}}):{name:b.name,value:c.replace(Oa,"\r\n")}}).get()}});f.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(a,b){f.fn[b]=function(a){return this.on(b,a)}});f.each(["get","post"],function(a,c){f[c]=function(a,
d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}});f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?o(a,f.ajaxSettings):(b=a,a=f.ajaxSettings);o(a,b);return a},ajaxSettings:{url:U,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(V[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,
async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Ta},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:n(ia),ajaxTransport:n(Sa),ajax:function(a,c){function d(a,c,q,n){if(2!==u){u=2;v&&clearTimeout(v);F=b;p=n||"";s.readyState=0<a?4:
0;var o,A,B,n=c;if(q){var r=e,H=s,t=r.contents,w=r.dataTypes,y=r.responseFields,C,z,P,ka;for(z in y)z in q&&(H[y[z]]=q[z]);for(;"*"===w[0];)w.shift(),C===b&&(C=r.mimeType||H.getResponseHeader("content-type"));if(C)for(z in t)if(t[z]&&t[z].test(C)){w.unshift(z);break}if(w[0]in q)P=w[0];else{for(z in q){if(!w[0]||r.converters[z+" "+w[0]]){P=z;break}ka||(ka=z)}P=P||ka}P?(P!==w[0]&&w.unshift(P),q=q[P]):q=void 0}else q=b;if(200<=a&&300>a||304===a){if(e.ifModified){if(C=s.getResponseHeader("Last-Modified"))f.lastModified[m]=
C;if(C=s.getResponseHeader("Etag"))f.etag[m]=C}if(304===a)n="notmodified",o=!0;else try{C=e;C.dataFilter&&(q=C.dataFilter(q,C.dataType));var S=C.dataTypes;z={};var G,I,la=S.length,L,J=S[0],M,Q,K,N,O;for(G=1;G<la;G++){if(1===G)for(I in C.converters)"string"==typeof I&&(z[I.toLowerCase()]=C.converters[I]);M=J;J=S[G];if("*"===J)J=M;else if("*"!==M&&M!==J){Q=M+" "+J;K=z[Q]||z["* "+J];if(!K)for(N in O=b,z)if(L=N.split(" "),L[0]===M||"*"===L[0])if(O=z[L[1]+" "+J]){N=z[N];!0===N?K=O:!0===O&&(K=N);break}!K&&
!O&&f.error("No conversion from "+Q.replace(" "," to "));!0!==K&&(q=K?K(q):O(N(q)))}}A=q;n="success";o=!0}catch(R){n="parsererror",B=R}}else if(B=n,!n||a)n="error",0>a&&(a=0);s.status=a;s.statusText=""+(c||n);o?l.resolveWith(g,[A,n,s]):l.rejectWith(g,[s,n,B]);s.statusCode(k);k=b;x&&h.trigger("ajax"+(o?"Success":"Error"),[s,e,o?A:B]);j.fireWith(g,[s,n]);x&&(h.trigger("ajaxComplete",[s,e]),--f.active||f.event.trigger("ajaxStop"))}}"object"==typeof a&&(c=a,a=b);var c=c||{},e=f.ajaxSetup({},c),g=e.context||
e,h=g!==e&&(g.nodeType||g instanceof f)?f(g):f.event,l=f.Deferred(),j=f.Callbacks("once memory"),k=e.statusCode||{},m,n={},o={},p,H,F,v,t,u=0,x,w,s={readyState:0,setRequestHeader:function(a,b){if(!u){var c=a.toLowerCase(),a=o[c]=o[c]||a;n[a]=b}return this},getAllResponseHeaders:function(){return 2===u?p:null},getResponseHeader:function(a){var c;if(2===u){if(!H)for(H={};c=yb.exec(p);)H[c[1].toLowerCase()]=c[2];c=H[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){u||(e.mimeType=a);
return this},abort:function(a){a=a||"abort";F&&F.abort(a);d(0,a);return this}};l.promise(s);s.success=s.done;s.error=s.fail;s.complete=j.add;s.statusCode=function(a){if(a){var b;if(2>u)for(b in a)k[b]=[k[b],a[b]];else b=a[s.status],s.then(b,b)}return this};e.url=((a||e.url)+"").replace(xb,"").replace(Bb,V[1]+"//");e.dataTypes=f.trim(e.dataType||"*").toLowerCase().split(ua);null==e.crossDomain&&(t=Qa.exec(e.url.toLowerCase()),e.crossDomain=!(!t||t[1]==V[1]&&t[2]==V[2]&&(t[3]||("http:"===t[1]?80:443))==
(V[3]||("http:"===V[1]?80:443))));e.data&&e.processData&&"string"!=typeof e.data&&(e.data=f.param(e.data,e.traditional));r(ia,e,c,s);if(2===u)return!1;x=e.global;e.type=e.type.toUpperCase();e.hasContent=!Ab.test(e.type);x&&0===f.active++&&f.event.trigger("ajaxStart");if(!e.hasContent&&(e.data&&(e.url+=(Pa.test(e.url)?"&":"?")+e.data,delete e.data),m=e.url,!1===e.cache)){t=f.now();var y=e.url.replace(Eb,"$1_="+t);e.url=y+(y===e.url?(Pa.test(e.url)?"&":"?")+"_="+t:"")}(e.data&&e.hasContent&&!1!==e.contentType||
c.contentType)&&s.setRequestHeader("Content-Type",e.contentType);e.ifModified&&(m=m||e.url,f.lastModified[m]&&s.setRequestHeader("If-Modified-Since",f.lastModified[m]),f.etag[m]&&s.setRequestHeader("If-None-Match",f.etag[m]));s.setRequestHeader("Accept",e.dataTypes[0]&&e.accepts[e.dataTypes[0]]?e.accepts[e.dataTypes[0]]+("*"!==e.dataTypes[0]?", "+Ta+"; q=0.01":""):e.accepts["*"]);for(w in e.headers)s.setRequestHeader(w,e.headers[w]);if(e.beforeSend&&(!1===e.beforeSend.call(g,s,e)||2===u))return s.abort(),
!1;for(w in{success:1,error:1,complete:1})s[w](e[w]);if(F=r(Sa,e,c,s)){s.readyState=1;x&&h.trigger("ajaxSend",[s,e]);e.async&&0<e.timeout&&(v=setTimeout(function(){s.abort("timeout")},e.timeout));try{u=1,F.send(n,d)}catch(z){if(2>u)d(-1,z);else throw z;}}else d(-1,"No Transport");return s},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,
function(){e(this.name,this.value)});else for(var g in a)k(g,a[g],c,e);return d.join("&").replace(wb,"+")}});f.extend({active:0,lastModified:{},etag:{}});var Fb=f.now(),fa=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+Fb++}});f.ajaxPrefilter("json jsonp",function(b,c,d){c="string"==typeof b.data&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if("jsonp"===b.dataTypes[0]||!1!==b.jsonp&&(fa.test(b.url)||c&&fa.test(b.data))){var e,g=b.jsonpCallback=
f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h=a[g],l=b.url,j=b.data,k="$1"+g+"$2";!1!==b.jsonp&&(l=l.replace(fa,k),b.url===l&&(c&&(j=j.replace(fa,k)),b.data===j&&(l+=(/\?/.test(l)?"&":"?")+b.jsonp+"="+g)));b.url=l;b.data=j;a[g]=function(a){e=[a]};d.always(function(){a[g]=h;e&&f.isFunction(h)&&a[g](e[0])});b.converters["script json"]=function(){e||f.error(g+" was not called");return e[0]};b.dataTypes[0]="json";return"script"}});f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}});f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});f.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=v.head||v.getElementsByTagName("head")[0]||v.documentElement;return{send:function(e,f){c=v.createElement("script");c.async="async";a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,
e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var sa=a.ActiveXObject?function(){for(var a in Z)Z[a](0,1)}:!1,Gb=0,Z;f.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&j()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:j;(function(a){f.extend(f.support,{ajax:!!a,
cors:!!a&&"withCredentials"in a})})(f.ajaxSettings.xhr());f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),l,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType);!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,
e[j])}catch(k){}h.send(c.hasContent&&c.data||null);d=function(a,e){var j,k,m,n,o;try{if(d&&(e||4===h.readyState))if(d=b,l&&(h.onreadystatechange=f.noop,sa&&delete Z[l]),e)4!==h.readyState&&h.abort();else{j=h.status;m=h.getAllResponseHeaders();n={};(o=h.responseXML)&&o.documentElement&&(n.xml=o);try{n.text=h.responseText}catch(p){}try{k=h.statusText}catch(r){k=""}!j&&c.isLocal&&!c.crossDomain?j=n.text?200:404:1223===j&&(j=204)}}catch(B){e||g(-1,B)}n&&g(j,k,n,m)};!c.async||4===h.readyState?d():(l=++Gb,
sa&&(Z||(Z={},f(a).unload(sa)),Z[l]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var ha={},M,W,Hb=/^(?:toggle|show|hide)$/,Ib=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,ga,ba=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],ca;f.fn.extend({show:function(a,b,c){var g;if(a||0===a)return this.animate(e("show",3),a,b,c);b=0;for(c=this.length;b<c;b++)a=this[b],a.style&&(g=a.style.display,!f._data(a,
"olddisplay")&&"none"===g&&(g=a.style.display=""),(""===g&&"none"===f.css(a,"display")||!f.contains(a.ownerDocument.documentElement,a))&&f._data(a,"olddisplay",d(a.nodeName)));for(b=0;b<c;b++)if(a=this[b],a.style&&(g=a.style.display,""===g||"none"===g))a.style.display=f._data(a,"olddisplay")||"";return this},hide:function(a,b,c){if(a||0===a)return this.animate(e("hide",3),a,b,c);for(var d,b=0,c=this.length;b<c;b++)a=this[b],a.style&&(d=f.css(a,"display"),"none"!==d&&!f._data(a,"olddisplay")&&f._data(a,
"olddisplay",d));for(b=0;b<c;b++)this[b].style&&(this[b].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d="boolean"==typeof a;f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):null==a||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(e("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,
b,c,e){function g(){!1===h.queue&&f._mark(this);var b=f.extend({},h),c=1===this.nodeType,e=c&&f(this).is(":hidden"),l,j,k,m,n,o,p,r,A;b.animatedProperties={};for(k in a)if(l=f.camelCase(k),k!==l&&(a[l]=a[k],delete a[k]),(j=f.cssHooks[l])&&"expand"in j)for(k in m=j.expand(a[l]),delete a[l],m)k in a||(a[k]=m[k]);for(l in a){j=a[l];f.isArray(j)?(b.animatedProperties[l]=j[1],j=a[l]=j[0]):b.animatedProperties[l]=b.specialEasing&&b.specialEasing[l]||b.easing||"swing";if("hide"===j&&e||"show"===j&&!e)return b.complete.call(this);
c&&("height"===l||"width"===l)&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===f.css(this,"display")&&"none"===f.css(this,"float")&&(!f.support.inlineBlockNeedsLayout||"inline"===d(this.nodeName)?this.style.display="inline-block":this.style.zoom=1))}null!=b.overflow&&(this.style.overflow="hidden");for(k in a)c=new f.fx(this,b,k),j=a[k],Hb.test(j)?(A=f._data(this,"toggle"+k)||("toggle"===j?e?"show":"hide":0),A?(f._data(this,"toggle"+k,"show"===A?"hide":"show"),
c[A]()):c[j]()):(n=Ib.exec(j),o=c.cur(),n?(p=parseFloat(n[2]),r=n[3]||(f.cssNumber[k]?"":"px"),"px"!==r&&(f.style(this,k,(p||1)+r),o*=(p||1)/c.cur(),f.style(this,k,o+r)),n[1]&&(p=("-="===n[1]?-1:1)*p+o),c.custom(o,p,r)):c.custom(o,j,""));return!0}var h=f.speed(b,c,e);if(f.isEmptyObject(a))return this.each(h.complete,[!1]);a=f.extend({},a);return!1===h.queue?this.each(g):this.queue(h.queue,g)},stop:function(a,c,d){"string"!=typeof a&&(d=c,c=a,a=b);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b,
c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(null==a)for(b in g){if(g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4){var h=g[b];f.removeData(this,b,!0);h.stop(d)}}else if(g[b=a+".run"]&&g[b].stop)g=g[b],f.removeData(this,b,!0),g.stop(d);for(b=e.length;b--;)e[b].elem===this&&(null==a||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}});f.each({slideDown:e("show",1),slideUp:e("hide",1),slideToggle:e("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},
fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});f.extend({speed:function(a,b,c){var d=a&&"object"==typeof a?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(a){f.isFunction(d.old)&&d.old.call(this);
d.queue?f.dequeue(this,d.queue):!1!==a&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+0.5}},timers:[],fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;b.orig=b.orig||{}}});f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];
var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||"auto"===b?0:b:a},custom:function(a,c,d){function e(a){return g.step(a)}var g=this,l=f.fx;this.startTime=ca||h();this.end=c;this.now=this.start=a;this.pos=this.state=0;this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px");e.queue=this.options.queue;e.elem=this.elem;e.saveState=function(){f._data(g.elem,"fxshow"+g.prop)===b&&(g.options.hide?f._data(g.elem,"fxshow"+g.prop,g.start):g.options.show&&f._data(g.elem,"fxshow"+g.prop,
g.end))};e()&&f.timers.push(e)&&!ga&&(ga=setInterval(l.tick,l.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop);this.options.show=!0;a!==b?this.custom(this.cur(),a):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur());f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop);this.options.hide=!0;this.custom(this.cur(),0)},step:function(a){var b,
c,d=ca||h(),e=!0,g=this.elem,l=this.options;if(a||d>=l.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();l.animatedProperties[this.prop]=!0;for(b in l.animatedProperties)!0!==l.animatedProperties[b]&&(e=!1);if(e){null!=l.overflow&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){g.style["overflow"+b]=l.overflow[a]});l.hide&&f(g).hide();if(l.hide||l.show)for(b in l.animatedProperties)f.style(g,b,l.orig[b]),f.removeData(g,"fxshow"+b,!0),f.removeData(g,"toggle"+
b,!0);(a=l.complete)&&(l.complete=!1,a.call(g))}return!1}Infinity==l.duration?this.now=d:(c=d-this.startTime,this.state=c/l.duration,this.pos=f.easing[l.animatedProperties[this.prop]](this.state,c,0,1,l.duration),this.now=this.start+(this.end-this.start)*this.pos);this.update();return!0}};f.extend(f.fx,{tick:function(){for(var a,b=f.timers,c=0;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(ga);ga=null},speeds:{slow:600,fast:200,
_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&null!=a.elem.style[a.prop]?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}});f.each(ba.concat.apply([],ba),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})});f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var ta,Jb=/^t(?:able|d|h)$/i,Ua=/^(?:body|html)$/i;
"getBoundingClientRect"in v.documentElement?ta=function(a,b,d,e){try{e=a.getBoundingClientRect()}catch(g){}if(!e||!f.contains(d,a))return e?{top:e.top,left:e.left}:{top:0,left:0};a=b.body;b=c(b);return{top:e.top+(b.pageYOffset||f.support.boxModel&&d.scrollTop||a.scrollTop)-(d.clientTop||a.clientTop||0),left:e.left+(b.pageXOffset||f.support.boxModel&&d.scrollLeft||a.scrollLeft)-(d.clientLeft||a.clientLeft||0)}}:ta=function(a,b,c){var d,e=a.offsetParent,g=b.body;d=(b=b.defaultView)?b.getComputedStyle(a,
null):a.currentStyle;for(var h=a.offsetTop,l=a.offsetLeft;(a=a.parentNode)&&a!==g&&a!==c&&!(f.support.fixedPosition&&"fixed"===d.position);)d=b?b.getComputedStyle(a,null):a.currentStyle,h-=a.scrollTop,l-=a.scrollLeft,a===e&&(h+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!Jb.test(a.nodeName))&&(h+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&"visible"!==
d.overflow&&(h+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0);if("relative"===d.position||"static"===d.position)h+=g.offsetTop,l+=g.offsetLeft;f.support.fixedPosition&&"fixed"===d.position&&(h+=Math.max(c.scrollTop,g.scrollTop),l+=Math.max(c.scrollLeft,g.scrollLeft));return{top:h,left:l}};f.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)});var c=this[0],d=c&&c.ownerDocument;return!d?null:c===d.body?f.offset.bodyOffset(c):
ta(c,d,d.documentElement)};f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");"static"===d&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),l=f.css(a,"left"),j={},k={},m,n;("absolute"===d||"fixed"===d)&&-1<f.inArray("auto",[h,l])?(k=e.position(),m=k.top,n=k.left):
(m=parseFloat(h)||0,n=parseFloat(l)||0);f.isFunction(b)&&(b=b.call(a,c,g));null!=b.top&&(j.top=b.top-g.top+m);null!=b.left&&(j.left=b.left-g.left+n);"using"in b?b.using.call(a,j):e.css(j)}};f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=Ua.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0;c.left-=parseFloat(f.css(a,"marginLeft"))||0;d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(f.css(b[0],
"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||v.body;a&&!Ua.test(a.nodeName)&&"static"===f.css(a,"position");)a=a.offsetParent;return a})}});f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,d){var e=/Y/.test(d);f.fn[a]=function(g){return f.access(this,function(a,g,h){var l=c(a);if(h===b)return l?d in l?l[d]:f.support.boxModel&&l.document.documentElement[g]||l.document.body[g]:a[g];
l?l.scrollTo(e?f(l).scrollLeft():h,e?h:f(l).scrollTop()):a[g]=h},a,g,arguments.length,null)}});f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null};f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null};f.fn[c]=function(a){return f.access(this,function(a,c,l){if(f.isWindow(a))return c=a.document,
a=c.documentElement[d],f.support.boxModel&&a||c.body&&c.body[d]||a;if(9===a.nodeType)return c=a.documentElement,c[d]>=c[e]?c[d]:Math.max(a.body[e],c[e],a.body[g],c[g]);if(l===b)return a=f.css(a,c),c=parseFloat(a),f.isNumeric(c)?c:a;f(a).css(c,l)},c,a,arguments.length,null)}});a.jQuery=a.$=f;"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);var VERSION_NAME="1.0.5",BUILD_DATE="20120711",BookType=function(){};BookType.normal_book=0;BookType.single_book=1;BookType.zoom_book=2;var normalBookStatu=function(){};normalBookStatu.book_statu_ready=0;normalBookStatu.book_statu_auto_flip=1;normalBookStatu.book_statu_mouse_flip=2;var singleBookStatu=function(){};singleBookStatu.book_statu_ready=0;singleBookStatu.book_statu_auto_flip=1;singleBookStatu.book_statu_mouse_flip=2;var bookCorner=function(){};bookCorner.top_left=0;
bookCorner.top_right=1;bookCorner.bottom_left=2;bookCorner.bottom_right=3;var PageEditor=function(){};PageEditor.AnnoType=function(){};PageEditor.AnnoType.ANNO_LINK="com.mobiano.flipbook.pageeditor.TAnnoLink";PageEditor.AnnoType.ANNO_YOUTUBE="com.mobiano.flipbook.pageeditor.TAnnoYouTube";PageEditor.AnnoType.ANNO_VIDEO="com.mobiano.flipbook.pageeditor.TAnnoMovie";PageEditor.AnnoType.ANNO_AUDIO="com.mobiano.flipbook.pageeditor.TAnnoSound";PageEditor.AnnoType.ANNO_IMAGE="com.mobiano.flipbook.pageeditor.TAnnoImage";
PageEditor.AnnoType.ANNO_BUTTON="com.mobiano.flipbook.pageeditor.TAnnoButton";PageEditor.AnnoType.ANNO_LINE="com.mobiano.flipbook.pageeditor.shapes::TAnnoLine";PageEditor.AnnoType.ANNO_ARROW="com.mobiano.flipbook.pageeditor.shapes::TAnnoArrow";PageEditor.AnnoType.ANNO_ROUND="com.mobiano.flipbook.pageeditor.shapes::TAnnoEllipse";PageEditor.AnnoType.ANNO_RECTANGLE="com.mobiano.flipbook.pageeditor.shapes::TAnnoRectangle";PageEditor.AnnoType.ANNO_TEXT="com.mobiano.flipbook.pageeditor::TAnnoText";
PageEditor.AnnoType.ANNO_AREA="com.mobiano.flipbook.pageeditor::TAnnoHighLightArea";PageEditor.AnnoType.ANNO_FLASHSHOW="com.mobiano.flipbook.pageeditor.TAnnoEmbeddedSlideshow";PageEditor.AnnoType.ANNO_ATEXT="com.mobiano.flipbook.pageeditor::TAnnoDynamicText";PageEditor.AnnoType.ANNO_STARTEXT="com.mobiano.flipbook.pageeditor::TAnnoStarwarsText";PageEditor.AnnoType.ANNO_TEXTANIM="com.mobiano.flipbook.pageeditor.textAnim::TAnnoTextAnim";PageEditor.AnnoType.ANNO_ATIMAGE="com.mobiano.flipbook.pageeditor.TAnnoClipart";
PageEditor.AnnoType.ANNO_EFFECTTEXT="com.mobiano.flipbook.pageeditor.TAnnoEffectText";PageEditor.AnnoType.ANNO_CALLOUT="com.mobiano.flipbook.pageeditor.shapes::TAnnoCallout";PageEditor.AnnoType.ANNO_ADVANCEDSOUND="com.mobiano.flipbook.pageeditor::TAnnoAdvancedSound";PageEditor.PlayEvt=function(){};PageEditor.PlayEvt.EVT_PLAY="EVT_PageViewed";PageEditor.PlayEvt.EVT_STOP="EVT_PageOffView";PageEditor.TriggerEventType=function(){};PageEditor.TriggerEventType.MouseDown="mouseDown";
PageEditor.TriggerEventType.MouseOver="mouseOver";PageEditor.TriggerEventType.MouseOut="mouseOut";PageEditor.ActionType=function(){};PageEditor.ActionType.GOTO_PAGE="com.mobiano.flipbook.pageeditor.TAnnoActionGotoPage";PageEditor.ActionType.OPEN_URL="com.mobiano.flipbook.pageeditor.TAnnoActionOpenURL";PageEditor.ActionType.OPEN_WINDOW="com.mobiano.flipbook.pageeditor.TAnnoActionOpenWindow";PageEditor.ActionType.SLIDE_SHOW="com.mobiano.flipbook.pageeditor.TAnnoActionPhotoSlide";
PageEditor.ActionType.ACTION_JS="com.mobiano.flipbook.pageeditor.TAnnoActionJavascript";PageEditor.ActionType.PLAY_AUDIO="com.mobiano.flipbook.pageeditor.TAnnoActionPlayAudio";var _event;_event="Touch"in window?{_down:"touchstart",_move:"touchmove",_end:"touchend"}:{_down:"mousedown",_move:"mousemove",_end:"mouseup"};var bookEvent=function(){};bookEvent.onCurrentPageIndexChanged="BE_PIC";bookEvent.onCurrentPageIndexWillChange="BE_PIWC";bookEvent.onNoNextPage="BE_NNP";bookEvent.onNoPreviousPage="BE_NPP";$.fn.zoom=function(a,b,c,d,e){try{if(null==this||void 0==this)return;var g=Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)),h=Math.sqrt(Math.pow(d.x-c.x,2)+Math.pow(d.y-c.y,2)),j=e.width+2*(h-g);this.css({width:j+"px",height:j*e.height/e.width+"px"})}catch(k){return!1}return!0};(function(a){var b=function(b,d,e,g,h){h=a.extend({background:"green",cornersTop:!0,scale:"noresize"},h);b.prev();var j=0,k=!1,o=h.background,r=h.cornersTop,n=h.gradientColors||["#ddd","#eee","#fff"],t=h.scale,y=[],m=b.clone(),z=a.browser.msie?null:m[0].getContext("2d"),b=a.browser.msie?a(G_vmlCanvasManager.initElement(b[0])):b,w=b[0].getContext("2d"),I=0,g=g.each(function(b){if(!y[b]){var c=this;c.onload=function(){var h=1;if("noresize"!=t){var j=d/this.width,l=e/this.height;"fit"==t&&(h=1>j||1>
l?Math.min(j,l):1);"fill"==t&&(h=Math.min(j,l))}a(c).data("flip.scale",h);y[b]=w.createPattern(c,"no-repeat");I++;I==g.length&&!k&&(k=!0,N())};c.complete&&window.setTimeout(function(){c.onload()},10)}}).get(),x=d,p=e,u=a.browser.msie?b.offset():null,s,Q,J,K;a.browser.msie&&function(){var g=a("<div>").width(d).height(e).css({position:"absolute",cursor:"default",zIndex:1}).appendTo(tmpContainer);7==parseInt(a.browser.version)&&g.css({opacity:1.0E-6,background:"#FFF"});var f=function(){u=b.offset();
return g.css({left:u.left+"px",top:u.top+"px"})};a(window).resize(f);return f()}();setInterval(function(){window.clearInterval(s);Q=(new Date).getTime();J=x;K=p/50;s=window.setInterval(R,0);j+=1;0>j&&(j=g.length-1);j==g.length&&(j=0)},3E3);var R=function(){var a=(new Date).getTime()-Q;700<=a?(window.clearInterval(s),g.push(g.shift()),y.push(y.shift()),x=d,p=e):(x=J-2*d*a/700,p=K+2*e*a/700/3);N()},v=function(b,c){var g=b*d+c,h=-c/b;a.browser.msie&&(g=Math.round(g),h=Math.round(h));w.beginPath();w.moveTo(d,
Math.min(g,e));w.lineTo(d,0);w.lineTo(Math.max(h,0),0);0>h?(w.lineTo(0,Math.min(c,e)),c<e&&w.lineTo((e-c)/b,e),w.lineTo(d,e)):g<e?w.lineTo(d,g):(w.lineTo((e-c)/b,e),w.lineTo(d,e))},N=function(){if(k){a.browser.msie&&w.clearRect(0,0,d,e);w.fillStyle=o;w.fillRect(0,0,d,e);var b=g[0],c=a(b).data("flip.scale");a.browser.msie?(w.fillStyle=y[0],w.fillStyle.width2=w.fillStyle.width*c,w.fillStyle.height2=w.fillStyle.height*c,w.fillRect(0,0,d,e)):w.drawImage(b,(d-b.width*c)/2,(e-b.height*c)/2,b.width*c,b.height*
c);if(p&&x!=d&&(b=(p-2*(x+d))/2,m2=p/(d-x),q2=x*m2,2!=m2)){var h=1,j=0;w.save();r||(j=e,h=-1);w.translate(0,j);w.scale(1,h);var l=(q2-b)/(2-m2),F=2*l+b,s=(2*F+l+4*x-2*p)/5,t=-s/2+F+l/2,c=Math.sqrt(Math.pow(l-s,2)+Math.pow(F-t,2)),u=Math.min(0.5*c,30),G;a.browser.mozilla&&1.9>parseFloat(a.browser.version)?(G=z,G.clearRect(0,0,d,e),G.save(),G.translate(1,0)):G=w;l=G.createLinearGradient(l,F,s,t);l.addColorStop(0,n[0]);l.addColorStop(u/c,n[1]);l.addColorStop(1,n[2]);G.fillStyle=l;G.beginPath();G.moveTo(-b/
2,0);G.quadraticCurveTo((-b/2+x)/2+0.02*x,p/2,x,p);G.quadraticCurveTo((d+x)/2,(2*d+b+p)/2-0.02*(e-p),d,2*d+b);a.browser.mozilla&&1.9>parseFloat(a.browser.version)?(G.save(),G.clip(),G.fillRect(0,0,d,e),G.restore(),w.drawImage(m[0],0,0),G.restore()):G.fill();w.fillStyle=o;v(2,b);w.fill();v(2,b);!a.browser.safari&&!a.browser.opera&&w.restore();b=g[1];c=a(b).data("flip.scale");if(a.browser.msie)w.fillStyle=y[1],w.fillStyle.width2=w.fillStyle.width*c,w.fillStyle.height2=w.fillStyle.height*c,w.fill();
else{w.save();w.clip();if(a.browser.safari||a.browser.opera)w.scale(1,1/h),w.translate(-0.0,-j);w.drawImage(b,(d-b.width*c)/2,(e-b.height*c)/2,b.width*c,b.height*c);w.restore();(a.browser.safari||a.browser.opera)&&w.restore()}}}}};a.fn.jFlip=function(c,d,e,g,h){return this.each(function(){a(this).wrap("<div class='bannerdiv' style='position: absolute;width:"+c+"px;height:"+d+"px;top:"+h+"px;left:"+g+"px'>");var j=a(this).find("img"),k=a(document.createElement("canvas")).attr({width:c,height:d}).css({margin:0,
width:c+"px",height:d+"px"});a(this).css({position:"absolute",left:"-9000px",top:"-9000px",display:"none"}).after(k);new b(a(this).next(),c||300,d||300,j,e)})}})(jQuery);colorTo0x=function(a){var b=a;"#"!=a.substr(0,1)&&"0x"!=a.substr(0,2)&&(b="#"+parseInt(a).toString(16));"0x"==a.substr(0,2)&&(b=a.replace("0x","#"));return b};var Point=function(a,b){return{x:a,y:b}};function debug(a){window.console&&window.console.log&&window.console.log(a)}function colorSplit(a){var b={r:0,g:0,b:0};b.r=parseInt(a.substr(1,2),16);b.g=parseInt(a.substr(3,2),16);b.b=parseInt(a.substr(5,2),16);return b}
function colorAdd(a,b){var c=colorSplit(a);c.r=Math.min(c.r+b,255).toString(16);c.g=Math.min(c.g+b,255).toString(16);c.b=Math.min(c.b+b,255).toString(16);c.r=1>=c.r.length?"0"+c.r:c.r;c.g=1>=c.g.length?"0"+c.g:c.g;c.b=1>=c.b.length?"0"+c.b:c.b;return"#"+c.r+c.g+c.b}
function colorDiv(a,b){var c=colorSplit(a);c.r=Math.max(c.r-b,0).toString(16);c.g=Math.max(c.g-b,0).toString(16);c.b=Math.max(c.b-b,0).toString(16);c.r=1>=c.r.length?"0"+c.r:c.r;c.g=1>=c.g.length?"0"+c.g:c.g;c.b=1>=c.b.length?"0"+c.b:c.b;return"#"+c.r+c.g+c.b}Array.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1});function audioPlayer(a){this.audio=document.createElement("audio");tmpContainer.append(this.audio);this.audio.src=a;var b=this;this.audio.addEventListener("ended",function(){b.audio.currentTime=0},!1)}audioPlayer.prototype.play=function(){null!=this.audio&&this.audio.play()};audioPlayer.prototype.rePlay=function(){null!=this.audio&&(0!=this.audio.currentTime&&(this.audio.currentTime=this.audio.startTime),this.audio.play())};audioPlayer.prototype.preload=function(){this.audio.preload};
audioPlayer.prototype.loop=function(){this.audio.loop};audioPlayer.prototype.autoPlay=function(){this.audio.autoplay};audioPlayer.prototype.src=function(a){this.audio.src=a};audioPlayer.prototype.control=function(){this.audio.controls};function initAudio(a,b,c,d){this.config=$.extend({width:80,height:30,x:20,y:20,src:null,alpha:1},b);this.audio=null;null!=this.config.src&&(this.pw=c,this.ph=d,this.width=this.config.width*this.pw,this.height=this.config.height*this.ph,this.x=this.config.x*this.pw,this.y=this.config.y*this.ph,"./"==this.config.src.substr(0,2)&&(this.config.src="."+this.config.src),this.audio=$("<audio src='"+this.config.src+"' style='width: "+this.width+"px; height: "+this.height+"px; left: "+this.x+"px; top: "+this.y+
"px; position: absolute; opacity: "+this.config.alpha+"' controls ></audio>"),a.append(this.audio))}initAudio.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.audio.css({width:this.width+"px",height:this.height+"px"});this.setPosition()};initAudio.prototype.setPosition=function(){this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;this.audio.css({left:this.x+"px",top:this.y+"px"})};
initAudio.prototype.play=function(){null!=this.audio&&this.audio[0].play()};initAudio.prototype.pause=function(){null!=this.audio&&this.audio[0].pause()};initAudio.prototype.stop=function(){null!=this.audio&&this.audio[0].stop()};initAudio.prototype.getPlayEvt=function(){return this.config.soundPlayTriggerEvt};initAudio.prototype.getStopEvt=function(){return this.config.soundStopTriggerEvt};function initYoutube(a,b,c,d){this.config=$.extend({width:400,height:300,x:0.02,y:0.02,alpha:1,id:null},b);this.youtubeFrame=null;null!=this.config.id&&(this.pw=c,this.ph=d,this.width=this.config.width*this.pw,this.height=this.config.height*this.ph,this.x=this.config.x*this.pw,this.y=this.config.y*this.ph,this.youtubeFrame=$("<iframe class='youtube-player' type='text/html' width='"+this.width+"' height='"+this.height+"' src='http://www.youtube.com/embed/"+this.config.id+"' frameborder='0' style='position: absolute; opacity: "+
this.config.alpha+"; left:"+this.x+"px; top:"+this.y+"px;'></iframe>"),a.append(this.youtubeFrame))}initYoutube.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.youtubeFrame.css({width:this.pw*this.config.width+"px",height:this.ph*this.config.height+"px"});this.setPosition(this.config.x*this.pw,this.config.y*this.ph)};initYoutube.prototype.setPosition=function(a,b){this.youtubeFrame.css({top:b+"px",left:a+"px"})};initYoutube.prototype.getPlayEvt=function(){return this.config.moviePlayTriggerEvt};
initYoutube.prototype.getStopEvt=function(){return this.config.movieStopTriggerEvt};initYoutube.prototype.hide=function(){this.youtubeFrame.css({display:"none"})};initYoutube.prototype.show=function(){this.youtubeFrame.css({display:"block"})};function initVideo(a,b,c,d){this.config=$.extend({width:0.6,height:0.5,x:0.2,y:0.2,src:null,alpha:1},b);this.video=null;null==this.config.src&&".mp4"!=this.config.src.substr(this.config.src.length-4,4)||(this.pw=c,this.ph=d,this.width=this.config.width*this.pw,this.height=this.config.height*this.ph,this.x=this.config.x*this.pw,this.y=this.config.y*this.ph,"flippdf"==appName&&(this.config.src="../"+this.config.src),this.video=$("<video src='"+this.config.src+"' style='width: "+this.width+"px; height:"+
this.height+"px; left: "+this.x+"px; top: "+this.y+"px; position:absolute; opacity: "+this.config.alpha+";' controls='controls' loop='loop'></video>"),a.append(this.video))}initVideo.prototype.onResize=function(a,b){null!=this.video&&(this.pw=a,this.ph=b,this.width=this.config.width*this.pw,this.height=this.config.height*this.ph,this.video.css({width:this.width+"px",height:this.height+"px"}),this.setPosition())};
initVideo.prototype.setPosition=function(){null!=this.video&&(this.x=this.pw*this.config.x,this.y=this.ph*this.config.y,this.video.css({left:this.x+"px",top:this.y+"px"}))};initVideo.prototype.playVideo=function(){null!=this.video&&this.video[0].play()};initVideo.prototype.stopVideo=function(){null!=this.video&&this.video[0].stop()};initVideo.prototype.pauseVideo=function(){null!=this.video&&this.video[0].pause()};initVideo.prototype.getPlayEvt=function(){return this.config.moviePlayTriggerEvt};
initVideo.prototype.getStopEvt=function(){return this.config.soundStopTriggerEvt};function initButton(a,b,c,d){this.config=$.extend({width:0.2,height:0.2,x:0.2,y:0.2,alpha:1,src:null},b);this.pw=c;this.ph=d;this.width=c*this.config.width;this.height=d*this.config.height;this.button=null;var b=[],e=this,b="button_watermark01.swf,button_watermark02.swf,button_watermark03.swf,button_watermark04.swf,button_watermark05.swf,button_watermark06.swf,button_watermark07.swf,button_watermark08.swf,button_watermark09.swf,button_glossy01.swf,button_glossy02.swf,button_glossy03.swf,button_glossy04.swf,button_glossy05.swf,button_glossy06.swf,button_glossy07.swf,button_glossy08.swf,button_glossy09.swf,button_glossy10.swf,button_glossy11.swf,button_glossy12.swf,button_glossy13.swf,button_glossy14.swf,button_glossy15.swf,button_glossy16.swf,button_glossy17.swf,button_push01.swf,button_push02.swf,button_push03.swf,button_push04.swf,button_push05.swf,button_push06.swf,button_lineLight01.swf,button_lineLight02.swf,button_lineLight03.swf,button_lineLight04.swf,button_lineLight05.swf,button_star01.swf,button_star02.swf,button_star03.swf,button_star04.swf,button_star05.swf,button_glitter01.swf,button_glitter02.swf,button_glitter03.swf,button_glitter04.swf,button_glitter05.swf,button_glitter06.swf,button_shadow01.swf,button_shadow02.swf,button_shadow03.swf,button_shadow04.swf,button_shadow05.swf,button_shadow06.swf,button_bottomLight01.swf,button_bottomLight02.swf,button_bottomLight03.swf,button_bottomLight04.swf,button_bottomLight05.swf,button_bottomLight06.swf,button_bottomLight07.swf,button_bottomLight08.swf,button_bottomLight09.swf,button_bottomLight10.swf,button_other01.swf,button_other02.swf,button_other03.swf".split(",");
null==this.config.src||"null"==this.config.src?this.button=$("<button type = 'button'></button>"):("flippdf"==appName&&(this.config.src="."+this.config.src),c=this.config.src.substring(this.config.src.lastIndexOf("/")+1,this.config.src.length),this.swfButton=0<=b.indexOf(c))?(this.config.Format.color=colorTo0x(this.config.Format.color),this.button=$("<div></div>"),this.buttonEvt=$("<div></div>"),this.buttonCaption=new label(this.config.buttonCaption,this.button),this.button.css({"-webkit-border-radius":"8px",
"-moz-border-radius":"5px","border-radius":"8px","background-image":getBrowserPre()+"linear-gradient(top,rgba(185,185,185,1) 0%, rgba(122,122,122,1) 45%, rgba(80, 80, 80, 1) 46%, rgba(53,53,53,1) 100%)","-webkit-box-shadow":"0 0 10px rgba(40, 0, 0, 0.7)","-moz-box-shadow":"0 0 10px rgba(40, 0, 0, 0.7)","box-shadow":"0 0 10px rgba(40, 0, 0, 0.7)"}),this.buttonEvt.css({"-webkit-border-radius":"8px","-moz-border-radius":"5px","border-radius":"8px","background-color":"#333333",opacity:0.2,display:"none",
width:this.width+"px",height:this.height+"px"}),this.buttonCaption.setFont(2*this.config.HRate*this.height/3,this.config.Format.color,this.config.Format.font),this.buttonCaption.setLabelPosition(this.buttonCaption.getWidth()>this.width?0:(this.width-this.buttonCaption.getWidth())/2,this.config.captionY*this.height/100),this.button.append(this.buttonEvt),this.button.bind(_event._down,function(){e.buttonEvt.css({display:"block"})}),this.button.bind(_event._end,function(){e.buttonEvt.css({display:"none"})}),
this.button.bind("mouseleave",function(){e.buttonEvt.css({display:"none"})})):".swf"==this.config.src.substr(this.config.src.length-4,4)?this.button=$("<div></div>"):(this.button=$("<img />"),this.button.attr({src:this.config.src}));this.button.css({position:"absolute",width:this.width+"px",height:this.height+"px",left:this.pw*this.config.x+"px",top:this.ph*this.config.y+"px",opacity:this.config.alpha});a.append(this.button);this.father=a;this.initEvt()}
initButton.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.width=this.config.width*a;this.height=this.config.height*b;this.button.css({width:this.width+"px",height:this.height+"px"});this.setPosition(this.config.x*a,this.config.y*b);if(null!=this.form)this.form.onResize(bookContainer.width(),bookContainer.height());if(null!=this.slide)this.slide.onResize(bookContainer.width(),bookContainer.height());this.swfButton&&(this.buttonCaption.setFont(2*this.config.HRate*this.height/3,this.config.Format.color,
this.config.Format.font),this.buttonCaption.setLabelPosition(this.buttonCaption.getWidth()>this.width?0:(this.width-this.buttonCaption.getWidth())/2,this.config.captionY*this.height/100),this.buttonEvt.css({width:this.width+"px",height:this.height+"px"}))};initButton.prototype.setPosition=function(a,b){this.button.css({left:a+"px",top:b+"px"})};
initButton.prototype.initEvt=function(){this.slide=this.form=null;if(void 0!=this.config.action){var a=this;this.flag=0;this.linkURL=null;try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(b){}var c;null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);try{c=this.config.action.triggerEventType}catch(d){c=null}this.button.bind(_event._down,function(){c==PageEditor.TriggerEventType.MouseDown&&
actionEvent.call(a);browserType=="msie"?event.cancelBubble=true:event.stopPropagation()});this.button.bind("mouseover",function(){c==PageEditor.TriggerEventType.MouseOver&&actionEvent.call(a)});this.button.bind(isTouch?_event._end:"mouseout",function(){c==PageEditor.TriggerEventType.MouseOut&&actionEvent.call(a)})}};function initImage(a,b,c,d){this.config=$.extend({width:0.2,height:0.2,x:0.2,y:0.2,alpha:1,src:null},b);this.img=$("<img>");null!=this.config.src&&(this.pw=c,this.ph=d,this.width=this.config.width*c,this.height=this.config.height*d,"flippdf"==appName&&(this.config.src="."+this.config.src),this.img.attr({src:this.config.src}),this.img.css({position:"absolute",width:this.width+"px",height:this.height+"px",left:this.pw*this.config.x+"px",top:this.ph*this.config.y+"px",opacity:this.config.alpha}),a.append(this.img),
this.father=a,this.initEvt())}
initImage.prototype.initEvt=function(){this.slide=this.form=null;if(void 0!=this.config.action){var a=this;this.flag=0;this.linkURL=null;try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(b){}var c;null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);try{c=this.config.action.triggerEventType}catch(d){c=null}this.img.bind(_event._down,function(){c==PageEditor.TriggerEventType.MouseDown&&
actionEvent.call(a);browserType=="msie"?event.cancelBubble=true:event.stopPropagation()});this.img.bind("mouseover",function(){c==PageEditor.TriggerEventType.MouseOver&&actionEvent.call(a)});this.img.bind(isTouch?_event._end:"mouseout",function(){c==PageEditor.TriggerEventType.MouseOut&&actionEvent.call(a)})}};
initImage.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.width=a*this.config.width;this.height=b*this.config.height;this.img.css({width:this.width+"px",height:this.height+"px"});this.setPosition(this.config.x*a,this.config.y*b);if(null!=this.form)this.form.onResize(bookContainer.width(),bookContainer.height());if(null!=this.slide)this.slide.onResize(bookContainer.width(),bookContainer.height())};initImage.prototype.setPosition=function(a,b){this.img.css({left:a+"px",top:b+"px"})};function initRe(a,b,c,d,e){this.config=$.extend({width:200,height:20,x:0,y:0,alpha:1,fillStyle:null,color:null,ColorA:null,ColorB:null,angle:90,spalpha:1,action:null,borderWidth:1,borderColor:null,borderAlpha:1,sh:"false",sx:4,sy:4,se:2,sr:null},b);this.pw=c;this.ph=d;this.father=a;this.color=colorTo0x(this.config.color);this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;this.id="re"+e;this.angle=this.config.angle;
this.A=colorTo0x(this.config.ColorA);this.B=colorTo0x(this.config.ColorB);this.Re="false"!=this.config.sh?$("<div id="+this.id+" style='overflow: hidden;position:absolute;top:"+this.y+"px;left:"+this.x+"px;border:"+this.config.borderWidth+"px solid "+colorTo0x(this.config.borderColor)+";background:"+this.color+";height:"+this.height+"px;width:"+this.width+"px;box-shadow:"+this.config.sx+"px "+this.config.sy+"px "+this.config.se+"px "+colorTo0x(this.config.sr)+";opacity:"+this.config.spalpha+"'></div>"):
$("<div id="+this.id+" style='overflow: hidden;position:absolute;top:"+this.y+"px;left:"+this.x+"px;border:"+this.config.borderWidth+"px solid "+colorTo0x(this.config.borderColor)+";background:"+this.color+";height:"+this.height+"px;width:"+this.width+"px;opacity:"+this.config.spalpha+"'></div>");"gradient"==this.config.fillStyle&&this.Re.css({background:"-webkit-repeating-linear-gradient("+this.angle+"deg,"+this.A+","+this.B+" 100%)"});"none"==this.config.fillStyle&&this.Re.css({background:""});
this.initEvent();a.append(this.Re)}
initRe.prototype.initEvent=function(){var a=this;this.flag=0;this.linkURL=this.slide=this.form=null;if(null!=a.config.action){try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(b){}var c;null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);try{c=this.config.action.triggerEventType}catch(d){c=null}this.Re.bind(_event._down,function(){c==PageEditor.TriggerEventType.MouseDown&&actionEvent.call(a);
browserType=="msie"?event.cancelBubble=true:event.stopPropagation()});this.Re.bind("mouseover",function(){c==PageEditor.TriggerEventType.MouseOver&&actionEvent.call(a)});this.Re.bind(isTouch?_event._end:"mouseout",function(){c==PageEditor.TriggerEventType.MouseOut&&actionEvent.call(a)})}};
initRe.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.Re.css({width:this.width+"px",height:this.height+"px"});this.setPosition();if(null!=this.form)this.form.onResize(bookContainer.width(),bookContainer.height());if(null!=this.slide)this.slide.onResize(bookContainer.width(),bookContainer.height())};
initRe.prototype.setPosition=function(){this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;this.Re.css({left:this.x+"px",top:this.y+"px"})};function initRound(a,b,c,d,e){this.config=$.extend({width:200,height:20,x:0,y:0,alpha:1,fillStyle:null,color:null,ColorA:null,ColorB:null,angle:"false",spalpha:1,action:null,borderWidth:1,borderColor:null,borderAlpha:1,sh:"false",sx:4,sy:4,se:2,sr:null},b);this.pw=c;this.ph=d;this.color=colorTo0x(this.config.color);this.father=a;this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;this.id="round"+e;this.x1=this.x-10;
this.y1=this.y-10;0>this.x-10&&(this.x1=0);0>this.y-10&&(this.y1=0);this.rounds=$("<canvas id="+this.id+" width="+(this.width+20)+" height="+(this.height+20)+" style='position: absolute;top:"+this.y1+"px;left:"+this.x1+"px'></canvas>");this.father=a;this.initEvent();a.append(this.rounds);this.roundcan(this.x,this.y,this.width,this.height,this.color,this.config.fillStyle,this.config.ColorA,this.config.ColorB,this.config.alpha,this.config.borderWidth,this.config.spalpha,this.config.borderColor,this.config.borderAlpha,
this.config.sx,this.config.sy,this.config.se,this.config.sr,this.config.sh)}
initRound.prototype.initEvent=function(){var a=this;this.flag=0;this.slide=this.form=null;this.linkURL;if(null!=a.config.action){try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(b){}var c;null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);try{c=this.config.action.triggerEventType}catch(d){c=null}this.rounds.bind(_event._down,function(){c==PageEditor.TriggerEventType.MouseDown&&
actionEvent.call(a);browserType=="msie"?event.cancelBubble=true:event.stopPropagation()});this.rounds.bind("mouseover",function(){c==PageEditor.TriggerEventType.MouseOver&&actionEvent.call(a)});this.rounds.bind(isTouch?_event._end:"mouseout",function(){c==PageEditor.TriggerEventType.MouseOut&&actionEvent.call(a)})}};
initRound.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.rounds.css({width:this.width+20+"px",height:this.height+20+"px"});this.setPosition();if(null!=this.form)this.form.onResize(bookContainer.width(),bookContainer.height());if(null!=this.slide)this.slide.onResize(bookContainer.width(),bookContainer.height())};
initRound.prototype.setPosition=function(){this.x=this.config.x*this.pw-10;this.y=this.config.y*this.ph-10;this.rounds.css({left:this.x+"px",top:this.y+"px"})};
initRound.prototype.roundcan=function(a,b,c,d,e,g,h,j,k,o,r,n,t,y,m,z,w,I){k=b=0;a=this.rounds[0].getContext("2d");t=[c/2+10,d/2+10];b=c/2;k=d/2;a.beginPath();a.strokeStyle=colorTo0x(n);a.lineWidth=o;a.globalAlpha=r;"false"!=I&&(a.shadowOffsetX=y,a.shadowOffsetY=m,a.shadowBlur=z,a.shadowColor=colorTo0x(w));DrawEllipse(a,t,b,k);"gradient"==g&&(c=a.createLinearGradient(5,k,b,k),c.addColorStop(0,colorTo0x(h)),c.addColorStop(1,colorTo0x(j)),a.fillStyle=c,a.fill());"none"!=g&&(a.fillStyle=e,a.fill());
0!=o&&a.stroke();a.closePath()};function DrawEllipse(a,b,c,d){with(a){var a=b[0]+c,e=b[1];moveTo(a,e);for(var g=0;360>=g;g++)e=g*Math.PI/180,a=b[0]+c*Math.cos(e),e=b[1]-d*Math.sin(e),lineTo(a,e)}};function initText(a,b,c,d,e){this.config=$.extend({width:200,height:20,x:0,y:0,alpha:1,textStr:null,lineH:20,fontName:null,fontSize:12,color:null,tbold:"false",italic:"false",bgalpha:1,action:null,fillBg:"false",bgcolor:null,sh:"false",sx:4,sy:4,se:2,sr:null},b);this.pw=c;this.ph=d;this.color=colorTo0x(this.config.color);this.father=a;this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;this.id="text"+e;this.text="false"!=
this.config.sh?$("<div id="+this.id+" style='overflow: hidden;position:absolute;background:"+colorTo0x(this.config.bgcolor)+";left:"+this.x+"px; top:"+this.y+"px;height:"+this.height+"px;width:"+this.width+"px;box-shadow:"+this.config.sx+"px "+this.config.sy+"px "+this.config.se+"px "+colorTo0x(this.config.sr)+";opacity:"+this.config.bgalpha+"'><div style='word-break: break-word;font-family:"+this.config.fontName+";font-size:"+this.config.fontSize+"px;color:"+this.color+";'>"+this.config.textStr+
"</div></div>"):$("<div id="+this.id+" style='overflow: hidden;position:absolute;background:"+colorTo0x(this.config.bgcolor)+";left:"+this.x+"px; top:"+this.y+"px;height:"+this.height+"px;width:"+this.width+"px;opacity:"+this.config.bgalpha+"'><div style='word-break: break-word;font-family:"+this.config.fontName+";font-size:"+this.config.fontSize+"px;color:"+this.color+";'>"+this.config.textStr+"</div></div>");"false"==this.config.fillBg&&this.text.css({background:""});"false"!=this.config.tbold&&
this.text.css({"font-weight":"bold"});"false"!=this.config.italic&&this.text.css({"font-style":"italic"});this.father=a;this.initEvent();a.append(this.text)}
initText.prototype.initEvent=function(){var a=this;this.flag=0;this.linkURL=this.slide=this.form=null;if(null!=a.config.action){try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(b){}var c;null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);try{c=this.config.action.triggerEventType}catch(d){c=null}this.text.bind(_event._down,function(){c==PageEditor.TriggerEventType.MouseDown&&
actionEvent.call(a);browserType=="msie"?event.cancelBubble=true:event.stopPropagation()});this.text.bind("mouseover",function(){c==PageEditor.TriggerEventType.MouseOver&&actionEvent.call(a);browserType=="msie"?event.cancelBubble=true:event.stopPropagation()});this.text.bind(isTouch?_event._end:"mouseout",function(){c==PageEditor.TriggerEventType.MouseOut&&actionEvent.call(a)})}};
initText.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.text.css({width:this.width+"px",height:this.height+"px"});this.setPosition();if(null!=this.form)this.form.onResize(bookContainer.width(),bookContainer.height());if(null!=this.slide)this.slide.onResize(bookContainer.width(),bookContainer.height());this.fontSize=this.config.lineH*this.ph;this.text.find("div").css("font-size",this.fontSize+"px")};
initText.prototype.setPosition=function(){this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;this.text.css({left:this.x+"px",top:this.y+"px"})};function initLine(a,b,c,d,e){this.config=$.extend({StartX:0,StartY:0,EndX:100,EndY:100,width:200,height:20,x:0,y:0,alpha:1,lineAlpha:1,lineWidth:1,lineType:null,dotWidth:3,color:null,sh:"false",sx:4,sy:4,se:2,sr:null},b);this.pw=c;this.ph=d;this.color=colorTo0x(this.config.color);this.bstyle="Solid line"==this.config.lineType?"solid":"dashed";this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;this.id="line"+e;this.x1=
this.x-10;this.y1=this.y-10;0>this.x-10&&(this.x1=0);0>this.y-10&&(this.y1=0);this.line=$("<canvas id="+this.id+" width="+(this.width+20)+" height="+(this.height+20)+" style='position: absolute;top:"+this.y1+"px;left:"+this.x1+"px'></canvas>");a.append(this.line);this.linecan(this.x,this.y,this.config.StartX,this.config.StartY,this.config.EndX,this.config.EndY,this.width,this.height,this.config.lineWidth,this.config.dotWidth,this.color,this.config.lineAlpha,this.bstyle,this.config.sx,this.config.sy,
this.config.se,this.config.sr,this.config.sh)}initLine.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.line.css({width:this.width+20+"px",height:this.height+20+"px"});this.setPosition()};initLine.prototype.setPosition=function(){this.x=this.config.x*this.pw-10;this.y=this.config.y*this.ph-10;this.line.css({left:this.x+"px",top:this.y+"px"})};
initLine.prototype.linecan=function(a,b,c,d,e,g,h,j,k,o,r,n,t,y,m,z,w,I){var x=b=a=0,p=0,u=this.line[0].getContext("2d"),o=parseFloat(o);0==c&&0==d?(p=x=10,a=h+10,b=j+10):0==c&&0!=d?(x=10,p=10+j,a=h+10,b=10):0!=c&&0==d?(x=10+h,a=p=10,b=j+10):(x=10+h,p=10+j,b=a=10);u.moveTo(x,p);u.lineWidth=k;u.globalAlpha=n;u.strokeStyle=r;"false"!=I&&(u.shadowOffsetX=y,u.shadowOffsetY=m,u.shadowBlur=z,u.shadowColor=colorTo0x(w));if("solid"==t)u.lineTo(a,b);else{h=0;r=o+2;j=x;k=p;num=0==g-d?e>c?(a-x)/r:(x-a)/r:0==
e-c?g>d?(b-p)/r:(p-b)/r:d<g&&c<e?a-x>b-p?(a-x)/r:(b-p)/r:d>g&&c<e?a-x>p-b?(a-x)/r:(p-b)/r:d<g&&c>e?x-a>b-p?(x-a)/r:(b-p)/r:x-a>p-b?(x-b)/r:(p-b)/r;r=num-1;for(i=0;i<r;i++)(u.moveTo(j,k),0==g-d?j=e>c?j+o:j-o:0==e-c?k=g>d?k+o:k-o:d<g&&c<e?a-x>b-p?(h=Math.abs((b-p)/(a-x)),j+=o,k+=o*h):(h=Math.abs((a-x)/(b-p)),j+=o*h,k+=o):d>g&&c<e?a-x>p-b?(h=Math.abs((b-p)/(a-x)),j+=o,k-=o*h):(h=Math.abs((a-x)/(b-p)),j+=o*h,k-=o):d<g&&c>e?x-a>b-p?(h=Math.abs((b-p)/(a-x)),j-=o,k+=o*h):(h=Math.abs((a-x)/(b-p)),j-=o*h,
k+=o):x-a>p-b?(h=Math.abs((b-p)/(a-x)),j-=o,k-=o*h):(h=Math.abs((a-x)/(b-p)),j-=o*h,k-=o),u.lineTo(j,k),0==g-d)?j=e>c?j+2:j-2:0==e-c?k=g>d?k+2:k-2:d<g&&c<e?a-x>b-p?(j+=2,k+=2*h):(j+=2*h,k+=2):d>g&&c<e?a-x>p-b?(j+=2,k-=2*h):(j+=2*h,k-=2):d<g&&c>e?x-a>b-p?(j-=2,k+=2*h):(j-=2*h,k+=2):x-a>p-b?(j-=2,k-=2*h):(j-=2*h,k-=2)}u.stroke()};function initArrow(a,b,c,d,e){this.config=$.extend({StartX:0,StartY:0,EndX:100,EndY:100,width:200,height:20,x:0,y:0,alpha:1,lineWidth:1,lineType:null,dotWidth:3,color:null,arrowType:null,sh:"false",sx:4,sy:4,se:2,sr:null},b);this.pw=c;this.ph=d;this.color=colorTo0x(this.config.color);this.bstyle="Solid line"==this.config.lineType?"solid":"dashed";this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;this.id="arrow"+e;
this.x1=this.x-10;this.y1=this.y-10;0>this.x-10&&(this.x1=0);0>this.y-10&&(this.y1=0);this.arrow=$("<canvas id="+this.id+" width="+(this.width+20)+" height="+(this.height+20)+" style='position: absolute;top:"+this.y1+"px;left:"+this.x1+"px'></canvas>");a.append(this.arrow);this.arrowcan(this.x,this.y,this.config.StartX,this.config.StartY,this.config.EndX,this.config.EndY,this.width,this.height,this.config.lineWidth,this.config.dotWidth,this.color,this.config.alpha,this.bstyle,this.config.sx,this.config.sy,
this.config.se,this.config.sr,this.config.sh)}initArrow.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.arrow.css({width:this.width+20+"px",height:this.height+20+"px"});this.setPosition()};initArrow.prototype.setPosition=function(){this.x=this.config.x*this.pw-10;this.y=this.config.y*this.ph-10;this.arrow.css({left:this.x+"px",top:this.y+"px"})};
initArrow.prototype.arrowcan=function(a,b,c,d,e,g,h,j,k,o,r,n,t,y,m,z,w,I){var x=b=a=0,p=0,u=0,s=this.arrow[0].getContext("2d"),o=parseFloat(o);s.clearRect(0,0,this.pw,this.ph);s.save();s.lineWidth=k;s.globalAlpha=n;s.strokeStyle=r;"false"!=I&&(s.shadowOffsetX=y,s.shadowOffsetY=m,s.shadowBlur=z,s.shadowColor=colorTo0x(w));0==c&&0==d?(u=p=10,a=h+10,b=j+10):0==c&&0!=d?(p=10,u=10+j,a=h+10,b=10):0!=c&&0==d?(p=10+h,a=u=10,b=j+10):(p=10+h,u=10+j,b=a=10);s.translate(0,0);s.beginPath();s.moveTo(p,u);"Double Arrow"==
this.config.arrowType&&(0==g-d?e>c?s.moveTo(p+5,u):s.moveTo(p-5,u):0==e-c&&(g>d?s.moveTo(p,u+5):s.moveTo(p,u-5)));if("solid"==t)0==g-d?e>c?s.lineTo(a-5,b):s.lineTo(a+5,b):0==e-c?g>d?s.lineTo(a,b-5):s.lineTo(a,b+5):s.lineTo(a,b);else{h=0;t=o+2;j=p;n=u;t=(0==g-d?e>c?(a-p)/t:(p-a)/t:0==e-c?g>d?(b-u)/t:(u-b)/t:d<g&&c<e?a-p>b-u?(a-p)/t:(b-u)/t:d>g&&c<e?a-p>u-b?(a-p)/t:(u-b)/t:d<g&&c>e?p-a>b-u?(p-a)/t:(b-u)/t:p-a>u-b?(p-b)/t:(u-b)/t)-1;for(i=0;i<t;i++)(s.moveTo(j,n),0==g-d?j=e>c?j+o:j-o:0==e-c?n=g>d?n+
o:n-o:d<g&&c<e?a-p>b-u?(h=Math.abs((b-u)/(a-p)),j+=o,n+=o*h):(h=Math.abs((a-p)/(b-u)),j+=o*h,n+=o):d>g&&c<e?a-p>u-b?(h=Math.abs((b-u)/(a-p)),j+=o,n-=o*h):(h=Math.abs((a-p)/(b-u)),j+=o*h,n-=o):d<g&&c>e?p-a>b-u?(h=Math.abs((b-u)/(a-p)),j-=o,n+=o*h):(h=Math.abs((a-p)/(b-u)),j-=o*h,n+=o):p-a>u-b?(h=Math.abs((b-u)/(a-p)),j-=o,n-=o*h):(h=Math.abs((a-p)/(b-u)),j-=o*h,n-=o),s.lineTo(j,n),0==g-d)?j=e>c?j+2:j-2:0==e-c?n=g>d?n+2:n-2:d<g&&c<e?a-p>b-u?(j+=2,n+=2*h):(j+=2*h,n+=2):d>g&&c<e?a-p>u-b?(j+=2,n-=2*h):
(j+=2*h,n-=2):d<g&&c>e?p-a>b-u?(j-=2,n+=2*h):(j-=2*h,n+=2):p-a>u-b?(j-=2,n-=2*h):(j-=2*h,n-=2)}s.fillStyle=r;s.stroke();s.save();x=2<1*k?15:10;"Double Arrow"==this.config.arrowType&&(s.moveTo(p,u),"Double Arrow"==this.config.arrowType&&(0==g-d?e>c?s.moveTo(p-1,u):s.moveTo(p+1,u):0==e-c&&(g>d?s.moveTo(p,u-1):s.moveTo(p,u+1))),s.translate(p,u),0<=b-u?s.rotate(4.7-Math.atan((a-p)/(b-u))):s.rotate(4.7-(Math.PI+Math.atan((a-p)/(b-u)))),s.lineTo(-x,x-5),s.lineTo(-(x-5),0),s.lineTo(-x,-(x-5)),s.lineTo(0,
0),s.fill(),s.restore());s.moveTo(a,b);s.translate(a,b);0<=b-u?s.rotate(1.5-Math.atan((a-p)/(b-u))):s.rotate(1.5-(Math.PI+Math.atan((a-p)/(b-u))));s.lineTo(-x,x-5);s.lineTo(-(x-5),0);s.lineTo(-x,-(x-5));s.lineTo(0,0);s.fill();s.restore()};function initAText(a,b,c,d,e){this.config=$.extend({width:200,height:20,x:0,y:0,alpha:1,textStr:null,fontName:null,fontSize:12,color:null,tbold:"false",italic:"false",align:"left",action:null,repeat:"false",moveSpeed:1,sh:"false",sx:4,sy:4,se:2,sr:null},b);this.pw=c;this.ph=d;this.color=colorTo0x(this.config.color);this.father=a;this.speed=12E3*(1/this.config.moveSpeed);this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;
this.id="text"+e;this.scrollid="scroll"+this.id;this.atext="false"!=this.config.sh?$("<div id="+this.id+" style='overflow: hidden;position:absolute;left:"+this.x+"px; top:"+this.y+"px;height:"+this.height+"px;width:"+this.width+"px;box-shadow:"+this.config.sx+"px "+this.config.sy+"px "+this.config.se+"px "+colorTo0x(this.config.sr)+";opacity:"+this.config.alpha+"'></div>"):$("<div id="+this.id+" style='overflow: hidden;position:absolute;left:"+this.x+"px; top:"+this.y+"px;height:"+this.height+"px;width:"+
this.width+"px;opacity:"+this.config.alpha+"'></div>");this.atext2=$("<div id="+this.scrollid+" style='word-break: break-word;font-family:"+this.config.fontName+";width:100%;font-size:"+this.config.fontSize+"px;color:"+this.color+";text-align:"+this.config.align+";'>"+this.config.textStr+"</div>");"false"!=this.config.tbold&&this.atext.css({"font-weight":"bold"});"false"!=this.config.italic&&this.atext.css({"font-style":"italic"});this.father=a;this.initEvent();a.append(this.atext);this.atext.append(this.atext2);
this.initScroll()}initAText.prototype.initScroll=function(){this._wrap=this.atext2;this.initScrollText()};initAText.prototype.initScrollText=function(){var a=this,b=a._wrap,c=b.height();b.animate({marginTop:-c+"px"},a.speed,function(){"true"==a.config.repeat?(b.css("marginTop",a.height),a.initScrollText()):b.css("marginTop",0)})};
initAText.prototype.initEvent=function(){var a=this;this.flag=0;this.linkURL;if(null!=a.config.action){try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(b){}var c;null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);try{c=this.config.action.triggerEventType}catch(d){c=null}this.atext.bind(_event._down,function(){c==PageEditor.TriggerEventType.MouseDown&&actionEvent.call(a);
browserType=="msie"?event.cancelBubble=true:event.stopPropagation()});this.atext.bind(_event._move,function(){c==PageEditor.TriggerEventType.MouseOver&&actionEvent.call(a)});this.atext.bind(_event._end,function(){c==PageEditor.TriggerEventType.MouseOut&&actionEvent.call(a)})}};initAText.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.atext.css({width:this.width+"px",height:this.height+"px"});this.setPosition()};
initAText.prototype.setPosition=function(){this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;this.atext.css({left:this.x+"px",top:this.y+"px"})};function initFlashShow(a,b,c,d){this.pw=c;this.ph=d;this.config=$.extend({width:0.2,height:0.2,x:0.2,y:0.2,photo:null,repeatPlay:!0,customSize:!1},b);null!=this.config.photo&&(this.showingA=!0,this.showingIndex=1,this.background=$("<div></div>"),this.totalImage=this.config.photo.photos.length,this.moveTo=1,this.width=this.pw*this.config.width,this.height=this.ph*this.config.height,this.background.css({width:this.width+"px",height:this.height+"px",left:this.config.x*this.pw+"px",top:this.config.y*
this.ph+"px",position:"absolute",overflow:"hidden"}),this.photoA=new animateImage(this.background,this.config.photo,this.width,this.height,this.config.repeatPlay,this.config.customSize,this.config.photo.width,this.config.photo.width),this.photoB=new animateImage(this.background,this.config.photo,this.width,this.height,this.config.repeatPlay,this.config.customSize,this.config.photo.width,this.config.photo.width),a.append(this.background),this.photoB.fillImage(2),this.photoA.fillImage(1),this.initChangeImageEvent(!0))}
initFlashShow.prototype={onResize:function(a,b){this.pw=a;this.ph=b;this.width=this.pw*this.config.width;this.height=this.ph*this.config.height;this.background.css({width:this.width+"px",height:this.height+"px"});this.photoA.onResize(a,b);this.photoB.onResize(a,b);this.setPosition()},setPosition:function(){this.background.css({left:this.pw*this.config.x+"px",top:this.ph*this.config.y+"px"})},initChangeImageEvent:function(a){var b=this,c=this.photoA.getImage(),d=this.photoB.getImage(),e,g;a||(c=this.photoB.getImage(),
d=this.photoA.getImage());switch(this.moveTo){case 1:e=g=1;break;case 2:e=g=-1;break;case 3:g=1;e=-1;break;case 4:g=-1,e=1}this.moveTo=4==this.moveTo?1:this.moveTo+1;var h=c.position().left+66*g,j=c.position().top+66*e,k=c.position().left+77*g,o=c.position().top+77*e;c.animate({left:h,top:j},{queue:!1,duration:3E3,complete:function(){b.showingIndex++;if(!(b.showingInde>b.totalImage)||b.config.repeatPlay){if(b.showingIndex>b.totalImage)b.showingIndex=0;c.animate({opacity:0,left:k,top:o},500,function(){a?
b.photoA.fillImage(b.showingIndex+1):b.photoB.fillImage(b.showingIndex+1);c.css({"z-index":0});d.css({"z-index":1})});b.initChangeImageEvent(!a)}}}).animate({opacity:1},500)}};function animateImage(a,b,c,d,e,g,h,j){this.img=$("<img />");this.imgIndex=-1;this.imageArr=b;this.bw=c;this.bh=d;this.repeat=e;a.append(this.img);this.img.css({position:"absolute"});g&&void 0!=h&&void 0!=j&&this.img.css({width:h+"px",height:j+"px"})}
animateImage.prototype.fillImage=function(a){if(this.imgIndex==a)this.img.css({left:(this.bw-this.img[0].width)/2+"px",top:(this.bh-this.img[0].height)/2+"px"});else if(!(a>this.imageArr.photos.length)||this.repeat){a>this.imageArr.photos.length&&(a=1);this.imgIndex==a;var b=this;this.img.attr("src",b.getImageDiv(a));this.img.load(function(){b.img.css({left:(b.bw-this.width)/2+"px",top:(b.bh-this.height)/2+"px"})})}};animateImage.prototype.getImageDiv=function(a){return this.imageArr.photos[a-1].photo};
animateImage.prototype.setZIndex=function(a){this.img.css("z-index",a)};animateImage.prototype.onResize=function(a,b){this.bw=a;this.bh=b;this.img.css({left:(this.bw-this.img[0].width)/2+"px",top:(this.bh-this.img[0].height)/2+"px"})};animateImage.prototype.setPosition=function(a,b){this.img.css({left:a+"px",top:b+"px"})};animateImage.prototype.animate=function(){};animateImage.prototype.getImage=function(){return this.img};function initCallout(a,b,c,d,e){this.config=$.extend({width:200,height:20,x:0,y:0,alpha:1,textStr:null,lineH:20,fontName:null,fontSize:12,color:null,tbold:"false",italic:"false",bgalpha:1,action:null,fillBg:"false",bgcolor:null,direct:"Down",cx1:0,cy1:0,cx2:0,cy2:0,pointx:0,pointy:0,cornerRadiut:5,borderWidth:3,borderColor:null,bordreAlpha:1,sh:"false",sx:4,sy:4,se:2,sr:null},b);this.pw=c;this.ph=d;this.father=a;this.color=colorTo0x(this.config.color);this.width=this.config.width*this.pw;this.height=
this.config.height*this.ph;this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;this.cx1=this.config.cx1*this.width;this.cy1=this.config.cy1*this.height;this.cx2=this.config.cx2*this.width;this.cy2=this.config.cy2*this.height;this.pointx=this.config.pointx*this.width;this.pointy=this.config.pointy*this.height;this.id="callout"+e;this.cl=this.ct=this.hl=this.wl=this.canl=this.cant=this.canh=this.canw=0;switch(this.config.direct){case "Down":if(0>this.pointx){this.canw=this.width-this.pointx+20;
this.canh=this.pointy+20;this.cant=this.y-10;this.canl=this.x-(this.canw-this.width-10);break}this.canw=this.pointx>this.width?this.pointx+20:this.width+20;this.canh=this.pointy+20;this.cant=this.y-10;this.canl=this.x-10;break;case "left":if(0>this.pointy){this.canw=this.width-this.pointx+20;this.canh=this.height-this.pointy+20;this.cant=this.y-(this.canh-this.height-10);this.canl=this.x-(this.canw-this.width-10);break}this.pointy>this.height?(this.canw=this.width-this.pointx+20,this.canh=this.pointy+
20):(this.canw=this.width-this.pointx+20,this.canh=this.height+20);this.cant=this.y-10;this.canl=this.x-(this.canw-this.width-10);break;case "Up":if(0>this.pointx){this.canw=this.width-this.pointx+20;this.canh=this.height-this.pointy+20;this.cant=this.y-(this.canh-this.height-10);this.canl=this.x-(this.canw-this.width-10);break}this.canw=this.pointx>this.width?this.pointx+20:this.width+20;this.canh=this.height-this.pointy+20;this.cant=this.y-(this.canh-this.height-10);this.canl=this.x-10;break;case "Right":if(0>
this.pointy){this.canw=this.pointx+20;this.canh=this.height-this.pointy+20;this.cant=this.y-(this.canh-this.height-10);this.canl=this.x-10;break}this.pointy>this.height?(this.canw=this.pointx+20,this.canh=this.pointy+20):(this.canw=this.pointx+20,this.canh=this.height+20);this.cant=this.y-10;this.canl=this.x-10}this.wl=this.canw/this.pw;this.hl=this.canh/this.ph;this.ct=this.cant/this.ph;this.cl=this.canl/this.pw;this.callout=$("<canvas id="+this.id+" width="+this.canw+" height="+this.canh+" style='position: absolute;top:"+
this.cant+"px;left:"+this.canl+"px'></canvas>");a.append(this.callout);this.calloutDown();this.father=a;this.initEvent()}
initCallout.prototype.calloutDown=function(){var a=[],b=[],c,d,e=this.callout[0].getContext("2d"),g,h,j,k,o,r,n,t,y,m,z,w;switch(this.config.direct){case "Down":if(0>this.pointx){g=this.canw-this.width-10;h=10;c=this.canw-10;d=10;j=this.canw-10;k=this.height+10;o=this.canw-(this.width-this.cx2)-10;r=this.height+10;n=10;t=this.pointy+10;y=this.canw-(this.width-this.cx1)-10;m=this.height+10;z=this.canw-(this.width+10);w=this.height+10;break}h=g=10;c=this.width+10;d=10;j=this.width+10;k=this.height+
10;o=this.cx2+10;r=this.height+10;n=this.pointx+10;t=this.pointy+10;y=this.cx1+10;m=this.height+10;z=10;w=10+this.height;break;case "left":if(0>this.pointy){g=this.canw-this.width-10;h=this.canh-this.height-10;c=this.canw-10;d=this.canh-this.height-10;j=this.canw-10;k=this.canh-10;o=this.canw-this.width-10;r=this.canh-10;n=this.canw-this.width-10;t=this.canh-(this.height-this.cy2+10);m=y=10;z=this.canw-this.width-10;w=this.canh-(this.height-this.cy1+10);break}this.pointy>this.height?(g=this.canw-
this.width-10,h=10,c=this.canw-10,d=10,j=this.canw-10,k=this.height+10,o=this.canw-this.width-10,r=this.height+10,n=this.canw-this.width-10,t=this.cy2+10,y=10,m=this.canh-10):(g=this.canw-this.width-10,h=10,c=this.canw-10,d=10,j=this.canw-10,k=this.height+10,o=this.canw-this.width-10,r=this.height+10,n=this.canw-this.width-10,t=this.cy2+10,y=10,m=this.pointy+10);z=this.canw-this.width-10;w=this.cy1+10;break;case "Up":if(0>this.pointx){g=this.canw-this.width-10;h=this.canh-this.height-10;c=this.canw-
(this.width-this.cx2)-10;d=this.canh-this.height-10;k=j=10;o=this.canw-(this.width-this.cx1)-10;r=this.canh-this.height-10;n=this.canw-10;t=this.canh-this.height-10;y=this.canw-10;m=this.canh-10;z=this.canw-this.width-10;w=this.canh-10;break}this.pointx>this.width?(g=10,h=this.canh-this.height-10,c=this.cx2+10,d=this.canh-this.height-10,j=this.canw-10):(g=10,h=this.canh-this.height-10,c=this.cx2+10,d=this.canh-this.height-10,j=this.pointx+10);k=10;o=this.cx1+10;r=this.canh-this.height-10;n=this.width+
10;t=this.canh-this.height-10;y=this.width+10;m=this.canh-10;z=10;w=this.canh-10;break;case "Right":if(0>this.pointy){g=10;h=this.canh-this.height-10;c=this.width+10;d=this.canh-this.height-10;j=this.width+10;k=this.canh-(this.height-this.cy2+10);o=this.canw-10;r=10;n=this.width+10;t=this.canh-(this.height-this.cy1+10);y=this.width+10;m=this.canh-10;z=10;w=this.canh-10;break}this.pointy>this.height?(h=g=10,c=this.width+10,d=10,j=this.width+10,k=this.cy2+10,o=this.canw-10,r=this.canh-10):(h=g=10,c=
this.width+10,d=10,j=this.width+10,k=this.cy2+10,o=this.canw-10,r=this.pointy+10);n=this.width+10;t=this.cy1+10;y=this.width+10;m=this.height+10;z=10;w=this.height+10}e.beginPath();e.lineWidth="1";e.globalAlpha=this.config.bgalpha;e.strokeStyle=this.color;e.fillStyle=colorTo0x(this.config.bgcolor);e.moveTo(g,h);e.lineTo(c,d);e.lineTo(j,k);e.lineTo(o,r);e.lineTo(n,t);e.lineTo(y,m);e.lineTo(z,w);e.closePath();e.fill();e.stroke();e.font=this.config.fontSize+"px "+this.config.fontName;a=this.config.textStr;
if(e.measureText(a).width<this.width)e.strokeText(a,g+10,h+1*this.config.fontSize+5);else{a=a.split(" ");d=a[0];for(j=0;j<a.length;j++)j==a.length-1?b.push(d):(c=d+" "+a[j+1],e.measureText(c).width<this.width?d=c:(b.push(d),d=a[j+1]));for(a=0;a<b.length;a++)e.strokeText(b[a],g+10,h+this.config.fontSize*a+15)}e.lineWidth=this.config.borderWidth;e.strokeStyle=colorTo0x(this.config.borderColor);e.stroke()};
initCallout.prototype.initEvent=function(){var a=this;this.flag=0;this.linkURL=this.form=this.form=null;if(null!=a.config.action){try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(b){}var c;null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);try{c=this.config.action.triggerEventType}catch(d){c=null}this.callout.bind(_event._down,function(){c==PageEditor.TriggerEventType.MouseDown&&
actionEvent.call(a);browserType=="msie"?event.cancelBubble=true:event.stopPropagation()});this.callout.bind("mouseover",function(){c==PageEditor.TriggerEventType.MouseOver&&actionEvent.call(a)});this.callout.bind(isTouch?_event._end:"mouseout",function(){c==PageEditor.TriggerEventType.MouseOut&&actionEvent.call(a)})}};
initCallout.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.width=this.wl*this.pw;this.height=this.hl*this.ph;this.callout.css({width:this.width+"px",height:this.height+"px"});this.setPosition();if(null!=this.form)this.form.onResize(bookContainer.width(),bookContainer.height());if(null!=this.slide)this.slide.onResize(bookContainer.width(),bookContainer.height())};
initCallout.prototype.setPosition=function(){this.x=this.cl*this.pw;this.y=this.ct*this.ph;this.callout.css({left:this.x+"px",top:this.y+"px"})};function initSlideShow(a,b,c,d){this.photos=$.extend([],b);if(!(1>this.photos.length)){this.father=a;this.sw=c-8;this.sh=d-8;this.imgIndex=-1;this.imgWidth=200;this.imgHeight=300;this.boxWidth=200;this.boxHeight=300;this.slideShowBG=new grayBackground(a,"#333333",0.3,c,d);this.photoBox=$("<div></div>");this.img=$("<img style='position : absolute;' />");a.append(this.photoBox);this.leftButton=new button(1,a,{iconURL:uiBaseURL+"previous_down.png"});this.rightButton=new button(1,a,{iconURL:uiBaseURL+
"next_down.png"});this.closeButton=new button(1,a,{iconURL:uiBaseURL+"close.png"},!0);this.loadTextField=new label("Loading...",this.photoBox);this.loadTextField.setCSS({"z-index":-1,left:"5px",top:"5px"});this.leftButton.setButtonPosition(5,(this.sh-78)/2);this.rightButton.setButtonPosition(this.sw-55,(this.sh-78)/2);this.closeButton.setButtonPosition(this.sw-45,5);this.closeButton.setCSS({"z-index":210});this.rightButton.setCSS({"z-index":202});this.leftButton.setCSS({"z-index":203});this.photoBox.css({width:this.boxWidth+
"px",height:this.boxHeight+"px",left:(this.sw-this.boxWidth)/2+"px",top:(this.sh-this.boxHeight)/2+"px",position:"absolute","background-color":"#eeeeee","z-index":201,"-webkit-box-shadow":"0 0 10px rgba(40, 0, 0, 0.7)","-moz-box-shadow":"0 0 10px rgba(40, 0, 0, 0.7)","box-shadow":"0 0 10px rgba(40, 0, 0, 0.7)"});this.changeImage(0);var e=this;this.photoBox.bind(_event._down,function(){e.nextPage()});this.closeButton.onMouseUp(this,this.hide);this.leftButton.onMouseDown(this,this.prePage);this.rightButton.onMouseDown(this,
this.nextPage)}}initSlideShow.prototype.nextPage=function(){var a=this.imgIndex+1;a>=this.photos.length&&(a=0);this.changeImage(a)};initSlideShow.prototype.prePage=function(){var a=this.imgIndex-1;0>a&&(a=this.photos.length-1);this.changeImage(a)};initSlideShow.prototype.onResize=function(a,b){this.sw=a-8;this.sh=b-8;this.slideShowBG.onResize(a,b);this.setPosition()};
initSlideShow.prototype.setPosition=function(){this.photoBox.css({left:(this.sw-this.boxWidth)/2+"px",top:(this.sh-this.boxHeight)/2+"px"});this.leftButton.setButtonPosition(5,(this.sh-78)/2);this.rightButton.setButtonPosition(this.sw-55,(this.sh-78)/2);this.closeButton.setButtonPosition(this.sw-45,5)};
initSlideShow.prototype.changeImage=function(a){this.imgIndex=a;this.img.remove();a=this.photos[a].url;"flippdf"==appName&&(a="."+a);var b=this;this.img.attr("src",a);this.img.load(function(){b.imgWidth=this.width;b.imgHeight=this.height;var a=b.imgWidth,d=b.imgHeight;if(b.imgWidth>b.sw||b.imgHeight>b.sh)a=b.imgWidth/b.imgHeight,a>b.sw/b.sh?(a=b.sw,d=b.sw*b.imgHeight/b.imgWidth):(d=b.sh,a*=b.sh);b.img.css({width:a+"px",height:d+"px"});b.boxWidth!=a||b.boxHeight!=d?b.photoBox.animate({width:a+8,height:d+
8,left:(b.sw-a)/2,top:(b.sh-d)/2},300,function(){b.photoBox.append(b.img)}):b.photoBox.append(b.img);b.boxWidth=a;b.boxHeight=d;b.img.css({left:"4px",top:"4px"})})};initSlideShow.prototype.setImagePosition=function(){};initSlideShow.prototype.show=function(){};initSlideShow.prototype.hide=function(){var a=this;this.photoBox.animate({width:20,height:20,top:this.sh/2-10,left:this.sw/2-10},200,function(){a.leftButton.remove();a.rightButton.remove();a.closeButton.remove();a.photoBox.remove();a.slideShowBG.hide()})};function initVideoForm(a,b,c,d){this.config=$.extend({width:400,height:300,src:null,alpha:0.3,caption:"",closeIconURL:uiBaseURL+"close.png"},b);this.father=a;null!=this.config.src&&(this.config.width=parseInt(this.config.width),this.config.height=parseInt(this.config.height),this.sw=c,this.sh=d,this.th=28,this.background=new grayBackground(a,"#333333",this.config.alpha,c,d),this.form=$("<div></div>"),this.titleBar=$("<div></div>"),""!=this.config.closeIconURL&&(this.closeButton=new button(1,this.titleBar,
{iconURL:this.config.closeIconURL},!0),this.closeButton.setButtonPosition(this.config.width-28,0)),""!=this.config.caption&&(this.captionLabel=new label(this.config.caption,this.titleBar),this.captionLabel.setLabelPosition(5,3,["left","top"]),this.captionLabel.setFont(14,"#dddddd","Tahoma")),this.video=$("<video src='"+this.config.src+"' controls='controls'></video>"),this.form.css({width:this.config.width+4+"px",height:this.config.height+4+"px",left:(c-this.config.width)/2+"px",top:(d-this.config.height)/
2+"px","background-color":"#dddddd","-webkit-border-radius":"5px","-moz-border-radius":"5px","-ms-border-radius":"5px","border-radius":"5px",position:"absolute","z-index":201}),this.titleBar.css({width:this.config.width+"px",height:this.th+"px",left:"2px",top:"2px","border-top-left-radius":"5px","border-top-right-radius":"5px",position:"absolute","background-color":"#111111"}),this.video.css({width:this.config.width+"px",height:this.config.height-this.th+"px",top:this.th+2+"px",left:"2px",position:"absolute"}),
a.append(this.form),this.form.append(this.titleBar),this.form.append(this.video),this.initEvent())}initVideoForm.prototype.onResize=function(a,b){this.sw=a;this.sh=b;this.background.onResize(a,b);this.setPosition()};initVideoForm.prototype.setPosition=function(){this.form.css({left:(this.sw-this.config.width)/2+"px",top:(this.sh-this.config.height)/2+"px"})};
initVideoForm.prototype.initEvent=function(){var a=this;this.closeButton.onMouseUp(this,this.closeForm);var b=!1,c,d;this.titleBar.bind(_event._down,function(e){e=isTouch?e.originalEvent.touches:[e];b=!0;c=Point(e[0].pageX,e[0].pageY);d=Point(a.form.offset().left,a.form.offset().top);return!1});this.titleBar.bind(_event._move,function(e){e=isTouch?e.originalEvent.touches:[e];b&&a.form.css({top:d.y+(e[0].pageY-c.y)+"px",left:d.x+(e[0].pageX-c.x)+"px"});return!1});this.titleBar.bind(_event._end,function(){return b=
!1});this.titleBar.bind("mouseleave",function(){return b=!1})};initVideoForm.prototype.closeForm=function(){var a=this;this.form.animate({width:20,height:20,left:this.sw/2-10,top:this.sh/2-10},200,function(){a.background.hide();a.form.remove()})};function initBanner(a,b,c,d,e){this.config=$.extend({width:200,height:20,x:0,y:0,alpha:1,action:null,banners:null},b);this.pw=c;this.ph=d;this.father=a;this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;this.a=this.config.banners.banner;this.id="banner"+e;this.image=null;if("string"==typeof this.a.imageUrl)this.image="<li><img src='"+this.a.imageUrl+"' /></li>";else for(b=0;b<this.a.length;b++)this.image=null!=this.image?
this.image+"<li><img src='"+this.a[b].imageUrl+"' /></li>":"<li><img src='"+this.a[b].imageUrl+"' /></li>";this.banner=$("<div style='left:"+this.x+"px;top:"+this.y+"px;'></div>");this.bannerul=$("<ul></ul>");this.bannerli=$(this.image);a.append(this.banner);this.banner.append(this.bannerul);this.bannerul.append(this.bannerli);this.imageamin();this.father=a;this.initEvent()}
initBanner.prototype.imageamin=function(){this.banner.jFlip(this.width,this.height,{background:"white",cornersTop:!1,scale:"fill"},this.x,this.y)};
initBanner.prototype.initEvent=function(){var a=this;this.flag=0;this.linkURL;if(null!=a.config.action){try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(b){}var c;null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);try{c=this.config.action.triggerEventType}catch(d){c=null}this.banner.bind(_event._down,function(){c==PageEditor.TriggerEventType.MouseDown&&actionEvent.call(a);
browserType=="msie"?event.cancelBubble=true:event.stopPropagation()});this.banner.bind(_event._move,function(){c==PageEditor.TriggerEventType.MouseOver&&actionEvent.call(a)});this.banner.bind(_event._end,function(){c==PageEditor.TriggerEventType.MouseOut&&actionEvent.call(a)})}};initBanner.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;$(".bannerdiv canvas").css({width:this.width+"px",height:this.height+"px"});this.setPosition()};
initBanner.prototype.setPosition=function(){this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;$(".bannerdiv").css({left:this.x+"px",top:this.y+"px"})};function initStarText(a,b,c,d,e){this.config=$.extend({width:200,height:20,x:0,y:0,alpha:1,textStr:null,fontName:null,fontSize:12,color:null,tbold:"false",italic:"false",align:"left",action:null,repeat:"false",moveSpeed:1,sh:"false",sx:4,sy:4,se:2,sr:null},b);this.pw=c;this.ph=d;this.color=colorTo0x(this.config.color);this.father=a;this.speed=22E3*(1/this.config.moveSpeed);this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.x=this.config.x*this.pw;this.y=this.config.y*
this.ph;this.id="startext"+e;this.scrollid="starwars"+this.id;this.textli="";this.offset=0;this.stepping=0.2;this.text=this.config.textStr.split("<br/>");for(b=0;b<this.text.length;b++)this.textli=this.textli+"<li style='list-style-type:none;'>"+this.text[b]+"</li>";this.startext="false"!=this.config.sh?$("<div style='overflow: hidden;position:absolute;left:"+this.x+"px; top:"+this.y+"px;height:"+this.height+"px;width:"+this.width+"px;box-shadow:"+this.config.sx+"px "+this.config.sy+"px "+this.config.se+
"px "+colorTo0x(this.config.sr)+";opacity:"+this.config.alpha+"'></div>"):$("<div style='overflow: hidden;position:absolute;left:"+this.x+"px; top:"+this.y+"px;height:"+this.height+"px;width:"+this.width+"px;opacity:"+this.config.alpha+"'></div>");this.startext2=$("<div style='word-break: break-word;font-family:"+this.config.fontName+";width:100%;font-size:"+this.config.fontSize+"px;color:"+this.color+";text-align:"+this.config.align+";'></div>");"false"!=this.config.tbold&&this.startext.css({"font-weight":"bold"});
"false"!=this.config.italic&&this.startext.css({"font-style":"italic"});this.father=a;this.initEvent();a.append(this.startext);this.startext.append(this.startext2);this.startext2.append(this.textli);this.initScroll()}initStarText.prototype.initScroll=function(){this._wrap=this.startext2;var a=this.text.length;this._wrap.height();for(var b=a;0<=b;b--)$(a[b]).css("fontSize",this.config.fontSize-this.offset+"pt"),this.offset+=this.stepping;this._wrap.css("marginTop",this.height);this.initScrollText()};
initStarText.prototype.initScrollText=function(){var a=this,b=a._wrap,c=a.tid,d=b.height();b.animate({marginTop:-d+"px"},a.speed,function(){if("true"==a.config.repeat){for(var d=c;0<=d;d--)$(c[d]).css("fontSize",a.config.fontSize-a.offset+"pt"),a.offset+=a.stepping;b.css("marginTop",a.height);a.offset=0;a.stepping=0.2;a.initScrollText()}else b.css("marginTop",0)})};
initStarText.prototype.initEvent=function(){var a=this;this.flag=0;this.linkURL=null;if(null!=a.config.action){try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(b){}var c;null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);try{c=this.config.action.triggerEventType}catch(d){c=null}this.startext.bind(_event._down,function(){c==PageEditor.TriggerEventType.MouseDown&&actionEvent.call(a);
browserType=="msie"?event.cancelBubble=true:event.stopPropagation()});this.startext.bind("mouseover",function(){c==PageEditor.TriggerEventType.MouseOver&&actionEvent.call(a)});this.startext.bind(isTouch?_event._end:"mouseout",function(){c==PageEditor.TriggerEventType.MouseOut&&actionEvent.call(a)})}};
initStarText.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.width=this.config.width*this.pw;this.height=this.config.height*this.ph;this.startext.css({width:this.width+"px",height:this.height+"px"});this.setPosition()};initStarText.prototype.setPosition=function(){this.x=this.config.x*this.pw;this.y=this.config.y*this.ph;this.startext.css({left:this.x+"px",top:this.y+"px"})};function grayBackground(a,b,c,d,e){this.sw=d;this.sh=e;this.background=$("<div ></div>");this.background.css({width:d+"px",height:e+"px",background:b,opacity:c,"z-index":200,position:"absolute",left:"0px",top:"0px"});a.append(this.background)}grayBackground.prototype.onResize=function(a,b){this.sw=a;this.sh=b;this.background.css({width:a+"px",height:b+"px"})};grayBackground.prototype.setPosition=function(){};grayBackground.prototype.show=function(){this.father.append(this.background)};
grayBackground.prototype.hide=function(){this.background.remove()};(function(a){var b=function(a){var c=this;this.theButton=a;this.eventSource=a[0];this.isTouch()?(a.bind("touchstart",function(){b.prototype.mouseDown.apply(c,arguments)}),a.bind("touchend",function(){b.prototype.mouseUp.apply(c,arguments)})):(a.bind("mousedown",function(){b.prototype.mouseDown.apply(c,arguments)}),a.bind("mouseleave",function(){b.prototype.mouseUp.apply(c,arguments)}),a.bind("mouseup",function(){b.prototype.mouseUp.apply(c,arguments)}))};b.prototype.isTouch=function(){return"Touch"in
window};b.prototype.mouseDown=function(){this.setAlpha(70)};b.prototype.mouseUp=function(){var a=this;window.setTimeout(function(){b.prototype.setAlpha.apply(a,[100])},100)};b.prototype.setAlpha=function(a){0>a&&(a=0);100<=a&&(a=100);this.theButton.css("opacity",a/100)};a.fn.asButton=function(){new b(this);return this};var c=function(a){this.eventSource=a[0];this.origPicture=a[0].src;var b=this.origPicture.lastIndexOf("."),g=this.origPicture.substr(0,b),b=this.origPicture.substring(b);this.pictureDown=
g+"_down"+b;var h=this;this.isTouch()?(a.bind("touchstart",function(){c.prototype.mouseDown.apply(h,arguments)}),a.bind("touchend",function(){c.prototype.mouseUp.apply(h,arguments)})):(a.bind("mousedown",function(){c.prototype.mouseDown.apply(h,arguments)}),a.bind("mouseup",function(){c.prototype.mouseUp.apply(h,arguments)}),a.bind("mouseleave",function(){c.prototype.mouseUp.apply(h,arguments)}))};c.prototype.isTouch=function(){return"Touch"in window};c.prototype.mouseDown=function(){this.eventSource.src=
this.pictureDown};c.prototype.mouseUp=function(){var a=this;window.setTimeout(function(){a.eventSource.src=a.origPicture},100)};a.fn.asImageButton=function(){new c(this);return this}})(jQuery);function rimFlip(){}rimFlip.prototype.addRimFlip=function(){};rimFlip.prototype.clearTimer=function(){};rimFlip.prototype.removeRimFlip=function(){};rimFlip.prototype.setFlipBack=function(){};var textWidth=function(a,b){var c=$("<pre>"+a+"</pre>").css({display:"none","font-size":b.size,"font-family":b.fontName});$("body").append(c);var d=Point(c.width(),c.height());c.remove();return d};
function label(a,b){this.labelBox=$('<span style = "position : absolute;font-family:Tahoma,Georgia,Serif">'+a+"</span>");this.caption=a;this.fontSize="5px";this.fontColor="#ffffff";this.fontName="Tahoma";var c=textWidth(a,{size:this.fontSize,fontName:this.fontName});this.width=c.x;this.height=c.y;b.append(this.labelBox)}label.prototype.getWidth=function(){return this.width};label.prototype.getHeight=function(){return this.height};label.prototype.getCaption=function(){return this.caption};
label.prototype.setCaption=function(a){this.caption=a;this.labelBox[0].innerHTML=a;a=textWidth(a,{size:this.fontSize,fontName:this.fontName});this.width=a.x;this.height=a.y};label.prototype.setLabelPosition=function(a,b,c){void 0==c&&(c=["left","top"]);this.labelBox.css(c[0],a+"px");this.labelBox.css(c[1],b+"px")};label.prototype.onResize=function(a,b){this.width=a;this.height=b;this.labelBox.css({width:a+"px",height:b+"px"})};
label.prototype.setFont=function(a,b,c){null==a?a=this.fontSize:this.fontSize=a;null==b?b=this.fontColor:this.fontColor=b;null==c?c=this.fontName:this.fontName=c;this.labelBox.css({"font-size":a,color:b,"font-family":c});a=textWidth(this.caption,{size:a,fontName:c});this.width=a.x;this.height=a.y};label.prototype.riseAWord=function(a){newCaption=this.caption.replaceAll(a,"<font color=rgb(226,77,66)><strong>"+a+"</strong></font>");this.labelBox[0].innerHTML=newCaption};
label.prototype.shortWord=function(a){this.caption.length>a&&(this.caption=this.caption.substring(0,a)+"..",this.setCaption(this.caption))};label.prototype.setCSS=function(a){this.labelBox.css(a)};function tipsBox(a,b){this.visible=!1;this.caption=a;this.background=$("<div style = 'position : absolute;'></div>");this.contentBox=new label(a,this.background);this.contentBox.setFont("16px","#f0f0f0",null);this.width=this.contentBox.getWidth()+12;this.height=40;$(b).append(this.background);$(this.background).css({width:this.width+"px",height:this.height+"px","-webkit-border-radius":"10px","-moz-border-radius":"10px","-o-border-radius":"10px","border-radius":"10px","-webkit-box-shadow":"0 0 15px rgba(40, 40, 40, 0.6)",
"-moz-box-shadow":"0 0 15px rgba(40, 40, 40, 0.6)","-o-box-shadow":"0 0 15px rgba(40, 40, 40, 0.6)","box-shadow":"0 0 15px rgba(40, 40, 40, 0.6)","background-color":"#554433",display:"none","z-index":110});this.contentBox.setLabelPosition(4,(this.height-this.contentBox.getHeight())/2-3)}tipsBox.prototype.setTimer=function(){var a=this;this.timer=window.setInterval(function(){a.hideTipsBox.call(a);window.clearInterval(a.timer)},3500)};
tipsBox.prototype.resetTimer=function(){window.clearInterval(this.timer);this.setTimer()};tipsBox.prototype.setPosition=function(a,b,c){void 0==c&&(c=["left","top"]);$(this.background).css(c[0],a+"px");$(this.background).css(c[1],b+"px")};tipsBox.prototype.onResize=function(a,b){this.width=a;this.height=b;$(this.background).css({width:a+"px",height:b+"px"});this.contentBox.setLabelPosition(4,(b-this.contentBox.getHeight())/2)};tipsBox.prototype.getWidth=function(){return this.width};
tipsBox.prototype.getHeight=function(){return this.height};tipsBox.prototype.setCaption=function(a){this.contentBox.setCaption(a);this.caption=a;this.contentBox.setLabelPosition(4,(this.height-this.contentBox.getHeight())/2-3)};tipsBox.prototype.showTipsBox=function(){this.visible?this.resetTimer():(this.setTimer(),this.visible=!0,$(this.background).css({display:"block"}),$(this.background).animate({opacity:0.9},300))};
tipsBox.prototype.hideTipsBox=function(){this.visible&&(this.visible=!1,$(this.background).animate({opacity:0},300,function(){$(this.background).css({display:"none"})}))};var rotate=function(a){return" rotate("+a+"deg)"},translate=function(a,b){return"msie"!=browserType?" translate3d("+a+"px,"+b+"px,0px)":" translate("+a+"px,"+b+"px)"},isTouch=function(){return"Touch"in window},isLeft=function(a){return 0==a||2==a},isRight=function(a){return 1==a||3==a},isTop=function(a){return 0==a||1==a},isBottom=function(a){return 2==a||3==a},nextPageFun=function(){bookType==BookType.normal_book?(flipBook.gotoPage(2*Math.floor(flipBook.getCurrentPageIndex()/2+1)),"undefined"!=typeof speakConfig&&
"none"!=speakConfig.title&&0==flagspeak&&($("#LectureText").stop(!0),$("#LectureText").css("marginTop",0),LectureAudio(Math.floor(flipBook.getCurrentPageIndex()/2+1)),LectureSoll(Math.floor(flipBook.getCurrentPageIndex()/2+1)))):bookType==BookType.single_book?$(singlePageBook).data().gotoPage($(singlePageBook).data().currentPageIndex+1):bookType==BookType.zoom_book&&zoomBook.gotoPage(zoomBook.currentIndex+1)},previousPageFun=function(){bookType==BookType.normal_book?(flipBook.gotoPage(2*Math.floor(flipBook.getCurrentPageIndex()/
2-1)+1),"undefined"!=typeof speakConfig&&"none"!=speakConfig.title&&0==flagspeak&&($("#LectureText").stop(!0),$("#LectureText").css("marginTop",0),LectureAudio(Math.floor(flipBook.getCurrentPageIndex()/2-1)),LectureSoll(Math.floor(flipBook.getCurrentPageIndex()/2-1)))):bookType==BookType.single_book?$(singlePageBook).data().gotoPage($(singlePageBook).data().currentPageIndex-1):bookType==BookType.zoom_book&&zoomBook.gotoPage(zoomBook.currentIndex-1)},firstPageFun=function(){bookType==BookType.normal_book?
flipBook.gotoPage(1):bookType==BookType.single_book?$(singlePageBook).data().gotoPage(1):bookType==BookType.zoom_book&&zoomBook.gotoPage(1)},lastPageFun=function(){bookType==BookType.normal_book?flipBook.gotoPage(totalPageCount):bookType==BookType.single_book?$(singlePageBook).data().gotoPage(originTotalPageCount):bookType==BookType.zoom_book&&zoomBook.gotoPage(originTotalPageCount)},gotoPageFun=function(a){bookType==BookType.normal_book?flipBook.gotoPage(a):bookType==BookType.single_book?(debug("pageIndex: "+
a),$(singlePageBook).data().gotoPage(a)):bookType==BookType.zoom_book&&zoomBook.gotoPage(a)},getPageDir=function(a,b){var c;switch(b){case "normal":return c=getString("normalPath","files/page/")+a+".jpg";case "large":return c=getString("largePath","files/large/")+a+".jpg";case "thumb":return c=getString("thumbPath","files/thumbnail/")+a+".jpg"}},getPageWidthHeight=function(a,b,c,d){var e=Point(0,0);a/b>c/d?(e.x=c*b/d,e.y=b):(e.x=a,e.y=a*d/c);return e},pointToLineDistance=function(a,b,c,d,e,g){var h=
g-d,j=c-e;return Math.abs(h*a+j*b+(e*d-c*g))/Math.sqrt(h*h+j*j)},globalToBook=function(a,b,c,d){void 0==d&&(d=!1);return d?Point(b-_singleBook.offset().left,c-_singleBook.offset().top):Point(b-((a?0:flipBook.getPageWidth())+flipBook.getLeft()),c-flipBook.getTop())},changeShowBook=function(a){switch(a){case 0:singlePageBook.setSingleBookVisible(!1);zoomBook.setVisible(!1);flipBook.setCSS({display:"block"});_rimFlip.isRimFlip&&($(singlePageBook).data().currentPage.resetPage(),$(singlePageBook).data().currentPage.setSideAUp(!0),
_rimFlip.clearTimer(),_rimFlip.addRimFlip());thumbnail.mergeAll();break;case 1:singlePageBook.setSingleBookVisible(!0);zoomBook.setVisible(!1);flipBook.setCSS({display:"none"});_rimFlip.isRimFlip&&(currentPage2.resetPage(),_rimFlip.clearTimer(),_rimFlip.addRimFlip());thumbnail.fissionAll();break;case 2:singlePageBook.setSingleBookVisible(!1),zoomBook.setVisible(!0),flipBook.setCSS({display:"none"}),_rimFlip.isRimFlip&&($(singlePageBook).data().currentPage.resetPage(),$(singlePageBook).data().currentPage.setSideAUp(!0),
currentPage2.resetPage(),currentPage2.setSideUp(!0),_rimFlip.clearTimer(),_rimFlip.setFlipBack(!1)),thumbnail.fissionAll()}},computeMousePoint=function(a,b,c,d,e,g){var h=function(){return 0<=a.indexOf("l")},j=function(){return 0<=a.indexOf("b")},k=Point(b,c),o,r,n;r=h()?d-b:b;n=j()?e-c:c;o=Math.sqrt(Math.pow(r,2)+Math.pow(n,2));r=Math.sqrt(Math.pow(r,2)+Math.pow(e-n,2));if(o>d&&r>g)o-d>r-g?(k=h()?d-(d-b)*d/o:b*d/o,o=j()?e-(e-c)*d/o:c*d/o):(k=h()?d-(d-b)*g/r:b*g/r,o=0<=a.indexOf("t")?e-(e-c)*g/r:
c*g/r),k=Point(k,o),computeMousePoint(a,k.x,k.y,d,e,g);else if(o>d&&(k=h()?d-(d-b)*d/o:b*d/o,o=j()?e-(e-c)*d/o:c*d/o,k=Point(k,o)),r>g)k=h()?d-(d-b)*g/r:b*g/r,o=0<=a.indexOf("t")?e-(e-c)*g/r:c*g/r,k=Point(k,o);0<=a.indexOf("t")&&0==k.y?k.y=0.0020*e:j()&&k.y==e&&(k.y=0.998*e);return k},computePoint=function(a,b,c,d,e,g,h,j){var k,o;k=Point(b,c);k=computeMousePoint(a,b,c,d,e,g);c=k.x;o=k.y;k=function(){return 0<=a.indexOf("l")};b=function(){return 0<=a.indexOf("t")};switch(a){case "tl":actualPoint=
Point(c,o);middlePoint=Point(d-actualPoint.x/2,o/2);endPoint=Point(2*d,0);break;case "tr":actualPoint=Point(d-c,o);middlePoint=Point(d-actualPoint.x/2,actualPoint.y/2);endPoint=Point(-d,0);break;case "bl":actualPoint=Point(c,e-o);middlePoint=Point(d-actualPoint.x/2,actualPoint.y/2);endPoint=Point(2*d,e);break;case "br":actualPoint=Point(d-c,e-o),middlePoint=Point(d-actualPoint.x/2,actualPoint.y/2),endPoint=Point(-d,e)}var r=Point(0,0),n=Math.PI/2,t=Math.atan2(actualPoint.y,actualPoint.x);o=n-t;var c=
180*o/Math.PI,y=o-Math.atan2(middlePoint.y,middlePoint.x);distance=Math.max(0,Math.sin(y)*Math.sqrt(Math.pow(middlePoint.x,2)+Math.pow(middlePoint.y,2)));noMovePoint=Point(distance*Math.sin(o),distance*Math.cos(o));var m;if(o>n&&(noMovePoint.x+=Math.abs(noMovePoint.y*Math.tan(t)),noMovePoint.y=0,r=Math.PI-o,g=g-e/Math.sin(r)-(noMovePoint.x-e/Math.tan(r))*Math.cos(r),r=Point(Math.round(g*Math.cos(r)),Math.round(g*Math.sin(r))),k()&&(r.x=-r.x),b()))r.y=-r.y;g=Math.sqrt(Math.pow(endPoint.x-actualPoint.x,
2)+Math.pow(endPoint.y-actualPoint.y,2));n=Math.round(noMovePoint.y/Math.tan(o)+noMovePoint.x);k()&&(n=d-n);t=k()?n:d-n;y=t*Math.cos(2*o);m=t*Math.sin(2*o);n=Point(Math.round(n+(k()?-y:y)),Math.round(b()?m:e-m));m=t*Math.sin(o);t=Point(100*(actualPoint.x/2/d),100*(actualPoint.y/2/e));g=g<d?g/d:1;y=100<m?(m-100)/m:0;b()||(t.y=100-t.y);k()&&(t.x=100-t.x);d=Point(100*(m*Math.sin(o)/d),100*(m*Math.cos(o)/e));k()||(d.x=100-d.x);b()||(d.y=100-d.y);h.css({"background-image":"-webkit-gradient(linear, "+(k()?
100:0)+"% "+(b()?0:100)+"%, "+t.x+"% "+t.y+"%, color-stop("+y+",rgba(0,0,0,0)), color-stop("+(0.8*(1-y)+y)+",rgba(0,0,0,"+0.2*g+")), to(rgba(255,255,255,"+0.2*g+")))"});j.css({"background-image":"-webkit-gradient(linear, "+(k()?0:100)+"% "+(b()?0:100)+"%, "+d.x+"% "+d.y+"%,  color-stop(0.8,rgba(0,0,0,0)), color-stop(1, rgba(0,0,0,"+0.2*g+")), to(rgba(0,0,0,0)) )"});return{Angle:c,Mv:r,Df:n,NomovePoint:noMovePoint}},setCurrentIndexTextField=function(a,b){if(1!=a&&a!=totalPageCount&&b)var c=2*Math.floor(a/
2),a=c+"-"+(c+1);c=totalPageCount;b||(c=originTotalPageCount);$("#fbCurrentPageIndex").text(a);pageIndexTextField.val(a+"/"+c)},getSpeedArray=function(a,b){for(var c=b/2,d=(a-a/4)/c,e=Array(b),g=0;g<b;g++)e[g]=g<c?a-(c-g)*d:a+(g-c+1)*d;return e.reverse()},getBrowserPre=function(){switch(browserType){case "msie":return"-ms-";case "mozilla":return"-moz-";case "safari":return"-webkit-";case "opera":return"-o-"}},actionEvent=function(){this.config.action.actionType==PageEditor.ActionType.GOTO_PAGE?gotoPageFun(this.config.action.pageIndex):
this.config.action.actionType==PageEditor.ActionType.OPEN_URL?(void 0==this.config.action.linkTarget&&(this.config.action.linkTarget="_blank"),window.open(this.linkURL,this.config.action.linkTarget)):this.config.action.actionType==PageEditor.ActionType.OPEN_WINDOW?this.form=new initVideoForm(tmpContainer,{width:this.config.action.windowWidth,height:this.config.action.windowHeight,src:this.config.action.resourceContent,caption:this.config.action.caption},bookContainer.width(),bookContainer.height()):
this.config.action.actionType==PageEditor.ActionType.SLIDE_SHOW?this.slide=new initSlideShow(tmpContainer,this.config.action.photos.photo,bookContainer.width(),bookContainer.height()):this.config.action.actionType==PageEditor.ActionType.PLAY_AUDIO?0==this.flag&&(this.audios=$("<audio src='"+this.config.action.audioURL+"' style='width: "+this.width+"px; height: "+this.height+"px;top:"+this.y+"px;left:"+this.x+"px;position:absolute;' controls ></audio>"),this.config.action.autoPlay&&(this.audios[0].autoPlay=
!0),this.father.append(this.audios),this.flag=1):this.config.action.actionType==PageEditor.ActionType.ACTION_JS&&null!=this.config.action.scriptFun&&eval(this.config.action.scriptFun)};function searchFromPages(a,b){for(var c=[],b=b.trim().toLowerCase(),d=null,d=-1==b.indexOf(" ")?[b]:b.split(" "),e=0,e=0;e<a.length;e++){var g=a[e].trim().toLowerCase(),h=g,j=-1,k=-1,o=-1,r=0,n=!0,t;for(t=0;t<d.length;t++){var h=new KMP(h,d[t]),y=d[t].length;if(h.match()){var m=r+h.getIndex();if(m>o)o=m,r=m+d[t].length,h=g.substring(r),0==t&&(j=m),t==d.length-1&&(k=m+y);else{n=!1;break}}else{n=!1;break}}n&&(o=[],o.search_page=e+1,o.search_title="page "+(e+1),j=g.substring(0,j).lastIndexOf("."),-1==
j?j=0:j++,r=g.substring(k),n=r.indexOf(".")+1,n=-1==n?r.length():k+n,g=g.substring(j,n),o.search_text=g,c.push(o))}return c};var KMP=function(a,b){this.__string=a;this.__pattern=b;this.__next=[];this.__times=0;this.__index=-1;for(var c=0,c=0;c<b.length;c++)this.__next[c]=1>=c?c-1:this.next(b.substring(0,c));this.__times=0;this.__index=-1};KMP.prototype.next=function(a){for(var b=Math.ceil(a.length/2);0<b&&0!=a.substring(0,b).compareTo(a.substring(a.length-b,a.length));)b--;return b};
KMP.prototype.match=function(){for(var a=0,b=0,c=-1;a<this.__string.length&&b<this.__pattern.length;){if(this.__string.charAt(a)==this.__pattern.charAt(b))0===b&&(c=a),a++,b++;else{for(var d=this.__next[b];-1!=d&&this.__pattern.charAt(d)==this.__pattern.charAt(b);)d=this.__next[d];b=d;-1==b?(a++,b=0):c=a-b}this.__times++}return b==this.__pattern.length?(this.__index=c,!0):!1};KMP.prototype.getTimes=function(){return this.__times};KMP.prototype.getIndex=function(){return this.__index};
String.prototype.compareTo=function(a){var b=this.length,c=a.length,d=Math.min(b,c),e=this.split(""),a=a.split(""),g=0,h=0;if(g==h){h=g;for(d+=g;h<d;){var j=e[h],k=a[h];if(j!=k)return j-k;h++}}else for(;0!=d--;)if(j=e[g++],k=a[h++],j!=k)return j-k;return b-c};String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};
String.prototype.replaceAll=function(a,b){for(var c=this.indexOf(a),d=[],e=this;-1!=c;){var c=c+a.length,g=e.substring(0,c),e=e.substring(c),g=g.replace(a,b);d.push(g);c=e.indexOf(a)}""!==e&&d.push(e);return d.join("")};function normalSide(a,b){this.side=$("<div class='side'></div>");this.sideContent=$("<div class='sideContent'></div>");this.sideImg=$("<img />");this.grayColor=$("<div class='kong' style='background-color:#888888;opacity:0.1'></div>");(this.isLeft=b)?(this.midShadow=$("<div class='leftShadow'></div>"),this.midShadow.css({width:userConfig.leftShadowWidth+"px",opacity:userConfig.leftShadowAlpha})):(this.midShadow=$("<div class='rightShadow'></div>"),this.midShadow.css({width:userConfig.rightShadowWidth+
"px",opacity:userConfig.rightShadowAlpha}));this.side.css({"background-color":getString("pageBackgroundColor","#f5f5f5")});this.MMBackground=$("<div style='position : absolute; z-index : 6;'></div>");this.linkArray=[];this.youtubeArray=[];this.videoArray=[];this.audioArray=[];this.imageArray=[];this.buttonArray=[];this.flashShowArray=[];this.lineArray=[];this.arrowArray=[];this.roundArray=[];this.reArray=[];this.textArray=[];this.areaArray=[];this.calloutArray=[];this.atextArray=[];this.startextArray=
[];this.aminArray=[];this.atimageArray=[];this.efftextArray=[];this.soundArray=[];this.bannerArray=[];a.append(this.side);this.side.append(this.sideContent);this.side.append(this.midShadow);this.side.append(this.MMBackground);this.midShadow.css("z-index",5);this.imageIndex=0;this.width=300;this.height=400}normalSide.prototype.getSide=function(){return this.side};
normalSide.prototype.fillContent=function(a){if(a!=this.imageIndex&&(this.imageIndex=a,this.sideContent.empty(),!(this.imageIndex>originTotalPageCount))){var b=this;this.sideImg.load(getPageDir(this.imageIndex,"normal"),function(){b.sideImg.attr("src",getPageDir(b.imageIndex,"normal"));b.sideContent.append(b.sideImg);b.sideContent.append(b.grayColor);void 0!=pageEditor&&b.initMM()})}};
normalSide.prototype.imgFlipOver=function(a){a?(this.sideImg.css({"-webkit-transform":"scaleX(-1)","-moz-transform":"scaleX(-1)"}),this.MMBackground.css({"-webkit-transform":"scaleX(-1)","-moz-transform":"scaleX(-1)"}),this.midShadow.attr("class",this.isLeft?"rightShadow":"leftShadow"),this.midShadow.css({left:this.isLeft?"0px":"auto",right:this.isLeft?"auto":"0px"})):(this.sideImg.css({"-webkit-transform":"scaleX(1)","-moz-transform":"scaleX(1)"}),this.MMBackground.css({"-webkit-transform":"scaleX(1)",
"-moz-transform":"scaleX(1)"}),this.midShadow.attr("class",this.isLeft?"leftShadow":"rightShadow"),this.midShadow.css({left:this.isLeft?"auto":"0px",right:this.isLeft?"0px":"auto"}))};
normalSide.prototype.initMM=function(){this.MMBackground.empty();this.linkArray=[];this.youtubeArray=[];this.videoArray=[];this.audioArray=[];this.imageArray=[];this.buttonArray=[];this.flashShowArray=[];this.lineArray=[];this.arrowArray=[];this.roundArray=[];this.reArray=[];this.textArray=[];this.areaArray=[];this.calloutArray=[];this.atextArray=[];this.startextArray=[];this.aminArray=[];this.atimageArray=[];this.efftextArray=[];this.soundArray=[];this.bannerArray=[];if(!(0>=this.imageIndex||pageEditor.length<
this.imageIndex||null==pageEditor[this.imageIndex-1][0]))for(var a=0;a<pageEditor[this.imageIndex-1].length;a++)if(pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_LINK){var b=pageEditor[this.imageIndex-1][a],b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,downColor:b.downColor,downAlpha:b.downAlpha,overColor:b.overColor,overAlpha:b.overAlpha,outColor:b.outColor,outAlpha:b.outAlpha,action:b.action};this.linkArray.push(new initLink(this.MMBackground,
b,this.width,this.height))}else pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_YOUTUBE?(b=pageEditor[this.imageIndex-1][a],b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,id:b.videoId,moviePlayTriggerEvt:b.moviePlayTriggerEvt,movieStopTriggerEvt:b.movieStopTriggerEvt},this.youtubeArray.push(new initYoutube(this.MMBackground,b,this.width,this.height))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_VIDEO?(b=pageEditor[this.imageIndex-
1][a],b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,moviePlayTriggerEvt:b.moviePlayTriggerEvt,movieStopTriggerEvt:b.movieStopTriggerEvt},this.videoArray.push(new initVideo(this.MMBackground,b,this.width,this.height))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_AUDIO?(b=pageEditor[this.imageIndex-1][a],b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.soundURL,soundPlayTriggerEvt:b.soundPlayTriggerEvt,
soundStopTriggerEvt:b.soundStopTriggerEvt},this.audioArray.push(new initAudio(this.MMBackground,b,this.width,this.height))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_IMAGE?(b=pageEditor[this.imageIndex-1][a],b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,action:b.action},imageObj=new initImage(this.MMBackground,b,this.width,this.height),this.imageArray.push(imageObj)):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_BUTTON?
(b=pageEditor[this.imageIndex-1][a],b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,action:b.action,buttonCaption:b.buttonCaption,captionY:b.captionY,HRate:b.HRate,Format:b.Format},this.buttonArray.push(new initButton(this.MMBackground,b,this.width,this.height))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_FLASHSHOW?(b=pageEditor[this.imageIndex-1][a],b={width:b.location.width,height:b.location.height,x:b.location.x,
y:b.location.y,alpha:b.alpha,photo:b.Images,repeatPlay:b.isRepeat},this.flashShowArray.push(new initFlashShow(this.MMBackground,b,this.width,this.height))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_LINE?(b=pageEditor[this.imageIndex-1][a],b={StartX:b.lineStartPX,StartY:b.lineStartPY,EndX:b.lineEndPX,EndY:b.lineEndPY,x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,lineAlpha:b.lineAlpha,alpha:b.alpha,lineWidth:b.lineWidth,lineType:b.lineType,dotWidth:b.dotWidth,
color:b.color,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor},this.lineArray.push(new initLine(this.MMBackground,b,this.width,this.height,this.imageIndex+a))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ARROW?(b=pageEditor[this.imageIndex-1][a],b={StartX:b.lineStartPX,StartY:b.lineStartPY,EndX:b.lineEndPX,EndY:b.lineEndPY,x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,
alpha:b.alpha,lineWidth:b.lineWidth,lineType:b.lineType,dotWidth:b.dotWidth,color:b.color,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,arrowType:b.arrowType,sr:b.shadow.shadowColor},this.arrowArray.push(new initArrow(this.MMBackground,b,this.width,this.height,this.imageIndex+a))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ROUND?(b=pageEditor[this.imageIndex-1][a],b={x:b.location.x,y:b.location.y,width:b.location.width,
height:b.location.height,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,ColorA:b.gradientColorA,ColorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action},this.roundArray.push(new initRound(this.MMBackground,b,this.width,this.height,this.imageIndex+a))):pageEditor[this.imageIndex-
1][a].annotype==PageEditor.AnnoType.ANNO_RECTANGLE?(b=pageEditor[this.imageIndex-1][a],b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,ColorA:b.gradientColorA,ColorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,
action:b.action},this.reArray.push(new initRe(this.MMBackground,b,this.width,this.height,this.imageIndex+a))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_TEXT?(b=pageEditor[this.imageIndex-1][a],b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,textStr:b.textStr,lineH:b.lineHeightRation,fontName:b.formats.defaultFormat.fontName,fontSize:b.formats.defaultFormat.fontSize,color:b.formats.defaultFormat.color,tbold:b.formats.defaultFormat.bold,
italic:b.formats.defaultFormat.italic,bgalpha:b.background.alpha,fillBg:b.background.fillBg,bgcolor:b.background.color,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action},this.textArray.push(new initText(this.MMBackground,b,this.width,this.height,this.imageIndex+a))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_AREA?(b=pageEditor[this.imageIndex-1][a],b={x:b.location.x,y:b.location.y,width:b.location.width,
height:b.location.height,alpha:b.alpha,color:b.color,rounds:b.round,ellipseWidth:b.ellipseWidth,ellipseHeight:b.ellipseHeight,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action},this.areaArray.push(new initArea(this.MMBackground,b,this.width,this.height,this.imageIndex+a))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_CALLOUT?(b=pageEditor[this.imageIndex-1][a],b={x:b.location.x,y:b.location.y,
width:b.location.width,height:b.location.height,alpha:b.alpha,textStr:b.textStr,lineH:b.lineHeightRation,fontName:b.formats.defaultFormat.fontName,fontSize:b.formats.defaultFormat.fontSize,color:b.formats.defaultFormat.color,tbold:b.formats.defaultFormat.bold,italic:b.formats.defaultFormat.italic,bgalpha:b.background.alpha,fillBg:b.background.fillBg,bgcolor:b.background.color,direct:b.hookDirect,cx1:b.hookContr1RatioX,cy1:b.hookContr1RatioY,cx2:b.hookContr2RatioX,cy2:b.hookContr2RatioY,pointx:b.hookContrPointRatioX,
pointy:b.hookContrPointRatioY,cornerRadiut:b.cornerRadiut,borderWidth:b.borderWidth,borderColor:b.borderColor,bordreAlpha:b.bordreAlpha,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor},this.calloutArray.push(new initCallout(this.MMBackground,b,this.width,this.height,this.imageIndex+a))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ATEXT?(b=pageEditor[this.imageIndex-1][a],b={x:b.location.x,y:b.location.y,
width:b.location.width,height:b.location.height,alpha:b.alpha,textStr:b.strText,fontName:b.format.font,fontSize:b.format.size,color:b.format.color,tbold:b.format.bold,italic:b.format.italic,align:b.format.align,action:b.action,repeat:b.repeat,moveSpeed:b.moveSpeed,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor},this.atextArray.push(new initAText(this.MMBackground,b,this.width,this.height,this.imageIndex+a))):pageEditor[this.imageIndex-
1][a].annotype==PageEditor.AnnoType.ANNO_STARTEXT?(b=pageEditor[this.imageIndex-1][a],b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,textStr:b.strText,fontName:b.format.font,fontSize:b.format.size,color:b.format.color,tbold:b.format.bold,italic:b.format.italic,align:b.format.align,action:b.action,repeat:b.repeat,moveSpeed:b.moveSpeed,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor},
this.startextArray.push(new initStarText(this.MMBackground,b,this.width,this.height,this.imageIndex+a))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_TEXTANIM?(b=pageEditor[this.imageIndex-1][a],b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,effectType:b.effectType,textStr:b.textStr,fontName:b.formats.defaultFormat.fontName,fontSize:b.formats.defaultFormat.fontSize,color:b.formats.defaultFormat.color,tbold:b.formats.defaultFormat.bold,
italic:b.formats.defaultFormat.italic,action:b.action,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor},this.aminArray.push(new initAminText(this.MMBackground,b,this.width,this.height,this.imageIndex+a))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ATIMAGE?(b=pageEditor[this.imageIndex-1][a],b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,action:b.action},
atimageObj=new initPngImage(this.MMBackground,b,this.width,this.height),this.atimageArray.push(atimageObj)):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_EFFECTTEXT?(b=pageEditor[this.imageIndex-1][a],b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,textStr:b.text,fontName:b.format.font,fontSize:b.format.size,color:b.format.color,tbold:b.format.bold,italic:b.format.italic,action:b.action,moveSpeed:b.effectStyle,sh:b.shadow.hasDropShadow,
sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor},this.efftextArray.push(new initEffText(this.MMBackground,b,this.width,this.height,this.imageIndex+a))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ADVANCEDSOUND?(b=pageEditor[this.imageIndex-1][a],b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.soundList.sound,skinType:b.skinType,soundPlay:b.soundPlayTriggerEvt},this.soundArray.push(new initSound(this.MMBackground,
b,this.width,this.height,this.imageIndex+a))):pageEditor[this.imageIndex-1][a].annotype==PageEditor.AnnoType.ANNO_BANNER&&(b=pageEditor[this.imageIndex-1][a],b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,action:b.action,banners:b.banners},this.bannerArray.push(new initBanner(this.MMBackground,b,this.width,this.height,this.imageIndex+a)))};
normalSide.prototype.changeTo0x=function(a){var b=a;"#"!=a.substr(0,1)&&"0x"!=a.substr(0,2)&&(b="#"+parseInt(a).toString(16));"0x"==a.substr(0,2)&&(b=a.replace("0x","#"));return b};normalSide.prototype.showGray=function(){this.grayColor.css({display:"block"})};normalSide.prototype.hideGray=function(){this.grayColor.css({display:"none"})};
normalSide.prototype.onResize=function(a,b){this.side.css({width:a+"px",height:b+"px"});this.sideContent.css({width:a+"px",height:b+"px"});this.sideImg.css({width:a+"px",height:b+"px"});this.grayColor.css({width:a+"px",height:b+"px"});this.MMBackground.css({width:a+"px",height:b+"px"});this.midShadow.css({height:b+"px"});for(var c=0;c<this.linkArray.length;c++)this.linkArray[c].onResize(a,b);for(c=0;c<this.youtubeArray.length;c++)this.youtubeArray[c].onResize(a,b);for(c=0;c<this.videoArray.length;c++)this.videoArray[c].onResize(a,
b);for(c=0;c<this.audioArray.length;c++)this.audioArray[c].onResize(a,b);for(c=0;c<this.imageArray.length;c++)this.imageArray[c].onResize(a,b);for(c=0;c<this.buttonArray.length;c++)this.buttonArray[c].onResize(a,b);for(c=0;c<this.flashShowArray.length;c++)this.flashShowArray[c].onResize(a,b);for(c=0;c<this.arrowArray.length;c++)this.arrowArray[c].onResize(a,b);for(c=0;c<this.lineArray.length;c++)this.lineArray[c].onResize(a,b);for(c=0;c<this.reArray.length;c++)this.reArray[c].onResize(a,b);for(c=
0;c<this.textArray.length;c++)this.textArray[c].onResize(a,b);for(c=0;c<this.roundArray.length;c++)this.roundArray[c].onResize(a,b);for(c=0;c<this.areaArray.length;c++)this.areaArray[c].onResize(a,b);for(c=0;c<this.calloutArray.length;c++)this.calloutArray[c].onResize(a,b);for(c=0;c<this.atextArray.length;c++)this.atextArray[c].onResize(a,b);for(c=0;c<this.startextArray.length;c++)this.startextArray[c].onResize(a,b);for(c=0;c<this.aminArray.length;c++)this.aminArray[c].onResize(a,b);for(c=0;c<this.atimageArray.length;c++)this.atimageArray[c].onResize(a,
b);for(c=0;c<this.efftextArray.length;c++)this.efftextArray[c].onResize(a,b);for(c=0;c<this.soundArray.length;c++)this.soundArray[c].onResize(a,b);for(c=0;c<this.bannerArray.length;c++)this.bannerArray[c].onResize(a,b);this.width=a;this.height=b};normalSide.prototype.sideAddChild=function(a){this.side.append(a)};
normalSide.prototype.enterSide=function(){for(var a=0;a<this.youtubeArray.length;a++)this.youtubeArray[a].getPlayEvt(),this.youtubeArray[a].getStopEvt();for(a=0;a<this.videoArray.length;a++)this.videoArray[a].getPlayEvt()==PageEditor.PlayEvt.EVT_PLAY&&this.videoArray[a].playVideo(),this.videoArray[a].getStopEvt()==PageEditor.PlayEvt.EVT_PLAY&&this.videoArray[a].pauseVideo();for(a=0;a<this.audioArray.length;a++)this.audioArray[a].getPlayEvt()==PageEditor.PlayEvt.EVT_PLAY&&this.audioArray[a].play(),
this.audioArray[a].getStopEvt()==PageEditor.PlayEvt.EVT_PLAY&&this.audioArray[a].pause()};
normalSide.prototype.leaveSide=function(){for(var a=0;a<this.youtubeArray.length;a++)this.youtubeArray[a].getPlayEvt(),this.youtubeArray[a].getStopEvt();for(a=0;a<this.videoArray.length;a++)this.videoArray[a].getPlayEvt()==PageEditor.PlayEvt.EVT_STOP&&this.videoArray[a].playVideo(),this.videoArray[a].getStopEvt()==PageEditor.PlayEvt.EVT_STOP&&this.videoArray[a].pauseVideo();for(a=0;a<this.audioArray.length;a++)this.audioArray[a].getPlayEvt()==PageEditor.PlayEvt.EVT_STOP&&this.audioArray[a].play(),
this.audioArray[a].getStopEvt()==PageEditor.PlayEvt.EVT_STOP&&this.audioArray[a].pause()};normalSide.prototype.hideYoutube=function(){for(var a=0;a<this.youtubeArray.length;a++)this.youtubeArray[a].hide()};normalSide.prototype.showYoutube=function(){for(var a=0;a<this.youtubeArray.length;a++)this.youtubeArray[a].show()};
normalSide.prototype.initZoom=function(){var a=!1;this.zw=this.width;this.zh=this.height;this.isZoom=!1;var b=Point(0,0),c=Point(0,0);this.side.bind(_event._down,function(d){d=d.originalEvent.touches;2==d.length&&(a=!0,b=Point(d[0].pageX,d[0].pageY),c=Point(d[1].pageX,d[1].pageY))});this.side.bind(_event._end,function(){});this.side.bind(_event._move,function(d){d=d.originalEvent.touches;a&&(100<=Math.pow(b.x-d[0].pageX,2)+Math.pow(b.y-d[0].pageY,2)||(Math.pow(c.x-d[1].pageX,2),Math.pow(c.y-d[1].pageY,
2)))})};function normalPage(){this.pageStatu=!1;this.corner="tr";this.pageIndex=1;this.isHardPage=!1;this.pageVisible=!0;this.width=300;this.height=400;this.maskWidth=500;this.isLastPageReset=!1}
normalPage.prototype.create=function(a){this.page=$("<div class='paper'></div>");this.mask=$("<div class='pageMask'></div>");this.sideAPosition=$("<div class='sidePosition'></div>");this.sideBPosition=$("<div class='sidePosition'></div>");this.flipBackShadow=$("<div class='backShadow'></div>");this.flipFrontShadow=$("<div class='frontShadow'></div>");this.sideA=new normalSide(this.sideAPosition,!1);this.sideB=new normalSide(this.sideBPosition,!0);this.page.append(this.flipBackShadow);a.append(this.page);
this.page.append(this.mask);this.mask.append(this.sideAPosition);this.mask.append(this.sideBPosition);this.sideAPosition.append(this.sideA.side);this.sideBPosition.append(this.sideB.side)};normalPage.prototype.getSideA=function(){return this.sideA};normalPage.prototype.getSideB=function(){return this.sideB};
normalPage.prototype.onResize=function(a,b,c,d){this.page.css({width:a+"px",height:b+"px",left:d+"px"});this.mask.css({width:a+"px",height:b+"px"});this.flipBackShadow.css({width:a+"px",height:b+"px"});this.flipFrontShadow.css({width:a+"px",height:b+"px"});this.sideAPosition.css({width:a+"px",height:b+"px"});this.sideBPosition.css({width:a+"px",height:b+"px"});this.sideA.onResize(a,b);this.sideB.onResize(a,b);this.width=a;this.height=b;this.maskWidth=c};
normalPage.prototype.fillSideA=function(a){this.sideA.fillContent(a);this.pageIndex=a;this.isHardPage=!1;1==a&&hardPageEnable&&"msie"!=browserType&&(this.isHardPage=!0)};normalPage.prototype.fillSideB=function(a){this.sideB.fillContent(a);a==totalPageCount&&hardPageEnable&&"msie"!=browserType&&(this.isHardPage=!0)};
normalPage.prototype.beginFlip=function(a){this.corner=a;this.isLeft()?(this.sideA.sideAddChild(this.flipFrontShadow),this.pageStatu=!0):(this.sideB.sideAddChild(this.flipFrontShadow),this.pageStatu=!1);3>=flipBook.gotoPageIndex&&flipBook.setLeftThicknessVisible(!1);flipBook.gotoPageIndex>=totalPageCount-2&&flipBook.setRightThicknessVisible(!1);this.mask.css({width:this.maskWidth+"px",height:this.maskWidth+"px"});flipBook.normalBookShadow.hideShadow()};
normalPage.prototype.flipToPoint=function(a,b,c){if(this.isHardPage)this.hardFlip(a,c);else if(this.isCorner(a,b))this.resetPage(this.isLeft());else{var d=computePoint(this.corner,a,b,this.width,this.height,this.maskWidth,this.flipFrontShadow,this.flipBackShadow),a=d.Angle,b=d.Df,e=d.NomovePoint,d=d.Mv,g=this.isLeft(),h=this.isBottom();c&&(this.showShadow(),this.page.css({left:g?"0px":this.width+"px"}),this.sideAPosition.css({right:g?"0px":"auto",left:g?"auto":"0px",top:h?"auto":"0px",bottom:h?"0px":
"auto"}),this.sideBPosition.css({right:g?"0px":"auto",left:g?"auto":"0px",top:h?"auto":"0px",bottom:h?"0px":"auto"}),this.setSideUp(g),g?this.sideA.hideGray():this.sideB.hideGray());switch(this.corner){case "tl":this.rotateElement(this.mask,"100% 0%",translate(-e.x+this.width-this.maskWidth+d.x,-e.y+d.y)+rotate(-a));this.rotateElement(this.sideBPosition,"100% 0%",rotate(a)+translate(e.x-d.x,e.y-d.y));this.rotateElement(this.sideAPosition,"100% 0%",rotate(a)+translate(e.x+b.x-d.x,e.y+b.y-d.y));this.rotateElement(this.sideA.side,
"100% 0%",translate(-this.width,0)+rotate(2*(90-a)));break;case "tr":this.rotateElement(this.mask,"0% 0%",translate(e.x+d.x,-e.y+d.y)+rotate(a));this.rotateElement(this.sideAPosition,"0% 0%",rotate(-a)+translate(-e.x-d.x,e.y-d.y));this.rotateElement(this.sideBPosition,"0% 0%",rotate(-a)+translate(-e.x-d.x+b.x,e.y+b.y-d.y));this.rotateElement(this.sideB.getSide(),"0% 0%",translate(0,0)+rotate(2*(a-90)));break;case "bl":this.rotateElement(this.mask,"100% 100%",translate(-e.x+this.width-this.maskWidth+
d.x,e.y+this.height-this.maskWidth+d.y)+rotate(a));this.rotateElement(this.sideBPosition,"100% 100%",rotate(-a)+translate(e.x-d.x,-e.y-d.y));this.rotateElement(this.sideAPosition,"100% 100%",rotate(-a)+translate(e.x+b.x-d.x,-e.y-d.y+b.y));this.rotateElement(this.sideA.getSide(),"100% 100%",translate(-this.width,-this.height)+rotate(2*(a-90)));break;case "br":this.rotateElement(this.mask,"0% 100%",translate(e.x+d.x,e.y+this.height-this.maskWidth+d.y)+rotate(-a)),this.rotateElement(this.sideAPosition,
"0% 100%",rotate(a)+translate(-e.x-d.x,-e.y-d.y)),this.rotateElement(this.sideBPosition,"0% 100%",rotate(a)+translate(-e.x+b.x-d.x,-e.y+b.y-d.y)),this.rotateElement(this.sideB.getSide(),"0% 100%",translate(0,-this.height)+rotate(2*(90-a)))}}};normalPage.prototype.flipToAnPoint=function(a,b,c){this.beginFlip(c);this.flipToPoint(a,b,!0);"tl"==c||"bl"==c?this.setSideUp(!0):this.setSideUp(!1)};
normalPage.prototype.endFlip=function(){this.hideShadow();this.pageStatu=this.isLeft()?!1:!0;this.sideA.showGray();this.sideB.showGray();flipBook.normalBookShadow.showShadow()};
normalPage.prototype.hardFlip=function(a,b){var c=!1;if("tl"==this.corner||"bl"==this.corner)c=!0;var d=c?a-this.width:a;d<-this.width&&(d=-this.width);d>=this.width&&(d=this.width);d=180*Math.acos(d/this.width)/Math.PI;c?(b&&(this.sideA.imgFlipOver(!0),this.page.css({"-webkit-perspective-origin":"right center","-webkit-transform-origin":"100% 50%","-webkit-transform-style":"preserve-3d","-moz-perspective-origin":"right center","-moz-transform-origin":"100% 50%","-moz-transform-style":"preserve-3d",
"z-index":20})),d=180-d,this.page.css({"-webkit-transform":"perspective(3000px) rotateY("+d+"deg) translate3d(0px,0px,-1px)","-moz-transform":"perspective(3000px) rotateY("+d+"deg)"}),90<=d?this.setSideUp(!0):this.setSideUp(!1)):(b&&(this.sideB.imgFlipOver(!0),this.page.css({"-webkit-perspective-origin":"left center","-webkit-transform-origin":"0% 50%","-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-moz-perspective-origin":"left center","-moz-transform-origin":"0% 50%",
"z-index":20})),this.page.css({"-webkit-transform":"perspective(3000px) rotateY("+-d+"deg)","-moz-transform":"perspective(3000px) rotateY("+-d+"deg)"}),90<=d?this.setSideUp(!1):this.setSideUp(!0))};
normalPage.prototype.resetPage=function(a){this.isHardPage&&(this.sideA.imgFlipOver(!1),this.sideB.imgFlipOver(!1),!this.isLastPageReset&&this.pageIndex+1==totalPageCount?(this.isLastPageReset=!0,window.setTimeout(function(){this.page.css({"-webkit-transform-style":"flat","-moz-transform-style":"flat","-webkit-transform":"rotateY(0deg)","-moz-transform":"rotateY(0deg)","-o-transform":"rotateY(0deg)","-ms-transform":"rotateY(0deg)",transform:"rotateY(0deg)"})},10)):this.page.css({"-webkit-transform-style":"flat",
"-moz-transform-style":"flat","-webkit-transform":"rotateY(0deg)","-moz-transform":"rotateY(0deg)","-o-transform":"rotateY(0deg)","-ms-transform":"rotateY(0deg)",transform:"rotateY(0deg)"}));this.page.css({left:a?"0px":this.width+"px"});this.mask.css({top:"0px",left:"0px",bottom:"auto",right:"auto",width:this.width,height:this.height});this.rotateElement(this.mask,"0% 0%",translate(0,0)+rotate(0));this.sideAPosition.css({top:"0px",left:"0px",bottom:"auto",right:"auto"});this.sideBPosition.css({top:"0px",
left:"0px",bottom:"auto",right:"auto"});this.rotateElement(this.sideAPosition,"0% 0%",translate(0,0)+rotate(0));this.rotateElement(this.sideBPosition,"0% 0%",translate(0,0)+rotate(0));this.rotateElement(this.sideA.getSide(),"0% 0%",translate(0,0)+rotate(0));this.rotateElement(this.sideB.getSide(),"0% 0%",translate(0,0)+rotate(0))};normalPage.prototype.setSideUp=function(a){this.sideAPosition.css({"z-index":a?2:1});this.sideBPosition.css({"z-index":a?1:2})};
normalPage.prototype.rotateElement=function(a,b,c){a.css({"-webkit-transform-origin":b,"-moz-transform-origin":b,"-ms-transform-origin":b,"-o-transform-origin":b,"-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,"-o-transform":c})};normalPage.prototype.translateElement=function(a,b,c){a.css({"-webkit-transform":"translate("+b+"px,"+c+"px)","-moz-transform":"translate("+b+"px,"+c+"px)","-o-transform":"translate("+b+"px,"+c+"px)","-ms-transform":"translate("+b+"px,"+c+"px)"})};
normalPage.prototype.isTop=function(){return 0<=this.corner.indexOf("t")};normalPage.prototype.isLeft=function(){return 0<=this.corner.indexOf("l")};normalPage.prototype.isBottom=function(){return 0<=this.corner.indexOf("b")};normalPage.prototype.isRight=function(){return 0<=this.corner.indexOf("r")};normalPage.prototype.isCorner=function(a,b){var c=0;this.isTop()&&0==b&&c++;this.isBottom()&&b==this.height&&c++;this.isLeft()&&0==a&&c++;this.isRight()&&a==this.width&&c++;return 2==c};
normalPage.prototype.setPageVisible=function(a){a?(this.page.css({display:"block"}),this.pageVisible=!0):(this.page.css({display:"none"}),this.pageVisible=!1)};normalPage.prototype.getPageStatu=function(){return this.pageStatu};normalPage.prototype.setPageStatu=function(a){this.pageStatu=a};normalPage.prototype.showShadow=function(){this.flipFrontShadow.css({display:"block"});this.flipBackShadow.css({display:"block"})};
normalPage.prototype.hideShadow=function(){this.flipFrontShadow.css({display:"none"});this.flipBackShadow.css({display:"none"})};normalPage.prototype.setCSS=function(a){this.page.css(a)};function rightToLeftNormalPage(){normalPage.call(this)}$.extend(rightToLeftNormalPage.prototype,normalPage.prototype);
rightToLeftNormalPage.prototype.create=function(a){this.page=$("<div class='paper'></div>");this.mask=$("<div class='pageMask'></div>");this.sideAPosition=$("<div class='sidePosition'></div>");this.sideBPosition=$("<div class='sidePosition'></div>");this.flipBackShadow=$("<div class='backShadow'></div>");this.flipFrontShadow=$("<div class='frontShadow'></div>");this.sideA=new normalSide(this.sideAPosition,!0);this.sideB=new normalSide(this.sideBPosition,!1);this.page.append(this.flipBackShadow);a.append(this.page);
this.page.append(this.mask);this.mask.append(this.sideAPosition);this.mask.append(this.sideBPosition);this.sideAPosition.append(this.sideA.side);this.sideBPosition.append(this.sideB.side)};
rightToLeftNormalPage.prototype.beginFlip=function(a){this.corner=a;this.isLeft()?(this.sideB.sideAddChild(this.flipFrontShadow),this.pageStatu=!0):(this.sideA.sideAddChild(this.flipFrontShadow),this.pageStatu=!1);3>=flipBook.gotoPageIndex&&flipBook.setLeftThicknessVisible(!1);flipBook.gotoPageIndex>=totalPageCount-2&&flipBook.setRightThicknessVisible(!1);this.mask.css({width:this.maskWidth+"px",height:this.maskWidth+"px"});flipBook.normalBookShadow.hideShadow()};
rightToLeftNormalPage.prototype.flipToPoint=function(a,b,c){if(this.isHardPage)this.hardFlip(a,c);else if(this.isCorner(a,b))this.resetPage(!this.isLeft());else{var d=computePoint(this.corner,a,b,this.width,this.height,this.maskWidth,this.flipFrontShadow,this.flipBackShadow),a=d.Angle,b=d.Df,e=d.NomovePoint,d=d.Mv,g=this.isLeft(),h=this.isBottom();c&&(this.showShadow(),this.page.css({left:g?"0px":this.width+"px"}),this.sideAPosition.css({right:g?"0px":"auto",left:g?"auto":"0px",top:h?"auto":"0px",
bottom:h?"0px":"auto"}),this.sideBPosition.css({right:g?"0px":"auto",left:g?"auto":"0px",top:h?"auto":"0px",bottom:h?"0px":"auto"}),this.setSideUp(!g),g?this.sideA.hideGray():this.sideB.hideGray());switch(this.corner){case "tl":this.rotateElement(this.mask,"100% 0%",translate(-e.x+this.width-this.maskWidth+d.x,-e.y+d.y)+rotate(-a));this.rotateElement(this.sideAPosition,"100% 0%",rotate(a)+translate(e.x-d.x,e.y-d.y));this.rotateElement(this.sideBPosition,"100% 0%",rotate(a)+translate(e.x+b.x-d.x,e.y+
b.y-d.y));this.rotateElement(this.sideB.side,"100% 0%",translate(-this.width,0)+rotate(2*(90-a)));break;case "tr":this.rotateElement(this.mask,"0% 0%",translate(e.x+d.x,-e.y+d.y)+rotate(a));this.rotateElement(this.sideBPosition,"0% 0%",rotate(-a)+translate(-e.x-d.x,e.y-d.y));this.rotateElement(this.sideAPosition,"0% 0%",rotate(-a)+translate(-e.x-d.x+b.x,e.y+b.y-d.y));this.rotateElement(this.sideA.getSide(),"0% 0%",translate(0,0)+rotate(2*(a-90)));break;case "bl":this.rotateElement(this.mask,"100% 100%",
translate(-e.x+this.width-this.maskWidth+d.x,e.y+this.height-this.maskWidth+d.y)+rotate(a));this.rotateElement(this.sideAPosition,"100% 100%",rotate(-a)+translate(e.x-d.x,-e.y-d.y));this.rotateElement(this.sideBPosition,"100% 100%",rotate(-a)+translate(e.x+b.x-d.x,-e.y-d.y+b.y));this.rotateElement(this.sideB.getSide(),"100% 100%",translate(-this.width,-this.height)+rotate(2*(a-90)));break;case "br":this.rotateElement(this.mask,"0% 100%",translate(e.x+d.x,e.y+this.height-this.maskWidth+d.y)+rotate(-a)),
this.rotateElement(this.sideBPosition,"0% 100%",rotate(a)+translate(-e.x-d.x,-e.y-d.y)),this.rotateElement(this.sideAPosition,"0% 100%",rotate(a)+translate(-e.x+b.x-d.x,-e.y+b.y-d.y)),this.rotateElement(this.sideA.getSide(),"0% 100%",translate(0,-this.height)+rotate(2*(90-a)))}}};
rightToLeftNormalPage.prototype.hardFlip=function(a,b){var c=!1;if("tl"==this.corner||"bl"==this.corner)c=!0;var d=c?a-this.width:a;d<-this.width&&(d=-this.width);d>=this.width&&(d=this.width);d=180*Math.acos(d/this.width)/Math.PI;c?(b&&(this.sideB.imgFlipOver(!0),this.page.css({"-webkit-perspective-origin":"right center","-webkit-transform-origin":"100% 50%","-webkit-transform-style":"preserve-3d","-moz-perspective-origin":"right center","-moz-transform-origin":"100% 50%","-moz-transform-style":"preserve-3d",
"z-index":20})),d=180-d,this.page.css({"-webkit-transform":"perspective(3000px) rotateY("+d+"deg) translate3d(0px,0px,-1px)","-moz-transform":"perspective(3000px) rotateY("+d+"deg)"}),90<=d?this.setSideUp(!1):this.setSideUp(!0)):(b&&(this.sideA.imgFlipOver(!0),this.page.css({"-webkit-perspective-origin":"left center","-webkit-transform-origin":"0% 50%","-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-moz-perspective-origin":"left center","-moz-transform-origin":"0% 50%",
"z-index":20})),this.page.css({"-webkit-transform":"perspective(3000px) rotateY("+-d+"deg)","-moz-transform":"perspective(3000px) rotateY("+-d+"deg)"}),90<=d?this.setSideUp(!0):this.setSideUp(!1))};
rightToLeftNormalPage.prototype.resetPage=function(a){this.isHardPage&&(this.sideA.imgFlipOver(!1),this.sideB.imgFlipOver(!1),!this.isLastPageReset&&this.pageIndex+1==totalPageCount?(this.isLastPageReset=!0,window.setTimeout(function(){this.page.css({"-webkit-transform-style":"flat","-moz-transform-style":"flat","-webkit-transform":"rotateY(0deg)","-moz-transform":"rotateY(0deg)","-o-transform":"rotateY(0deg)","-ms-transform":"rotateY(0deg)",transform:"rotateY(0deg)"})},10)):this.page.css({"-webkit-transform-style":"flat",
"-moz-transform-style":"flat","-webkit-transform":"rotateY(0deg)","-moz-transform":"rotateY(0deg)","-o-transform":"rotateY(0deg)","-ms-transform":"rotateY(0deg)",transform:"rotateY(0deg)"}));this.page.css({left:!a?"0px":this.width+"px"});this.mask.css({top:"0px",left:"0px",bottom:"auto",right:"auto",width:this.width,height:this.height});this.rotateElement(this.mask,"0% 0%",translate(0,0)+rotate(0));this.sideAPosition.css({top:"0px",left:"0px",bottom:"auto",right:"auto"});this.sideBPosition.css({top:"0px",
left:"0px",bottom:"auto",right:"auto"});this.rotateElement(this.sideAPosition,"0% 0%",translate(0,0)+rotate(0));this.rotateElement(this.sideBPosition,"0% 0%",translate(0,0)+rotate(0));this.rotateElement(this.sideA.getSide(),"0% 0%",translate(0,0)+rotate(0));this.rotateElement(this.sideB.getSide(),"0% 0%",translate(0,0)+rotate(0))};var bookMouseDown=!1,nBookStatu=0;function normalBook(){this.pageWidth=300;this.pageHeight=400;this.width=600;this.height=400;this.maskWidth=500;this.gotoPageIndex=this.currentPageIndex=this.betweenPaperCount=1;this.intervalID=this.flipToPage=this.flippingPage=null;this.flipPoint=Point(0,0)}
normalBook.prototype.create=function(a){this.flipBook=$("<div class='flipBook' id='flipBook'></div>");this.previousPage=new normalPage;this.previousPage.create(this.flipBook);this.currentPage=new normalPage;this.currentPage.create(this.flipBook);this.currentPage2=new normalPage;this.currentPage2.create(this.flipBook);this.nextPage=new normalPage;this.nextPage.create(this.flipBook);this.leftThickness=thickness(!0);this.rightThickness=thickness(!1);this.normalBookShadow=new bookShadow(this.pageWidth,
this.pageHeight,this.flipBook);a.append(this.flipBook);this.flipBook.append(this.leftThickness);this.flipBook.append(this.rightThickness);this.currentPageIndex=oriPageIndex;this.fillNearPage(this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!0);3>=this.currentPageIndex&&this.leftThickness.setVisible(!1);this.currentPageIndex>=totalPageCount-2&&this.rightThickness.setVisible(!1);this.resetPageZIndex();this.initBookEvent()};
normalBook.prototype.onResize=function(a,b){this.width=2*a;this.height=b;this.pageWidth=a;this.pageHeight=b;this.maskWidth=Math.sqrt(a*a+b*b);this.flipBook.css({width:this.width+"px",height:this.height+"px"});this.previousPage.onResize(a,b,this.maskWidth,0);this.currentPage.onResize(a,b,this.maskWidth,0);this.currentPage2.onResize(a,b,this.maskWidth,a);this.nextPage.onResize(a,b,this.maskWidth,a);this.leftThickness.onResize(15,b);this.rightThickness.onResize(15,b);normalEventRadius=Math.pow(Math.ceil(a/
3),2);this.normalBookShadow.onResize(this.pageWidth,this.pageHeight,1!=this.currentPageIndex&&this.currentPageIndex!=totalPageCount);this.normalBookShadow.setPosition(1==this.currentPageIndex?a:0,0)};normalBook.prototype.getCurrentPageIndex=function(){return this.currentPageIndex};normalBook.prototype.getPageWidth=function(a){if(void 0==a)return this.pageWidth;this.pageWidth=a};normalBook.prototype.getPageHeight=function(a){if(void 0==a)return this.pageHeight;this.pageHeight=a};
normalBook.prototype.getWidth=function(){return this.width};normalBook.prototype.getHeight=function(){return this.height};normalBook.prototype.getLeft=function(){return this.flipBook.offset().left};normalBook.prototype.getTop=function(){return this.flipBook.offset().top};normalBook.prototype.setCSS=function(a){this.flipBook.css(a)};normalBook.prototype.setPosition=function(a,b,c){void 0==c&&(c=["left","top"]);this.flipBook.css(c[0],a+"px");this.flipBook.css(c[1],b+"px")};
normalBook.prototype.timer=function(a,b,c,d,e,g,h,j){void 0==h&&(h=!1);void 0==j&&(j=!1);var k=0<=a.indexOf("l"),o=0<=a.indexOf("t");h||(this.currentPage.setCSS({"z-index":k?7:6}),this.currentPage2.setCSS({"z-index":k?6:7}));flipping=!0;stopFlip=!1;var r=(d.y-e.y)/b,n=0,t=getSpeedArray((d.x-e.x)/b,b),y=getSpeedArray(r,b);Point(0,0);var m=this;this.intervalID=setInterval(function(){n++;m.flipPoint.x=e.x;m.flipPoint.y=e.y;for(var c=0;c<n;c++){m.flipPoint.x=m.flipPoint.x+t[c];m.flipPoint.y=m.flipPoint.y+
y[c]}if(g)m.flipPoint.y=0.2*Math.sqrt(Math.pow(m.pageWidth,2)-Math.pow(k?m.flipPoint.x-m.pageWidth:m.flipPoint.x,2));if(n==b)m.flipPoint=d;if(stopFlip){window.clearInterval(m.intervalID);m.betweenPaperCount=k?-1:1;m.gotoPageIndex=k?Math.floor(m.currentPageIndex/2-1)*2+1:Math.floor(m.currentPageIndex/2+1)*2;c=Point(k?2*m.pageWidth:-m.pageWidth,o?0:m.pageHeight);m.timer(a,6,30,c,m.flipPoint,false,true,true);auto_player.resetTimer()}else{m.flippingPage.flipToPoint(m.flipPoint.x,m.flipPoint.y,n==1);if(n>=
b){_rimFlip.isRimFlip||auto_player.resetTimer();window.clearInterval(m.intervalID);flipping=false;if(j||g){m.flippingPage.endFlip();m.afterGotoPage()}else if(h||!_rimFlip.isRimFlip)if(h){if(!g&&!j){nBookStatu=normalBookStatu.book_statu_ready;m.flippingPage.setSideUp(m.flippingPage.isLeft()?false:true);m.currentPageIndex>3&&!m.leftThickness.visible&&m.leftThickness.setVisible(true);m.currentPageIndex<totalPageCount-2&&!m.rightThickness.visible&&m.rightThickness.setVisible(true);if(m.currentPageIndex==
1){m.normalBookShadow.onResize(m.pageWidth,m.pageHeight,false);m.normalBookShadow.setPosition(m.pageWidth,0)}else{if(m.currentPageIndex==totalPageCount)m.normalBookShadow.onResize(m.pageWidth,m.pageHeight,false);else m.normalBookShadow.onResize(m.pageWidth,m.pageHeight,true);m.normalBookShadow.setPosition(0,0)}m.normalBookShadow.showShadow()}}else bookMouseDown=true}}},c)};
normalBook.prototype.gotoPage=function(a){if(1>a||a>totalPageCount)_tipsBox.setCaption(1>a?"This is the first page":"This is the last page"),_tipsBox.showTipsBox();else if(0==nBookStatu&&this.setGotoPage(a)){a==totalPageCount&&this.nextPage.setPageVisible(!1);1==a&&this.previousPage.setPageVisible(!1);_rimFlip.removeRimFlip();nBookStatu=normalBookStatu.book_statu_auto_flip;this.gotoPageIndex=a;if(0<this.betweenPaperCount)var a=Point(this.pageWidth,0),b=Point(-this.pageWidth,0),c="tr";else a=Point(0,
0),b=Point(2*this.pageWidth,0),c="tl";this.flippingPage.setCSS({"z-index":7});this.flippingPage.beginFlip(c);this.timer(c,20,30,b,a,!0)}};normalBook.prototype.stopTimer=function(){window.clearInterval(this.intervalID)};
normalBook.prototype.afterGotoPage=function(){this.currentPageIndex=this.gotoPageIndex;this.currentPage.getSideB().leaveSide();this.currentPage2.getSideA().leaveSide();this.changePage();if(1==this.currentPageIndex)this.normalBookShadow.onResize(this.pageWidth,this.pageHeight,!1),this.normalBookShadow.setPosition(this.pageWidth,0);else{if(this.currentPageIndex==totalPageCount)this.normalBookShadow.onResize(this.pageWidth,this.pageHeight,!1);else this.normalBookShadow.onResize(this.pageWidth,this.pageHeight,
!0);this.normalBookShadow.setPosition(0,0)}setCurrentIndexTextField(this.currentPageIndex,!0);var a=this;window.setTimeout(function(){nBookStatu=normalBookStatu.book_statu_ready;resizeBookAfterFlip&&onStageResize();3<a.currentPageIndex&&!a.leftThickness.visible&&a.leftThickness.setVisible(!0);a.currentPageIndex<totalPageCount-2&&!a.rightThickness.visible&&a.rightThickness.setVisible(!0);a.fillNearPage(a.currentPageIndex);a.resetPageZIndex();thumbnail.clearHighLight();thumbnail.setHighLight(a.currentPageIndex);
a.currentPage.getSideB().enterSide();a.currentPage2.getSideA().enterSide();window.location.hash="#p="+a.currentPageIndex},30)};
normalBook.prototype.changePage=function(){var a;1==this.betweenPaperCount?(a=this.nextPage,this.nextPage=this.previousPage,this.previousPage=this.currentPage,this.currentPage=this.currentPage2,this.currentPage2=a):-1==this.betweenPaperCount?(a=this.previousPage,this.previousPage=this.nextPage,this.nextPage=this.currentPage2,this.currentPage2=this.currentPage,this.currentPage=a):2==this.betweenPaperCount||-2==this.betweenPaperCount?(a=this.previousPage,this.previousPage=this.currentPage2,this.currentPage2=
a,a=this.currentPage,this.currentPage=this.nextPage,this.nextPage=a):-2>this.betweenPaperCount?(a=this.nextPage,this.nextPage=this.currentPage2,this.currentPage2=this.currentPage,this.currentPage=a):2<this.betweenPaperCount&&(a=this.currentPage,this.currentPage=this.currentPage2,this.currentPage2=this.previousPage,this.previousPage=a)};normalBook.prototype.setLeftThicknessVisible=function(a){this.leftThickness.setVisible(a)};normalBook.prototype.setRightThicknessVisible=function(a){this.rightThickness.setVisible(a)};
normalBook.prototype.setThicknessPosition=function(){this.leftThickness.setThicknessPosition(-14,0);this.rightThickness.setThicknessPosition(2*this.pageWidth-1,0)};normalBook.prototype.resetPageZIndex=function(){this.currentPage.setCSS({"z-index":4});this.currentPage2.setCSS({"z-index":5});this.nextPage.setCSS({"z-index":3});this.previousPage.setCSS({"z-index":2})};normalBook.prototype.fillAnPage=function(a,b){a.fillSideA(2*b-1);a.fillSideB(2*b)};
normalBook.prototype.fillNearPage=function(a){var b=Math.floor(a/2);3<a?(this.previousPage.setPageVisible(!0),this.previousPage.resetPage(!0),this.previousPage.setSideUp(!1),this.fillAnPage(this.previousPage,b-1)):this.previousPage.setPageVisible(!1);1<a?(this.currentPage.setPageVisible(!0),this.currentPage.resetPage(!0),this.currentPage.setSideUp(!1),this.fillAnPage(this.currentPage,b)):this.currentPage.setPageVisible(!1);2*Math.floor(a/2)+1<totalPageCount?(this.currentPage2.setPageVisible(!0),this.currentPage2.resetPage(!1),
this.currentPage2.setSideUp(!0),this.fillAnPage(this.currentPage2,b+1)):this.currentPage2.setPageVisible(!1);2*Math.floor(a/2)+3<totalPageCount?(this.nextPage.setPageVisible(!0),this.nextPage.resetPage(!1),this.nextPage.setSideUp(!0),this.fillAnPage(this.nextPage,b+2)):this.nextPage.setPageVisible(!1)};
normalBook.prototype.setGotoPage=function(a){var b,c;this.currentPageIndex>a?(b=Math.floor(a/2),c=Math.floor(this.currentPageIndex/2),this.flippingPage=this.currentPage,1<c-b?(this.flipToPage=this.nextPage,this.flipToPage.resetPage(!0),this.flipToPage.setSideUp(!1),this.flipToPage.setCSS({"z-index":6}),this.flippingPage.fillSideA(2*b+1),this.flipToPage.fillSideA(2*b-1),this.flipToPage.fillSideB(2*b)):this.flipToPage=this.previousPage,1!=a?this.flipToPage.setPageVisible(!0):this.flipToPage.setPageVisible(!1)):
(b=Math.floor(a/2)+1,c=Math.floor(this.currentPageIndex/2)+1,this.flippingPage=this.currentPage2,1<b-c?(this.flipToPage=this.previousPage,this.flipToPage.resetPage(!1),this.flipToPage.setSideUp(!0),this.flipToPage.setCSS({"z-index":6}),this.flippingPage.fillSideB(2*b-2),this.flipToPage.fillSideA(2*b-1),this.flipToPage.fillSideB(2*b)):this.flipToPage=this.nextPage,a!=totalPageCount?this.flipToPage.setPageVisible(!0):this.flipToPage.setPageVisible(!1));this.betweenPaperCount=b-c;return b!=c};
normalBook.prototype.pointInPage=function(a,b,c){return 0<=a.x&&a.x<=b&&0<=a.y&&a.y<=c?"left":a.x<=2*b&&a.x>=b&&0<=a.y&&a.y<=c?"right":!1};
normalBook.prototype.initBookEvent=function(){var a=this,b=-1,c=void 0,d,e;this.twoFingerDown=!1;this.flipBook.bind(_event._down,function(b){b=isTouch?b.originalEvent.touches:[b];if(2==b.length){if(nBookStatu==normalBookStatu.book_statu_mouse_flip){var c;"tl"==a.flippingPage.corner?c=Point(0,0):"tr"==a.flippingPage.corner?c=Point(a.pageWidth,0):"bl"==a.flippingPage.corner?c=Point(0,a.pageHeight):"br"==a.flippingPage.corner&&(c=Point(a.pageWidth,a.pageHeight));window.clearInterval(a.intervalID);a.timer(a.flippingPage.corner,
6,30,c,a.flipPoint,!1,!0)}d=globalToBook(!0,b[0].pageX,b[0].pageY);e=globalToBook(!0,b[1].pageX,b[1].pageY);b=a.pointInPage(d,a.pageWidth,a.pageHeight);c=a.pointInPage(e,a.pageWidth,a.pageHeight);b==c&&b&&(a.twoFingerDown=b);bookMouseDown=!1}else{if(nBookStatu==normalBookStatu.book_statu_ready){b=globalToBook(!0,b[0].pageX,b[0].pageY);if(0>b.x||b.x>a.width||0>b.y||b.y>a.height)return;var j;if(Math.pow(b.x,2)+Math.pow(b.y,2)<normalEventRadius){if(c="tl",j=Point(0,0),a.flippingPage=a.currentPage,a.gotoPageIndex=
2*Math.floor(a.currentPageIndex/2)-1,1==a.currentPageIndex)return}else if(Math.pow(2*a.pageWidth-b.x,2)+Math.pow(b.y,2)<normalEventRadius){if(c="tr",b.x-=a.pageWidth,j=Point(a.pageWidth,0),a.flippingPage=a.currentPage2,a.gotoPageIndex=2*Math.floor(a.currentPageIndex/2+1),a.currentPageIndex==totalPageCount)return}else if(Math.pow(b.x,2)+Math.pow(a.pageHeight-b.y,2)<normalEventRadius){if(c="bl",j=Point(0,a.pageHeight),a.flippingPage=a.currentPage,a.gotoPageIndex=2*Math.floor(a.currentPageIndex/2)-1,
1==a.currentPageIndex)return}else if(Math.pow(a.width-b.x,2)+Math.pow(a.height-b.y,2)<normalEventRadius){if(c="br",b.x-=a.pageWidth,j=Point(a.pageWidth,a.pageHeight),a.flippingPage=a.currentPage2,a.gotoPageIndex=2*Math.floor(a.currentPageIndex/2+1),a.currentPageIndex==totalPageCount)return}else return;_rimFlip.removeRimFlip();nBookStatu=normalBookStatu.book_statu_mouse_flip;a.flippingPage.beginFlip(c);a.timer(c,6,30,b,j,!1,!1)}return!1}});bookContainer.bind(_event._move,function(g){g=isTouch?g.originalEvent.touches:
[g];if(2==g.length&&a.twoFingerDown){var h=globalToBook(!0,g[0].pageX,g[0].pageY),g=globalToBook(!0,g[1].pageX,g[1].pageY);if(15<Math.abs(h.x-d.x)||15<Math.abs(h.y-d.y)||15<Math.abs(g.x-e.x)||15<Math.abs(g.y-e.y)){var j;"left"==a.twoFingerDown?j=2*Math.floor(a.currentPageIndex/2):"right"==a.twoFingerDown&&(j=2*Math.floor(a.currentPageIndex/2)+1);zoomBook.currentIndex=j;zoomBook.showPage.fillContent(zoomBook.currentIndex);changeShowBook(2);bookType=2;$("#zoomImg").attr("src",uiBaseURL+"ZoomOut.png");
$("#btnZoom").attr("title","Zoom Out");setCurrentIndexTextField(zoomBook.currentIndex,!1);thumbnail.clearHighLight();thumbnail.setHighLight(zoomBook.currentIndex)}return!1}bookMouseDown&&(h=globalToBook(a.flippingPage.isLeft(),g[0].pageX,g[0].pageY),a.flippingPage.flipToPoint(h.x,h.y,!1),-1!=b&&(c=h.x>b?!1:!0),b=h.x);return!1});bookContainer.bind(_event._end,function(b){b=isTouch?b.originalEvent.changedTouches:[b];if(bookMouseDown){a.twoFingerDown=!1;var b=globalToBook(a.flippingPage.isLeft(),b[0].pageX,
b[0].pageY),d,e,k=!0;if(a.flippingPage.isLeft()&&b.x>=a.pageWidth||!a.flippingPage.isLeft()&&0>=b.x)k=!1;void 0!=c&&(k=!(a.flippingPage.isLeft()^c));k||(a.gotoPageIndex=a.flippingPage.isLeft()?2*Math.floor(a.currentPageIndex/2-1)+1:2*Math.floor(a.currentPageIndex/2+1),a.betweenPaperCount=a.flippingPage.isLeft()?-1:1);d=Point(a.flippingPage.isLeft()?0:a.pageWidth,a.flippingPage.isTop()?0:a.pageHeight);e=Point(a.flippingPage.isLeft()?2*a.pageWidth:-a.pageWidth,a.flippingPage.isTop()?0:a.pageHeight);
a.timer(a.flippingPage.corner,6,30,k?d:e,b,!1,!0,!k);bookMouseDown=!1}else flipping&&2==nBookStatu&&(stopFlip=!0)})};function rightToLeftNormalBook(){normalBook.call(this)}$.extend(rightToLeftNormalBook.prototype,normalBook.prototype);
rightToLeftNormalBook.prototype.create=function(a){this.flipBook=$("<div class='flipBook' id='flipBook'></div>");this.previousPage=new rightToLeftNormalPage;this.previousPage.create(this.flipBook);this.currentPage=new rightToLeftNormalPage;this.currentPage.create(this.flipBook);this.currentPage2=new rightToLeftNormalPage;this.currentPage2.create(this.flipBook);this.nextPage=new rightToLeftNormalPage;this.nextPage.create(this.flipBook);this.leftThickness=thickness(!1);this.rightThickness=thickness(!0);
this.normalBookShadow=new bookShadow(this.pageWidth,this.pageHeight,this.flipBook);a.append(this.flipBook);this.flipBook.append(this.leftThickness);this.flipBook.append(this.rightThickness);this.currentPageIndex=oriPageIndex;this.fillNearPage(this.currentPageIndex);setCurrentIndexTextField(this.currentPageIndex,!0);3>=this.currentPageIndex&&this.leftThickness.setVisible(!1);this.currentPageIndex>=totalPageCount-2&&this.rightThickness.setVisible(!1);this.resetPageZIndex();this.initBookEvent()};
rightToLeftNormalBook.prototype.onResize=function(a,b){this.width=2*a;this.height=b;this.pageWidth=a;this.pageHeight=b;this.maskWidth=Math.sqrt(a*a+b*b);this.flipBook.css({width:this.width+"px",height:this.height+"px"});this.previousPage.onResize(a,b,this.maskWidth,0);this.currentPage.onResize(a,b,this.maskWidth,0);this.currentPage2.onResize(a,b,this.maskWidth,0);this.nextPage.onResize(a,b,this.maskWidth,0);this.leftThickness.onResize(15,b);this.rightThickness.onResize(15,b);normalEventRadius=Math.pow(Math.ceil(a/
3),2);this.normalBookShadow.onResize(this.pageWidth,this.pageHeight,1!=this.currentPageIndex&&this.currentPageIndex!=totalPageCount);this.normalBookShadow.setPosition(this.currentPageIndex==totalPageCount?a:0,0)};rightToLeftNormalBook.prototype.setThicknessPosition=function(){this.leftThickness.setThicknessPosition(2*this.pageWidth-1,0);this.rightThickness.setThicknessPosition(-14,0)};
rightToLeftNormalBook.prototype.gotoPage=function(a){if(1>a||a>totalPageCount)_tipsBox.setCaption(1>a?"This is the first page":"This is the last page"),_tipsBox.showTipsBox();else if(0==nBookStatu&&this.setGotoPage(a)){a==totalPageCount&&this.nextPage.setPageVisible(!1);1==a&&this.previousPage.setPageVisible(!1);_rimFlip.removeRimFlip();nBookStatu=normalBookStatu.book_statu_auto_flip;this.gotoPageIndex=a;if(0<this.betweenPaperCount)var a=Point(0,0),b=Point(2*this.pageWidth,0),c="tl";else a=Point(this.pageWidth,
0),b=Point(-this.pageWidth,0),c="tr";this.flippingPage.setCSS({"z-index":7});this.flippingPage.beginFlip(c);this.timer(c,20,30,b,a,!0)}};
rightToLeftNormalBook.prototype.timer=function(a,b,c,d,e,g,h,j){void 0==h&&(h=!1);void 0==j&&(j=!1);var k=0<=a.indexOf("l"),o=0<=a.indexOf("t");h||(this.currentPage.setCSS({"z-index":k?6:7}),this.currentPage2.setCSS({"z-index":k?7:6}));flipping=!0;stopFlip=!1;var r=(d.y-e.y)/b,n=0,t=getSpeedArray((d.x-e.x)/b,b),y=getSpeedArray(r,b);Point(0,0);var m=this;this.intervalID=setInterval(function(){n++;m.flipPoint.x=e.x;m.flipPoint.y=e.y;for(var c=0;c<n;c++){m.flipPoint.x=m.flipPoint.x+t[c];m.flipPoint.y=
m.flipPoint.y+y[c]}if(g)m.flipPoint.y=0.2*Math.sqrt(Math.pow(m.pageWidth,2)-Math.pow(k?m.flipPoint.x-m.pageWidth:m.flipPoint.x,2));if(n==b)m.flipPoint=d;if(stopFlip){window.clearInterval(m.intervalID);m.betweenPaperCount=k?1:-1;m.gotoPageIndex=k?Math.floor(m.currentPageIndex/2+1)*2:Math.floor(m.currentPageIndex/2-1)*2+1;c=Point(k?2*m.pageWidth:-m.pageWidth,o?0:m.pageHeight);m.timer(a,6,30,c,m.flipPoint,false,true,true);auto_player.resetTimer()}else{m.flippingPage.flipToPoint(m.flipPoint.x,m.flipPoint.y,
n==1);if(n>=b){_rimFlip.isRimFlip||auto_player.resetTimer();window.clearInterval(m.intervalID);flipping=false;if(j||g){m.flippingPage.endFlip();m.afterGotoPage()}else if(h||!_rimFlip.isRimFlip)if(h){if(!g&&!j){nBookStatu=normalBookStatu.book_statu_ready;m.flippingPage.setSideUp(m.flippingPage.isLeft()?true:false);m.currentPageIndex>3&&!m.leftThickness.visible&&m.leftThickness.setVisible(true);m.currentPageIndex<totalPageCount-2&&!m.rightThickness.visible&&m.rightThickness.setVisible(true);if(m.currentPageIndex==
1){m.normalBookShadow.onResize(m.pageWidth,m.pageHeight,false);m.normalBookShadow.setPosition(0,0)}else if(m.currentPageIndex==totalPageCount){m.normalBookShadow.onResize(m.pageWidth,m.pageHeight,false);m.normalBookShadow.setPosition(m.pageWidth,0)}else{m.normalBookShadow.onResize(m.pageWidth,m.pageHeight,true);m.normalBookShadow.setPosition(0,0)}m.normalBookShadow.showShadow()}}else bookMouseDown=true}}},c)};
rightToLeftNormalBook.prototype.afterGotoPage=function(){this.currentPageIndex=this.gotoPageIndex;this.currentPage.getSideB().leaveSide();this.currentPage2.getSideA().leaveSide();this.changePage();1==this.currentPageIndex?(this.normalBookShadow.onResize(this.pageWidth,this.pageHeight,!1),this.normalBookShadow.setPosition(0,0)):this.currentPageIndex==totalPageCount?(this.normalBookShadow.onResize(this.pageWidth,this.pageHeight,!1),this.normalBookShadow.setPosition(this.pageWidth,0)):(this.normalBookShadow.onResize(this.pageWidth,
this.pageHeight,!0),this.normalBookShadow.setPosition(0,0));setCurrentIndexTextField(this.currentPageIndex,!0);var a=this;window.setTimeout(function(){nBookStatu=normalBookStatu.book_statu_ready;resizeBookAfterFlip&&onStageResize();a.currentPageIndex>3&&!a.leftThickness.visible&&a.leftThickness.setVisible(true);a.currentPageIndex<totalPageCount-2&&!a.rightThickness.visible&&a.rightThickness.setVisible(true);a.fillNearPage(a.currentPageIndex);a.resetPageZIndex();thumbnail.clearHighLight();thumbnail.setHighLight(a.currentPageIndex);
a.currentPage.getSideB().enterSide();a.currentPage2.getSideA().enterSide();window.location.hash="#p="+a.currentPageIndex},30)};
rightToLeftNormalBook.prototype.initBookEvent=function(){var a=this,b=-1,c=void 0,d,e;this.twoFingerDown=!1;this.flipBook.bind(_event._down,function(b){b=isTouch?b.originalEvent.touches:[b];if(2==b.length){if(nBookStatu==normalBookStatu.book_statu_mouse_flip){var c;"tl"==a.flippingPage.corner?c=Point(0,0):"tr"==a.flippingPage.corner?c=Point(a.pageWidth,0):"bl"==a.flippingPage.corner?c=Point(0,a.pageHeight):"br"==a.flippingPage.corner&&(c=Point(a.pageWidth,a.pageHeight));window.clearInterval(a.intervalID);
a.timer(a.flippingPage.corner,6,30,c,a.flipPoint,!1,!0)}d=globalToBook(!0,b[0].pageX,b[0].pageY);e=globalToBook(!0,b[1].pageX,b[1].pageY);b=a.pointInPage(d,a.pageWidth,a.pageHeight);c=a.pointInPage(e,a.pageWidth,a.pageHeight);b==c&&b&&(a.twoFingerDown=b);bookMouseDown=!1}else{if(nBookStatu==normalBookStatu.book_statu_ready){b=globalToBook(!0,b[0].pageX,b[0].pageY);if(0>b.x||b.x>a.width||0>b.y||b.y>a.height)return;var j;if(Math.pow(b.x,2)+Math.pow(b.y,2)<normalEventRadius){if(c="tl",j=Point(0,0),a.flippingPage=
a.currentPage2,a.gotoPageIndex=2*Math.floor(a.currentPageIndex/2+1),a.currentPageIndex==totalPageCount)return}else if(Math.pow(2*a.pageWidth-b.x,2)+Math.pow(b.y,2)<normalEventRadius){if(c="tr",b.x-=a.pageWidth,j=Point(a.pageWidth,0),a.flippingPage=a.currentPage,a.gotoPageIndex=2*Math.floor(a.currentPageIndex/2)-1,1==a.currentPageIndex)return}else if(Math.pow(b.x,2)+Math.pow(a.pageHeight-b.y,2)<normalEventRadius){if(c="bl",j=Point(0,a.pageHeight),a.flippingPage=a.currentPage2,a.gotoPageIndex=2*Math.floor(a.currentPageIndex/
2+1),a.currentPageIndex==totalPageCount)return}else if(Math.pow(a.width-b.x,2)+Math.pow(a.height-b.y,2)<normalEventRadius){if(c="br",b.x-=a.pageWidth,j=Point(a.pageWidth,a.pageHeight),a.flippingPage=a.currentPage,a.gotoPageIndex=2*Math.floor(a.currentPageIndex/2)-1,1==a.currentPageIndex)return}else return;_rimFlip.removeRimFlip();nBookStatu=normalBookStatu.book_statu_mouse_flip;a.flippingPage.beginFlip(c);a.timer(c,6,30,b,j,!1,!1)}return!1}});bookContainer.bind(_event._move,function(g){g=isTouch?
g.originalEvent.touches:[g];if(2==g.length&&a.twoFingerDown){var h=globalToBook(!0,g[0].pageX,g[0].pageY),g=globalToBook(!0,g[1].pageX,g[1].pageY);if(15<Math.abs(h.x-d.x)||15<Math.abs(h.y-d.y)||15<Math.abs(g.x-e.x)||15<Math.abs(g.y-e.y)){var j;"left"==a.twoFingerDown?j=2*Math.floor(a.currentPageIndex/2)+1:"right"==a.twoFingerDown&&(j=2*Math.floor(a.currentPageIndex/2));zoomBook.currentIndex=j;zoomBook.showPage.fillContent(zoomBook.currentIndex);changeShowBook(2);bookType=2;$("#zoomImg").attr("src",
uiBaseURL+"ZoomOut.png");$("#btnZoom").attr("title","Zoom Out");setCurrentIndexTextField(zoomBook.currentIndex,!1);thumbnail.clearHighLight();thumbnail.setHighLight(zoomBook.currentIndex)}}else bookMouseDown&&(h=globalToBook(a.flippingPage.isLeft(),g[0].pageX,g[0].pageY),a.flippingPage.flipToPoint(h.x,h.y,!1),-1!=b&&(c=h.x>b?!1:!0),b=h.x)});bookContainer.bind(_event._end,function(b){b=isTouch?b.originalEvent.changedTouches:[b];if(bookMouseDown){a.twoFingerDown=!1;var b=globalToBook(a.flippingPage.isLeft(),
b[0].pageX,b[0].pageY),d,e,k=!0;if(a.flippingPage.isLeft()&&b.x>=a.pageWidth||!a.flippingPage.isLeft()&&0>=b.x)k=!1;void 0!=c&&(k=!(a.flippingPage.isLeft()^c));k||(a.gotoPageIndex=a.flippingPage.isLeft()?2*Math.floor(a.currentPageIndex/2+1):2*Math.floor(a.currentPageIndex/2-1)+1,a.betweenPaperCount=a.flippingPage.isLeft()?1:-1);d=Point(a.flippingPage.isLeft()?0:a.pageWidth,a.flippingPage.isTop()?0:a.pageHeight);e=Point(a.flippingPage.isLeft()?2*a.pageWidth:-a.pageWidth,a.flippingPage.isTop()?0:a.pageHeight);
a.timer(a.flippingPage.corner,6,30,k?d:e,b,!1,!0,!k);bookMouseDown=!1}else flipping&&2==nBookStatu&&(stopFlip=!0)})};var _singleBook,singleBookShadow;
function singleBook(){var a=$(this).data(),b;a.previousPage=$("#singlePrePage");a.currentPage=$("#singleCurPage");a.nextPage=$("#singleNextPage");a.thickness=thickness(rightToLeft);a.flippingPage={};a.flipToPage={};a.currentPageIndex=1;a.pageWidth=768;a.pageHeight=1024;a.maskWidth=1280;a.bookStatu=0;a.differPageNum=0;a.gotoPageIndex=0;a.bookMouseDown=!1;a.isLeft=!1;a.isTop=!1;singleBookShadow=new bookShadow(a.pageWidth,a.pageHeight,_singleBook);a.cssObj={top:"0px",left:"0px",position:"absolute"};
a.gotoPage=function(b){if(1>b||b>originTotalPageCount)_tipsBox.setCaption(1>b?"This is the first page":"This is the last page"),_tipsBox.showTipsBox();else if(!(a.currentPageIndex==b||0!=a.bookStatu)){_rimFlip.removeRimFlip();a.setGotoPage(b);a.bookStatu=1;a.gotoPageIndex=b;var b=Point(0,0),d,e=Point(0,0);0<a.differPageNum?rightToLeft?(b.x=0,b.y=0,e.x=2*a.pageWidth,e.y=0,d="tl"):(b.x=a.pageWidth,b.y=0,e.x=-a.pageWidth,e.y=0,d="tr"):rightToLeft?(b.x=2*a.pageWidth,b.y=0,e.x=0,e.y=0,d="tr"):(b.x=-a.pageWidth,
b.y=0,e.x=a.pageWidth,e.y=0,d="tl");a.flippingPage.beginFlip(d);a.timer(d,20,30,e,b,!0)}};a.setVisible=function(a){_singleBook.css("display",a?"block":"none")};a.changePage=function(){var b;0<a.differPageNum?(b=a.previousPage,a.previousPage=a.currentPage,a.currentPage=a.nextPage,a.nextPage=b):(b=a.nextPage,a.nextPage=a.currentPage,a.currentPage=a.previousPage,a.previousPage=b)};a.inPointInPage=function(a,b,e){return 0<=a.x&&a.x<=b&&0<=a.y&&a.y<=e?!0:!1};a.timer=function(c,d,e,g,h,j,k,o){void 0==k&&
(k=!1);void 0==o&&(o=!1);flipping=!0;stopFlip=!1;a.flipPoint=Point(0,0);var r=(g.y-h.y)/d,n=0,t=getSpeedArray((g.x-h.x)/d,d),y=getSpeedArray(r,d);Point(0,0);b=setInterval(function(){n++;a.flipPoint.x=h.x;a.flipPoint.y=h.y;for(var e=0;e<n;e++)a.flipPoint.x+=t[e],a.flipPoint.y+=y[e];j&&(a.flipPoint.y=rightToLeft?0.2*Math.sqrt(Math.pow(a.pageWidth,2)-Math.pow(a.flipPoint.x-a.pageWidth,2)):0.2*Math.sqrt(Math.pow(a.pageWidth,2)-Math.pow(a.flipPoint.x,2)));n==d&&(a.flipPoint=g);if(stopFlip){auto_player.resetTimer();
window.clearInterval(b);var e=0<=c.indexOf("l"),r=0<=c.indexOf("t");rightToLeft?(a.differPageNum=e?1:-1,a.gotoPageIndex=e?a.currentPageIndex+1:a.currentPageIndex-1,e=Point(e?2*a.pageWidth:0,r?0:a.pageHeight)):(a.differPageNum=e?-1:1,a.gotoPageIndex=e?a.currentPageIndex-1:a.currentPageIndex+1,e=Point(e?a.pageWidth:-a.pageWidth,r?0:a.pageHeight));a.timer(c,6,30,e,a.flipPoint,!1,!0,!0)}else if(e=1,0>a.flipPoint.x&&!rightToLeft&&(e=Math.min((a.flipPoint.x+a.pageWidth)/a.pageWidth+0.1,1),a.flippingPage.sideB.css("opacity",
e)),a.flipPoint.x>a.pageWidth&&rightToLeft&&(e=Math.min(Math.abs(a.flipPoint.x-2*a.pageWidth)/a.pageWidth+0.1,1),a.flippingPage.sideB.css("opacity",e)),a.flippingPage.flipToPoint(a.flipPoint,1==n),n>=d)if(_rimFlip.isRimFlip||auto_player.resetTimer(),window.clearInterval(b),j||o)a.flippingPage.endFlip(),a.afterGotoPage();else if(k||!_rimFlip.isRimFlip)k?!j&&!o&&(a.bookStatu=0,a.flippingPage.setSideAUp(!0),a.reset_z_index(),a.currentPageIndex!=originTotalPageCount&&a.thickness.showThickness()):a.bookMouseDown=
!0},e)};a.stopTimer=function(){window.clearInterval(b)};a.afterGotoPage=function(){a.currentPageIndex=a.gotoPageIndex;a.changePage();setCurrentIndexTextField(a.currentPageIndex,!1);window.setTimeout(function(){a.bookStatu=0;resizeBookAfterFlip&&onStageResize();a.currentPageIndex!=originTotalPageCount&&a.thickness.showThickness();a.fillNearPage(a.currentPageIndex);a.reset_z_index();a.flippingPage.resetPage();thumbnail.clearHighLight();thumbnail.setHighLight(a.currentPageIndex);window.location.hash=
"#p="+a.currentPageIndex},30)};a.setGotoPage=function(b){a.differPageNum=b-a.currentPageIndex;a.currentPageIndex>b?(a.flippingPage=a.previousPage,a.flipToPage=a.previousPage,a.fillAnPage(a.flipToPage,b,a.currentPageIndex-1)):(a.flippingPage=a.currentPage,a.flipToPage=a.nextPage,a.fillAnPage(a.flipToPage,b,b),a.flipToPage.css({"z-index":4}),a.flippingPage.css({"z-index":5}))};a.fillAnPage=function(a,b,e){a.resetPage();a.sideA.fillImg(b,!1);a.sideB.fillImg(e,!0);a.isHardPage=1==b&&hardPageEnable&&"msie"!=
browserType?!0:!1};a.fillNearPage=function(b){1<b&&a.fillAnPage(a.previousPage,b-1,b-1);a.fillAnPage(a.currentPage,b,b);b<originTotalPageCount&&a.fillAnPage(a.nextPage,b+1,b+1)};a.reset_z_index=function(){a.previousPage.css("z-index",1);a.currentPage.css("z-index",3);a.nextPage.css("z-index",2)};a.addSearch=function(){a.previousPage.addSearch();a.currentPage.addSearch();a.nextPage.addSearch()};a.clearSearch=function(){a.previousPage.clearSearch();a.currentPage.clearSearch();a.nextPage.clearSearch()}}
singleBook.prototype.setSingleBookVisible=function(a){_singleBook.css({display:a?"block":"none"})};singleBook.prototype.gotoAnPoint=function(a){$(this).data().gotoPage(a)};singleBook.prototype.Create=function(){var a=$(this).data();this.initPage(a.previousPage);this.initPage(a.currentPage);this.initPage(a.nextPage);a.fillNearPage(oriPageIndex);_singleBook.append(a.thickness);a.currentPageIndex=oriPageIndex;oriPageIndex>=originTotalPageCount-1&&a.thickness.setVisible(!1)};
singleBook.prototype.onResize=function(a,b){var c=$(this).data();c.maskWidth=Math.sqrt(Math.pow(a,2)+Math.pow(b,2));_singleBook.css({width:a+"px",height:b+"px"});c.previousPage.onResize(a,b);c.currentPage.onResize(a,b);c.nextPage.onResize(a,b);c.pageWidth=a;c.pageHeight=b;$("#singleBookMask").css({width:windowWidth+"px",height:windowHeight+"px"});c.thickness.onResize(15,b);c.thickness.setThicknessPosition(rightToLeft?-14:a-1,0);singleEventRadius=Math.pow(Math.ceil(a/3),2);singleBookShadow.onResize(a,
b,!1)};singleBook.prototype.setBookPosition=function(a,b){$("#singleBookMask").css({left:a+"px"});_singleBook.css({left:"0px",top:b+"px"})};
singleBook.prototype.initPage=function(a){var b=$(this).data();a.mask=$("<div style='position:absolute;top:0px;left:0px;overflow:hidden;'></div>");a.sidePositionA=$("<div style='position:absolute;top:0px;left:0px;'></div>");a.sidePositionB=$("<div style='position:absolute;top:0px;left:0px;'></div>");a.sideA=this.initSide(a,!0);a.sideB=this.initSide(a,!1);a.shadowA=$("<div style='position:absolute;top:0px;left:0px;display: none;'></div>");a.shadowB=$("<div style='position:absolute;top:0px;left:0px; display: none;'></div>");
a.corner="tr";a.realCorner="tr";_singleBook.append(a);a.append(a.shadowA);a.append(a.mask);a.mask.append(a.sidePositionB);a.mask.append(a.sidePositionA);a.sidePositionB.append(a.sideB);a.sidePositionA.append(a.sideA);a.sideB.append(a.shadowB);a.onResize=function(c,d){a.css({width:c+"px",height:d+"px"});a.mask.css({width:b.maskWidth+"px",height:b.maskWidth+"px"});a.shadowA.css({width:c+"px",height:d+"px"});a.shadowB.css({width:c+"px",height:d+"px"});a.sidePositionA.css({width:c+"px",height:d+"px"});
a.sidePositionB.css({width:c+"px",height:d+"px"});a.sideA.onResize(c,d);a.sideB.onResize(c,d)};a.isHardPage=!1;a.beginFlip=function(c){a.realCorner=c;a.corner=0<=c.indexOf("t")?rightToLeft?"tl":"tr":rightToLeft?"bl":"br";b.gotoPageIndex==originTotalPageCount&&b.thickness.hideThickness()};a.flipToPoint=function(c,d){void 0==d&&(d=!1);if(a.isHardPage)a.hardPageFlip(c.x,d);else if(a.isCorner(c.x,c.y))a.resetPage(),0<=a.realCorner.indexOf("l")&&a.css("z-index",1);else{var e=computePoint(a.corner,c.x,
c.y,b.pageWidth,b.pageHeight,b.maskWidth,a.shadowB,a.shadowA);angle=e.Angle;df=e.Df;noMovePoint=e.NomovePoint;mv=e.Mv;if(d){a.setSideAUp(!1);a.showShadow();b.flippingPage.css({"z-index":5});var e=0<=a.corner.indexOf("t"),g=0<=a.corner.indexOf("l");e?(a.sidePositionB.css({top:"0px",bottom:"auto",left:g?"auto":"0px",right:g?"0px":"auto"}),a.sidePositionA.css({top:"0px",bottom:"auto",left:g?"auto":"0px",right:g?"0px":"auto"})):(a.sidePositionB.css({top:"auto",bottom:"0px",left:g?"auto":"0px",right:g?
"0px":"auto"}),a.sidePositionA.css({top:"auto",bottom:"0px",left:g?"auto":"0px",right:g?"0px":"auto"}))}0<=a.corner.indexOf("t")?rightToLeft?(a.rotateElement(a.mask,"100% 0%",translate(-noMovePoint.x+b.pageWidth-b.maskWidth+mv.x,-noMovePoint.y+mv.y)+rotate(-angle)),a.rotateElement(a.sidePositionA,"100% 0%",rotate(angle)+translate(noMovePoint.x-mv.x,noMovePoint.y-mv.y)),a.rotateElement(a.sidePositionB,"100% 0%",rotate(angle)+translate(noMovePoint.x+df.x-mv.x,noMovePoint.y+df.y-mv.y)),a.rotateElement(a.sideB,
"100% 0%",translate(-b.pageWidth,0)+rotate(2*(90-angle)))):(a.rotateElement(a.mask,"0% 0%",translate(noMovePoint.x+mv.x,-noMovePoint.y+mv.y)+rotate(angle)),a.rotateElement(a.sidePositionA,"0% 0%",rotate(-angle)+translate(-noMovePoint.x-mv.x,noMovePoint.y-mv.y)),a.rotateElement(a.sidePositionB,"0% 0%",rotate(-angle)+translate(-noMovePoint.x-mv.x+df.x,noMovePoint.y+df.y-mv.y)),a.rotateElement(a.sideB,"0% 0%",translate(0,0)+rotate(2*(angle-90)))):rightToLeft?(a.rotateElement(a.mask,"100% 100%",translate(-noMovePoint.x+
b.pageWidth-b.maskWidth+mv.x,noMovePoint.y+b.pageHeight-b.maskWidth+mv.y)+rotate(angle)),a.rotateElement(a.sidePositionA,"100% 100%",rotate(-angle)+translate(noMovePoint.x-mv.x,-noMovePoint.y-mv.y)),a.rotateElement(a.sidePositionB,"100% 100%",rotate(-angle)+translate(noMovePoint.x+df.x-mv.x,-noMovePoint.y-mv.y+df.y)),a.rotateElement(a.sideB,"100% 100%",translate(-b.pageWidth,-b.pageHeight)+rotate(2*(angle-90)))):(a.rotateElement(a.mask,"0% 100%",translate(noMovePoint.x+mv.x,noMovePoint.y+b.pageHeight-
b.maskWidth+mv.y)+rotate(-angle)),a.rotateElement(a.sidePositionA,"0% 100%",rotate(angle)+translate(-noMovePoint.x-mv.x,-noMovePoint.y-mv.y)),a.rotateElement(a.sidePositionB,"0% 100%",rotate(angle)+translate(-noMovePoint.x+df.x-mv.x,-noMovePoint.y+df.y-mv.y)),a.rotateElement(a.sideB,"0% 100%",translate(0,-b.pageHeight)+rotate(2*(90-angle))))}};a.rotateElement=function(a,b,e){a.css({"-webkit-transform-origin":b,"-moz-transform-origin":b,"-ms-transform-origin":b,"-o-transform-origin":b,"-webkit-transform":e,
"-moz-transform":e,"-ms-transform":e,"-o-transform":e})};a.endFlip=function(){a.setSideAUp(!0);a.hideShadow()};a.hardPageFlip=function(c,d){var e=c;rightToLeft?(c>2*b.pageWidth&&(e=2*b.pageWidth),0>c&&(e=0),e=Math.acos((e-b.pageWidth)/b.pageWidth)):(c>b.pageWidth&&(e=b.pageWidth),c<-b.pageWidth&&(e=-b.pageWidth),e=Math.acos(e/b.pageWidth));e=180*e/Math.PI;rightToLeft&&(e-=180);d&&(a.sideB.imgFlipOver(!0),a.css({"-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","z-index":120}));
var g=rightToLeft?"100% 50%":"0% 50%";a.css({"-moz-perspective-origin":"left center","-webkit-transform-origin":g,"-webkit-transform":"perspective(3000px) rotateY("+-e+"deg)","-moz-perspective-origin":"left center","-moz-transform-origin":g,"-moz-transform":"perspective(3000px) rotateY("+-e+"deg)"});rightToLeft?-90>=e?(a.setSideAUp(!1),a.css({opacity:Math.abs(e+180)/90})):(a.setSideAUp(!0),a.css({opacity:1})):90<=e?(a.setSideAUp(!1),a.css({opacity:Math.abs(e-180)/90})):(a.setSideAUp(!0),a.css({opacity:1}))};
a.setSideAUp=function(b){a.sidePositionA.css({"z-index":b?2:1});a.sidePositionB.css({"z-index":b?1:2})};a.showShadow=function(){a.shadowA.css({display:"block"});a.shadowB.css({display:"block"})};a.hideShadow=function(){a.shadowA.css({display:"none"});a.shadowB.css({display:"none"})};a.resetPage=function(){a.isHardPage&&(a.css({"-webkit-transform-style":"flat","-moz-transform-style":"flat","-webkit-transform":"rotateY(0deg)","-moz-transform":"rotateY(0deg)","-ms-transform":"rotateY(0deg)","-o-transform":"rotateY(0deg)",
transform:"rotateY(0deg)",opacity:1}),a.sideA.imgFlipOver(!1),a.sideB.imgFlipOver(!1));a.rotateElement(a.mask,"0% 0%",translate(0,0)+rotate(0));a.rotateElement(a.sideA,"0% 0%",translate(0,0)+rotate(0));a.rotateElement(a.sideB,"0% 0%",translate(0,0)+rotate(0));a.rotateElement(a.sidePositionA,"0% 0%",translate(0,0)+rotate(0));a.rotateElement(a.sidePositionB,"0% 0%",translate(0,0)+rotate(0));a.sidePositionA.css({top:"0px",bottom:"auto",left:"0px",right:"auto"});a.sidePositionB.css({top:"0px",bottom:"auto",
left:"0px",right:"auto"});a.sideB.css({opacity:1});a.sideA.css({opacity:1})};a.isCorner=function(c,d){var e=0;0<=a.realCorner.indexOf("t")&&0==d&&e++;0<=a.realCorner.indexOf("b")&&d==b.pageHeight&&e++;0<=a.realCorner.indexOf("l")&&c==-b.pageWidth&&e++;0<=a.realCorner.indexOf("r")&&c==b.pageWidth&&e++;return 2<=e};a.addSearch=function(){a.sideA.initSearch();a.sideB.initSearch()};a.clearSearch=function(){a.sideA.clearSearch();a.sideB.clearSearch()}};
singleBook.prototype.initSide=function(a,b){var c=$(this).data(),d=$("<div style='position:absolute;top:0px;left:0px;-webkit-box-shadow: 0 0 10px rgba(40, 0, 0, 0.5)'></div>"),e=$("<div style='position:absolute;top:0px;left:0px;background-color:#f5f0f5'></div>"),g=$("<div style='position:absolute;top:0px;left:0px;'></div>"),h=$("<img />"),j;rightToLeft?(j=$("<div class='leftShadow'></div>"),j.css({width:userConfig.leftShadowWidth+"px",opacity:userConfig.leftShadowAlpha})):(j=$("<div class='rightShadow'></div>"),
j.css({width:userConfig.rightShadowWidth+"px",opacity:userConfig.rightShadowAlpha}));var k=$("<div style='position : absolute; '></div>"),o=[],r=[],n=[],t=[],y=[],m=[],z=[],w=[],I=[],x=[],p=[],u=[],s=[],Q=[],J=[],K=[],R=[],v=[],N=[],P=[];bannerArray=[];var f=$("<div style='position : absolute; '></div>"),S=[];a.append(d);d.append(e);e.append(g);d.append(f);d.append(k);b&&e.append(j);d.imgIndex=-1;d.onResize=function(a,b){d.css({width:a+"px",height:b+"px"});e.css({width:a+"px",height:b+"px"});g.css({width:a+
"px",height:b+"px"});h.css({width:a+"px",height:b+"px"});j.css({height:b+"px"});k.css({width:a,height:b});for(var c=0;c<o.length;c++)o[c].onResize(a,b);for(c=0;c<r.length;c++)r[c].onResize(a,b);for(c=0;c<t.length;c++)t[c].onResize(a,b);for(c=0;c<n.length;c++)n[c].onResize(a,b);for(c=0;c<y.length;c++)y[c].onResize(a,b);for(c=0;c<m.length;c++)m[c].onResize(a,b);for(c=0;c<z.length;c++)z[c].onResize(a,b);for(c=0;c<w.length;c++)w[c].onResize(a,b);for(c=0;c<I.length;c++)I[c].onResize(a,b);for(c=0;c<x.length;c++)x[c].onResize(a,
b);for(c=0;c<p.length;c++)p[c].onResize(a,b);for(c=0;c<u.length;c++)u[c].onResize(a,b);for(c=0;c<s.length;c++)s[c].onResize(a,b);for(c=0;c<Q.length;c++)Q[c].onResize(a,b);for(c=0;c<J.length;c++)J[c].onResize(a,b);for(c=0;c<K.length;c++)K[c].onResize(a,b);for(c=0;c<R.length;c++)R[c].onResize(a,b);for(c=0;c<v.length;c++)v[c].onResize(a,b);for(c=0;c<N.length;c++)N[c].onResize(a,b);for(c=0;c<P.length;c++)P[c].onResize(a,b);for(c=0;c<bannerArray.length;c++)bannerArray[c].onResize(a,b)};d.fillImg=function(a,
b){if(d.imgIndex!=a){d.imgIndex=a;g.empty();h.load(getPageDir(d.imgIndex,"normal"),function(){h.attr("src",getPageDir(d.imgIndex,"normal"));b&&h.css({"-webkit-transform":"scaleX(-1)","-moz-transform":"scaleX(-1)","-o-transform":"scaleX(-1)","-ms-transform":"scaleX(-1)",opacity:0.2});g.append(h);pageEditor!=void 0&&d.initMM()})}};d.imgFlipOver=function(a){if(a){h.css({"-webkit-transform":"scaleX(-1)","-moz-transform":"scaleX(-1)","-o-transform":"scaleX(-1)","-ms-transform":"scaleX(-1)",transform:"scaleX(-1)"});
j.attr("class",rightToLeft?"rightShadow":"leftShadow")}else{h.css({"-webkit-transform":"scaleX(1)","-moz-transform":"scaleX(1)","-ms-transform":"scaleX(1)","-o-transform":"scaleX(1)",transform:"scaleX(1)"});j.attr("class",rightToLeft?"leftShadow":"rightShadow")}j.css({left:rightToLeft?"auto":"0px",right:rightToLeft?"0px":"auto"})};d.clearSearch=function(){f.empty();S=[]};d.initSearch=function(){f.empty();S=[];if(!(searchWord==""||searchPageArr.indexOf(d.imgIndex)<0||d.imgIndex==-1))for(var a=0;a<
positionForPages[d.imgIndex-1].length;a++)if(positionForPages[d.imgIndex-1][a].word.toLowerCase().indexOf(searchWord.toLowerCase())>=0){var b=searchElement(positionForPages[d.imgIndex-1][a],c.pageWidth,c.pageHeight);S.push(b);f.append(b)}};d.initMM=function(){k.empty();o=[];r=[];t=[];n=[];y=[];m=[];z=[];w=[];I=[];x=[];p=[];u=[];s=[];Q=[];J=[];K=[];R=[];v=[];N=[];P=[];bannerArray=[];if(!(d.imgIndex<0||pageEditor.length<d.imgIndex||pageEditor[d.imgIndex-1][0]==null))for(var a=0;a<pageEditor[d.imgIndex-
1].length;a++){var b=pageEditor[d.imgIndex-1][a];if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_LINK){b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,downColor:b.downColor,downAlpha:b.downAlpha,overColor:b.overColor,overAlpha:b.overAlpha,outColor:b.outColor,outAlpha:b.outAlpha,action:b.action};b=new initLink(k,b,c.pageWidth,c.pageHeight);o.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_YOUTUBE){b=pageEditor[d.imgIndex-
1][a];b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,id:b.videoId,moviePlayTriggerEvt:b.moviePlayTriggerEvt,movieStopTriggerEvt:b.movieStopTriggerEvt};youtubeObj=new initYoutube(k,b,c.pageWidth,c.pageHeight);r.push(youtubeObj)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_VIDEO){b=pageEditor[d.imgIndex-1][a];b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,moviePlayTriggerEvt:b.moviePlayTriggerEvt,
movieStopTriggerEvt:b.movieStopTriggerEvt};b=new initVideo(k,b,c.pageWidth,c.pageHeight);t.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_AUDIO){b=pageEditor[d.imgIndex-1][a];b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.soundURL,soundPlayTriggerEvt:b.soundPlayTriggerEvt,soundStopTriggerEvt:b.soundStopTriggerEvt};b=new initAudio(k,b,c.pageWidth,c.pageHeight);n.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==
PageEditor.AnnoType.ANNO_IMAGE){b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,action:b.action};b=new initImage(k,b,c.pageWidth,c.pageHeight);y.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_BUTTON){b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,action:b.action,buttonCaption:b.buttonCaption,captionY:b.captionY,HRate:b.HRate,Format:b.Format};b=new initButton(k,
b,c.pageWidth,c.pageHeight);m.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_FLASHSHOW){b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,photo:b.Images,repeatPlay:b.isRepeat};b=new initFlashShow(k,b,c.pageWidth,c.pageHeight);z.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_LINE){b={StartX:b.lineStartPX,StartY:b.lineStartPY,EndX:b.lineEndPX,EndY:b.lineEndPY,x:b.location.x,y:b.location.y,width:b.location.width,
height:b.location.height,lineAlpha:b.lineAlpha,alpha:b.alpha,lineWidth:b.lineWidth,lineType:b.lineType,dotWidth:b.dotWidth,color:b.color,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor};b=new initLine(k,b,c.pageWidth,c.pageHeight,d.imgIndex+a);w.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ARROW){b={StartX:b.lineStartPX,StartY:b.lineStartPY,EndX:b.lineEndPX,EndY:b.lineEndPY,x:b.location.x,
y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,lineWidth:b.lineWidth,lineType:b.lineType,dotWidth:b.dotWidth,color:b.color,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,arrowType:b.arrowType,sr:b.shadow.shadowColor};b=new initArrow(k,b,c.pageWidth,c.pageHeight,d.imgIndex+a);I.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ROUND){b={x:b.location.x,y:b.location.y,width:b.location.width,
height:b.location.height,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,ColorA:b.gradientColorA,ColorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action};b=new initRound(k,b,c.pageWidth,c.pageHeight,d.imgIndex+a);x.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_RECTANGLE){b=
{x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,ColorA:b.gradientColorA,ColorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action};b=new initRe(k,b,c.pageWidth,c.pageHeight,d.imgIndex+a);p.push(b)}else if(pageEditor[d.imgIndex-
1][a].annotype==PageEditor.AnnoType.ANNO_TEXT){b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,textStr:b.textStr,lineH:b.lineHeightRation,fontName:b.formats.defaultFormat.fontName,fontSize:b.formats.defaultFormat.fontSize,color:b.formats.defaultFormat.color,tbold:b.formats.defaultFormat.bold,italic:b.formats.defaultFormat.italic,bgalpha:b.background.alpha,fillBg:b.background.fillBg,bgcolor:b.background.color,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,
sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action};b=new initText(k,b,c.pageWidth,c.pageHeight,d.imgIndex+a);u.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_AREA){b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,color:b.color,rounds:b.round,ellipseWidth:b.ellipseWidth,ellipseHeight:b.ellipseHeight,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,
sr:b.shadow.shadowColor,action:b.action,action:b.action};b=new initArea(k,b,c.pageWidth,c.pageHeight,d.imgIndex+a);s.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_CALLOUT){b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,textStr:b.textStr,lineH:b.lineHeightRation,fontName:b.formats.defaultFormat.fontName,fontSize:b.formats.defaultFormat.fontSize,color:b.formats.defaultFormat.color,tbold:b.formats.defaultFormat.bold,italic:b.formats.defaultFormat.italic,
bgalpha:b.background.alpha,fillBg:b.background.fillBg,bgcolor:b.background.color,direct:b.hookDirect,cx1:b.hookContr1RatioX,cy1:b.hookContr1RatioY,cx2:b.hookContr2RatioX,cy2:b.hookContr2RatioY,pointx:b.hookContrPointRatioX,pointy:b.hookContrPointRatioY,cornerRadiut:b.cornerRadiut,borderWidth:b.borderWidth,borderColor:b.borderColor,bordreAlpha:b.bordreAlpha,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action};
b=new initCallout(k,b,c.pageWidth,c.pageHeight,d.imgIndex+a);Q.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ATEXT){b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,textStr:b.strText,fontName:b.format.font,fontSize:b.format.size,color:b.format.color,tbold:b.format.bold,italic:b.format.italic,align:b.format.align,action:b.action,repeat:b.repeat,moveSpeed:b.moveSpeed,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,
se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action};b=new initAText(k,b,c.pageWidth,c.pageHeight,d.imgIndex+a);J.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_STARTEXT){b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,textStr:b.strText,fontName:b.format.font,fontSize:b.format.size,color:b.format.color,tbold:b.format.bold,italic:b.format.italic,align:b.format.align,action:b.action,repeat:b.repeat,moveSpeed:b.moveSpeed,
sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor};b=new initStarText(k,b,c.pageWidth,c.pageHeight,d.imgIndex+a);K.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_TEXTANIM){b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,effectType:b.effectType,textStr:b.textStr,fontName:b.formats.defaultFormat.fontName,fontSize:b.formats.defaultFormat.fontSize,color:b.formats.defaultFormat.color,
tbold:b.formats.defaultFormat.bold,italic:b.formats.defaultFormat.italic,action:b.action,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor};b=new initAminText(k,b,c.pageWidth,c.pageHeight,d.imgIndex+a);R.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ATIMAGE){b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,action:b.action};atimageObj=new initPngImage(k,
b,c.pageWidth,c.pageHeight);v.push(atimageObj)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_EFFECTTEXT){b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,textStr:b.text,fontName:b.format.font,fontSize:b.format.size,color:b.format.color,tbold:b.format.bold,italic:b.format.italic,action:b.action,moveSpeed:b.effectStyle,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor};
b=new initEffText(k,b,c.pageWidth,c.pageHeight,d.imgIndex+a);N.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ADVANCEDSOUND){b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.soundList.sound,skinType:b.skinType,soundPlay:b.soundPlayTriggerEvt};b=new initSound(k,b,c.pageWidth,c.pageHeight,d.imgIndex+a);P.push(b)}else if(pageEditor[d.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_BANNER){b={width:b.location.width,
height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,action:b.action,banners:b.banners};b=new initBanner(k,b,c.pageWidth,c.pageHeight,d.imgIndex+a);bannerArray.push(b)}}};d.changeTo0x=function(a){var b=a;a.substr(0,1)!="#"&&a.substr(0,2)!="0x"&&(b="#"+parseInt(a).toString(16));a.substr(0,2)=="0x"&&(b=a.replace("0x","#"));return b};return d};function zoomControlBar(a){this.dir=uiBaseURL;this.bar=$("<div></div>");this.btnZoomUp=new button(1,this.bar,{iconURL:this.dir+"ZoomUp.png"});this.btnZoomDown=new button(1,this.bar,{iconURL:this.dir+"ZoomDown.png"});this.btnZoomOut=new button(1,this.bar,{iconURL:this.dir+"ZoomOut.png"});this.btnPre=new button(1,this.bar,{iconURL:this.dir+"prev.png"});this.btnNext=new button(1,this.bar,{iconURL:this.dir+"next.png"});this.width=220;this.height=40;a.append(this.bar);this.bar.css({width:this.width+"px",
height:this.height+"px",position:"absolute","z-index":5,"-webkit-border-radius":"8px","-moz-border-radius":"8px","-ms-border-radius":"8px","-o-border-radius":"8px","border-radius":"8px","-webkit-box-shadow":"0px 0px 10px rgba(0, 0, 60, 0.8)","-moz-box-shadow":"0px 0px 10px rgba(0, 0, 60, 0.8)","-ms-box-shadow":"0px 0px 10px rgba(0, 0, 60, 0.8)","-o-box-shadow":"0px 0px 10px rgba(0, 0, 60, 0.8)","box-shadow":"0px 0px 10px rgba(0, 0, 60, 0.8)",display:"none","background-color":"#333333",opacity:0.7});
this.initEvt();this.setButtonsPos()}zoomControlBar.prototype.setPosition=function(a,b){this.bar.css({left:a+"px",top:b+"px"})};zoomControlBar.prototype.setVisible=function(a){this.bar.css({display:a?"block":"none"})};zoomControlBar.prototype.setChildIndex=function(a){this.bar.css({"z-index":a})};zoomControlBar.prototype.onResize=function(a,b){this.bar.css({width:a+"px",height:b+"px"})};
zoomControlBar.prototype.initEvt=function(){this.btnZoomUp.onMouseUp(this,this.zoomUp);this.btnZoomDown.onMouseUp(this,this.zoomDown);this.btnZoomOut.onMouseUp(this,this.zoomOut);this.btnPre.onMouseUp(this,previousPageFun);this.btnNext.onMouseUp(this,nextPageFun)};
zoomControlBar.prototype.setButtonsPos=function(){this.btnZoomUp.setButtonPosition(3,3);this.btnZoomDown.setButtonPosition(46,3);this.btnZoomOut.setButtonPosition(89,3);this.btnPre.setButtonPosition(132,3);this.btnNext.setButtonPosition(175,3)};zoomControlBar.prototype.zoomUp=function(){var a=zoomBook.width/zoomPageWidth+0.2;zoomBook.onResize(a*zoomPageWidth,a*zoomPageHeight)};zoomControlBar.prototype.zoomDown=function(){var a=zoomBook.width/zoomPageWidth-0.2;zoomBook.onResize(a*zoomPageWidth,a*zoomPageHeight)};
zoomControlBar.prototype.zoomOut=function(){windowWidth<windowHeight?(changeShowBook(1),bookType=1,setCurrentIndexTextField($(singlePageBook).data().currentPageIndex),$(singlePageBook).data().gotoPage(zoomBook.currentIndex)):(changeShowBook(0),bookType=0,setCurrentIndexTextField(flipBook.currentPageIndex,!0),flipBook.gotoPage(zoomBook.currentIndex));thumbnail.clearHighLight();thumbnail.setHighLight(zoomBook.currentIndex);$("#zoomImg").attr("src",this.dir+"ZoomIn.png");$("#btnZoom").attr("title","Zoom In")};function zoomSide(a){this.side=$("<div></div>");this.sideContent=$("<div></div>");this.sideImg=$("<img />");this.MMbg=$("<div></div>");this.width=zoomPageWidth;this.height=zoomPageHeight;a.append(this.side);this.side.append(this.sideContent);this.imgIndex=-1;this.side.css({width:this.width+"px",height:this.height+"px",position:"absolute"});this.linkArray=[];this.youtubeArray=[];this.videoArray=[];this.audioArray=[];this.imageArray=[];this.buttonArray=[];this.flashShowArray=[];this.lineArray=[];this.arrowArray=
[];this.roundArray=[];this.reArray=[];this.textArray=[];this.areaArray=[];this.calloutArray=[];this.atextArray=[];this.startextArray=[];this.aminArray=[];this.atimageArray=[];this.efftextArray=[];this.soundArray=[];this.bannerArray=[]}
zoomSide.prototype.onResize=function(a,b){this.side.css({width:a+"px",height:b+"px"});this.sideContent.css({width:a+"px",height:NaN});this.sideImg.css({width:a+"px",height:b+"px"});this.MMbg.css({width:a+"px",height:b+"px"});this.width=a;this.height=b;for(var c=0;c<this.linkArray.length;c++)this.linkArray[c].onResize(a,b);for(c=0;c<this.youtubeArray.length;c++)this.youtubeArray[c].onResize(a,b);for(c=0;c<this.videoArray.length;c++)this.videoArray[c].onResize(a,b);for(c=0;c<this.audioArray.length;c++)this.audioArray[c].onResize(a,
b);for(c=0;c<this.imageArray.length;c++)this.imageArray[c].onResize(a,b);for(c=0;c<this.buttonArray.length;c++)this.buttonArray[c].onResize(a,b);for(c=0;c<this.flashShowArray.length;c++)this.flashShowArray[c].onResize(a,b);for(c=0;c<this.lineArray.length;c++)this.lineArray[c].onResize(a,b);for(c=0;c<this.arrowArray.length;c++)this.arrowArray[c].onResize(a,b);for(c=0;c<this.roundArray.length;c++)this.roundArray[c].onResize(a,b);for(c=0;c<this.reArray.length;c++)this.reArray[c].onResize(a,b);for(c=
0;c<this.textArray.length;c++)this.textArray[c].onResize(a,b);for(c=0;c<this.areaArray.length;c++)this.areaArray[c].onResize(a,b);for(c=0;c<this.calloutArray.length;c++)this.calloutArray[c].onResize(a,b);for(c=0;c<this.atextArray.length;c++)this.atextArray[c].onResize(a,b);for(c=0;c<this.startextArray.length;c++)this.startextArray[c].onResize(a,b);for(c=0;c<this.aminArray.length;c++)this.aminArray[c].onResize(a,b);for(c=0;c<this.atimageArray.length;c++)this.atimageArray[c].onResize(a,b);for(c=0;c<
this.efftextArray.length;c++)this.efftextArray[c].onResize(a,b);for(c=0;c<this.soundArray.length;c++)this.soundArray[c].onResize(a,b);for(c=0;c<this.bannerArray.length;c++)this.bannerArray[c].onResize(a,b)};zoomSide.prototype.getSide=function(){return this.side};
zoomSide.prototype.initMM=function(){this.MMbg.empty();this.linkArray=[];this.youtubeArray=[];this.videoArray=[];this.audioArray=[];this.imageArray=[];this.buttonArray=[];this.flashShowArray=[];this.lineArray=[];this.arrowArray=[];this.roundArray=[];this.reArray=[];this.textArray=[];this.areaArray=[];this.calloutArray=[];this.atextArray=[];this.startextArray=[];this.aminArray=[];this.atimageArray=[];this.efftextArray=[];this.soundArray=[];this.bannerArray=[];if(!(0>=this.imgIndex||pageEditor.length<
this.imgIndex||null==pageEditor[this.imgIndex-1][0]))for(var a=0;a<pageEditor[this.imgIndex-1].length;a++){var b=pageEditor[this.imgIndex-1][a];pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_LINK?(b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,downColor:b.downColor,downAlpha:b.downAlpha,overColor:b.overColor,overAlpha:b.overAlpha,outColor:b.outColor,outAlpha:b.outAlpha,action:b.action},this.linkArray.push(new initLink(this.MMbg,b,
this.width,this.height))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_YOUTUBE?(b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,id:b.videoId,moviePlayTriggerEvt:b.moviePlayTriggerEvt,movieStopTriggerEvt:b.movieStopTriggerEvt},this.youtubeArray.push(new initYoutube(this.MMbg,b,this.width,this.height))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_VIDEO?(b={width:b.location.width,height:b.location.height,x:b.location.x,
y:b.location.y,alpha:b.alpha,src:b.url,moviePlayTriggerEvt:b.moviePlayTriggerEvt,movieStopTriggerEvt:b.movieStopTriggerEvt},this.videoArray.push(new initVideo(this.MMbg,b,this.width,this.height))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_AUDIO?(b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.soundURL,soundPlayTriggerEvt:b.soundPlayTriggerEvt,soundStopTriggerEvt:b.soundStopTriggerEvt},this.audioArray.push(new initAudio(this.MMbg,
b,this.width,this.height))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_IMAGE?(b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,action:b.action},imageObj=new initImage(this.MMbg,b,this.width,this.height),this.imageArray.push(imageObj)):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_BUTTON?(b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,action:b.action,
buttonCaption:b.buttonCaption,captionY:b.captionY,HRate:b.HRate,Format:b.Format},this.buttonArray.push(new initButton(this.MMbg,b,this.width,this.height))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_FLASHSHOW?(b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,photo:b.Images,repeatPlay:b.isRepeat},this.flashShowArray.push(new initFlashShow(this.MMbg,b,this.width,this.height))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_LINE?
(b={StartX:b.lineStartPX,StartY:b.lineStartPY,EndX:b.lineEndPX,EndY:b.lineEndPY,x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,lineAlpha:b.lineAlpha,alpha:b.alpha,lineWidth:b.lineWidth,lineType:b.lineType,dotWidth:b.dotWidth,color:b.color,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor},this.lineArray.push(new initLine(this.MMbg,b,this.width,this.height,this.imgIndex+a))):pageEditor[this.imgIndex-
1][a].annotype==PageEditor.AnnoType.ANNO_ARROW?(b={StartX:b.lineStartPX,StartY:b.lineStartPY,EndX:b.lineEndPX,EndY:b.lineEndPY,x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,lineWidth:b.lineWidth,lineType:b.lineType,dotWidth:b.dotWidth,color:b.color,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,arrowType:b.arrowType,sr:b.shadow.shadowColor},this.arrowArray.push(new initArrow(this.MMbg,b,this.width,
this.height,this.imgIndex+a))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ROUND?(b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,ColorA:b.gradientColorA,ColorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,
action:b.action},this.roundArray.push(new initRound(this.MMbg,b,this.width,this.height,this.imgIndex+a))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_RECTANGLE?(b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,fillStyle:b.fillStyle,color:b.color,ColorA:b.gradientColorA,ColorB:b.gradientColorB,angle:b.angle,spalpha:b.spalpha,borderWidth:b.borderWidth,borderColor:b.borderColor,borderAlpha:b.borderAlpha,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,
sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action},this.reArray.push(new initRe(this.MMbg,b,this.width,this.height,this.imgIndex+a))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_TEXT?(b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,textStr:b.textStr,lineH:b.lineHeightRation,fontName:b.formats.defaultFormat.fontName,fontSize:b.formats.defaultFormat.fontSize,color:b.formats.defaultFormat.color,
tbold:b.formats.defaultFormat.bold,italic:b.formats.defaultFormat.italic,bgalpha:b.background.alpha,fillBg:b.background.fillBg,bgcolor:b.background.color,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action},this.textArray.push(new initText(this.MMbg,b,this.width,this.height,this.imgIndex+a))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_AREA?(b={x:b.location.x,y:b.location.y,width:b.location.width,
height:b.location.height,alpha:b.alpha,color:b.color,rounds:b.round,ellipseWidth:b.ellipseWidth,ellipseHeight:b.ellipseHeight,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor,action:b.action},this.areaArray.push(new initArea(this.MMbg,b,this.width,this.height,this.imgIndex+a))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_CALLOUT?(b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,
alpha:b.alpha,textStr:b.textStr,lineH:b.lineHeightRation,fontName:b.formats.defaultFormat.fontName,fontSize:b.formats.defaultFormat.fontSize,color:b.formats.defaultFormat.color,tbold:b.formats.defaultFormat.bold,italic:b.formats.defaultFormat.italic,bgalpha:b.background.alpha,fillBg:b.background.fillBg,bgcolor:b.background.color,direct:b.hookDirect,cx1:b.hookContr1RatioX,cy1:b.hookContr1RatioY,cx2:b.hookContr2RatioX,cy2:b.hookContr2RatioY,pointx:b.hookContrPointRatioX,pointy:b.hookContrPointRatioY,
cornerRadiut:b.cornerRadiut,borderWidth:b.borderWidth,borderColor:b.borderColor,bordreAlpha:b.bordreAlpha,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor},this.calloutArray.push(new initCallout(this.MMbg,b,this.width,this.height,this.imgIndex+a))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ATEXT?(b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,textStr:b.strText,
fontName:b.format.font,fontSize:b.format.size,color:b.format.color,tbold:b.format.bold,italic:b.format.italic,align:b.format.align,action:b.action,repeat:b.repeat,moveSpeed:b.moveSpeed,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor},this.atextArray.push(new initAText(this.MMbg,b,this.width,this.height,this.imgIndex+a))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_STARTEXT?(b={x:b.location.x,y:b.location.y,
width:b.location.width,height:b.location.height,alpha:b.alpha,textStr:b.strText,fontName:b.format.font,fontSize:b.format.size,color:b.format.color,tbold:b.format.bold,italic:b.format.italic,align:b.format.align,action:b.action,repeat:b.repeat,moveSpeed:b.moveSpeed,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor},this.startextArray.push(new initStarText(this.MMbg,b,this.width,this.height,this.imgIndex+a))):pageEditor[this.imgIndex-
1][a].annotype==PageEditor.AnnoType.ANNO_TEXTANIM?(b={x:b.location.x,y:b.location.y,width:b.location.width,height:b.location.height,alpha:b.alpha,effectType:b.effectType,textStr:b.textStr,fontName:b.formats.defaultFormat.fontName,fontSize:b.formats.defaultFormat.fontSize,color:b.formats.defaultFormat.color,tbold:b.formats.defaultFormat.bold,italic:b.formats.defaultFormat.italic,action:b.action,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor},
this.aminArray.push(new initAminText(this.MMbg,b,this.width,this.height,this.imgIndex+a))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ATIMAGE?(b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.url,action:b.action},atimageObj=new initPngImage(this.MMbg,b,this.width,this.height),this.atimageArray.push(atimageObj)):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_EFFECTTEXT?(b={x:b.location.x,y:b.location.y,width:b.location.width,
height:b.location.height,alpha:b.alpha,textStr:b.text,fontName:b.format.font,fontSize:b.format.size,color:b.format.color,tbold:b.format.bold,italic:b.format.italic,action:b.action,moveSpeed:b.effectStyle,sh:b.shadow.hasDropShadow,sx:b.shadow.shadowBlurX,sy:b.shadow.shadowBlurY,se:b.shadow.shadowDistance,sr:b.shadow.shadowColor},this.efftextArray.push(new initEffText(this.MMbg,b,this.width,this.height,this.imgIndex+a))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_ADVANCEDSOUND?
(b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,src:b.soundList.sound,skinType:b.skinType,soundPlay:b.soundPlayTriggerEvt},this.soundArray.push(new initSound(this.MMbg,b,this.width,this.height,this.imgIndex+a))):pageEditor[this.imgIndex-1][a].annotype==PageEditor.AnnoType.ANNO_BANNER&&(b={width:b.location.width,height:b.location.height,x:b.location.x,y:b.location.y,alpha:b.alpha,action:b.action,banners:b.banners},this.bannerArray.push(new initBanner(this.MMbg,
b,this.width,this.height,this.imgIndex+a)))}};zoomSide.prototype.fillContent=function(a){if(a!=this.imgIndex&&(this.imgIndex=a,this.sideContent.empty(),!(a>originTotalPageCount||0>a))){var b=this;this.sideImg.load(getPageDir(a,"large"),function(){b.sideImg.attr("src",getPageDir(a,"large"));b.sideContent.append(b.sideImg);b.sideContent.append(b.MMbg);void 0!=pageEditor&&b.initMM()})}};zoomSide.prototype.setPosition=function(a,b){this.side.css({left:a+"px",top:b+"px"})};
zoomSide.prototype.setChildIndex=function(a){this.side.css({"z-index":a})};zoomSide.prototype.setVisible=function(a){this.side.css({display:a?"block":"none"})};function initZoomBook(a){this.book=$("<div></div>");this.prePage=new zoomSide(this.book);this.nextPage=new zoomSide(this.book);this.showPage=new zoomSide(this.book);this.width=zoomPageWidth;this.height=zoomPageHeight;this.prePage.setChildIndex(1);this.showPage.setChildIndex(3);this.nextPage.setChildIndex(2);this.diffPageCount=0;this.currentIndex=1;this.showingPage=this.flipPage=null;isTouch?this.initTouchEvt():(this.initMouseEvt(),this.controlBar=new zoomControlBar(a),this.controlBar.setPosition((windowWidth-
this.controlBar.width)/2,20));a.append(this.book);this.book.css({width:this.width+"px",height:this.height+"px",position:"absolute",display:"none"})}initZoomBook.prototype.onResize=function(a,b){this.book.css({width:a+"px",height:b+"px"});this.prePage.onResize(a,b);this.showPage.onResize(a,b);this.nextPage.onResize(a,b);this.width=a;this.height=b;debug("width: "+this.width)};
initZoomBook.prototype.gotoPage=function(a){if(this.currentIndex==a||1>a||a>originTotalPageCount){if(1>a||a>originTotalPageCount)_tipsBox.setCaption(1>a?"This is the first page":"This is the last page"),_tipsBox.showTipsBox()}else{_rimFlip.removeRimFlip();this.diffPageCount=a-this.currentIndex;var b=0,c=0,d=this;this.currentIndex>a?(b=windowWidth-this.book.offset().left+50,this.flipPage=this.showPage,this.showingPage=this.prePage,this.showingPage.fillContent(a),this.showingPage.setPosition(0,0),this.nextPage.setChildIndex(1)):
(c=windowWidth-this.book.offset().left+50,this.flipPage=this.nextPage,this.showingPage=this.showPage,this.flipPage.fillContent(a),this.prePage.setChildIndex(1));this.flipPage.setChildIndex(3);this.showingPage.setChildIndex(2);this.flipPage.setPosition(c,0);this.showingPage.setPosition(0,0);this.flipPage.getSide().animate({left:b},500,"linear",function(){auto_player.resetTimer();d.changePage();d.endFlip(a)})}};
initZoomBook.prototype.changePage=function(){var a=null;0<this.diffPageCount?(a=this.showPage,this.showPage=this.nextPage,this.nextPage=this.prePage):(a=this.nextPage,this.nextPage=this.showPage,this.showPage=this.prePage);this.prePage=a};
initZoomBook.prototype.endFlip=function(a){this.currentIndex=a;this.fillNear(a);this.showPage.setChildIndex(3);this.nextPage.setChildIndex(2);this.prePage.setChildIndex(1);setCurrentIndexTextField(this.currentIndex,!1);window.location.hash="#p="+this.currentIndex;thumbnail.clearHighLight();thumbnail.setHighLight(this.currentIndex);this.prePage.setPosition(0,0);this.nextPage.setPosition(0,0)};initZoomBook.prototype.setVisible=function(a){this.book.css({display:a?"block":"none"});isTouch||this.controlBar.setVisible(a)};
initZoomBook.prototype.setPosition=function(a,b){this.book.css({left:a+"px",top:b+"px"})};initZoomBook.prototype.fillNear=function(a){1<a&&this.prePage.fillContent(a-1);this.showPage.fillContent(a);a<originTotalPageCount&&this.nextPage.fillContent(a+1)};
initZoomBook.prototype.initMouseEvt=function(){var a=this,b=Point(0,0),c=!1,d=null;this.book.bind(_event._down,function(e){c=!0;b.x=e.pageX;b.y=e.pageY;d={x:a.book.offset().left,y:a.book.offset().top};return!1});this.book.bind(_event._end,function(){c=!1});this.book.bind(_event._move,function(e){c&&bookType==BookType.zoom_book&&a.book.css({left:e.pageX-b.x+d.x+"px",top:e.pageY-b.y+d.y+"px"})});this.book.bind("mouseleave",function(){c=!1})};
initZoomBook.prototype.initTouchEvt=function(){var a=this,b=Point(0,0),c=Point(0,0),d=!1,e=!1,g=null,h=!1;this.book.bind(_event._down,function(j){j=j.originalEvent.touches;1==j.length?(d=!0,e=!1,b.x=j[0].pageX,b.y=j[0].pageY,g={x:a.book.offset().left,y:a.book.offset().top}):2==j.length&&(e=!0,d=!1,b.x=j[0].pageX,b.y=j[0].pageY,c.x=j[1].pageX,c.y=j[1].pageY,g={x:j[0].pageX,y:j[0].pageY,left:0,top:0,width:a.book.width(),height:a.book.height()},a.prePage.setVisible(!1),a.nextPage.setVisible(!1));h=!1});
this.book.bind(_event._end,function(){h&&(a.width=a.showPage.sideImg.width(),a.height=a.showPage.sideImg.height(),a.onResize(a.width,a.height));h=e=d=!1;a.prePage.setVisible(!0);a.nextPage.setVisible(!0)});this.book.bind(_event._move,function(j){j=j.originalEvent.touches;if(d)a.book.css({left:j[0].pageX-b.x+g.x+"px",top:j[0].pageY-b.y+g.y+"px"});else if(e){var k=Point(j[0].pageX,j[0].pageY),o=Point(j[1].pageX,j[1].pageY),j=Math.sqrt(Math.pow(c.x-b.x,2)+Math.pow(c.y-b.y,2)),k=Math.sqrt(Math.pow(o.x-
k.x,2)+Math.pow(o.y-k.y,2)),k=g.width+2*(k-j),j=k*g.height/g.width;k<windowWidth/2&&j<windowHeight/2&&(j=getPageWidthHeight(windowWidth/2,windowHeight/2,k,j),k=j.x,j=j.y);a.showPage.onResize(k,j);h=!0}return!1})};var setBackGround=function(){var a=gradientColorA,b=gradientColorB,c=gradientColorAngle,d=$("<img />"),e=backGroundImgURL,g="0% 0%,100% 0%";switch(c){case 45:g="0% 0%,100% 100%";break;case 90:g="0% 0%,0% 100%";break;case 135:g="100% 0%,0% 100%";break;case 180:g="100% 0%,0% 0%";case 0:g="0% 0%,100% 0%"}"safari"==browserType?bookContainer.css("background-image","-webkit-gradient(linear,"+g+",from("+a+"),to("+b+"))"):"mozilla"==browserType?bookContainer.css("background-image","-moz-linear-gradient(left "+
c+"deg,"+a+","+b+")"):"msie"==browserType&&bookContainer.css("filter","progid:DXImageTransform.Microsoft.Gradient(GradientType=1, EndColorStr="+b+", StartColorStr="+a+");");if(""!=e&&"undefined"!=e){var h=new Image;h.src=e;h.onload=function(){h.complete&&(d.attr("src",e),bookContainer.append(d),d.css("z-index",0),d.width(windowWidth),d.height(windowHeight))}}$.fn.extend(bookContainer,{resizeBackGroundImg:function(){d.width(windowWidth);d.height(windowHeight)}})};function autoFlip(){this.autoPlay=getBool("autoPlayAutoStart",!1)&&getBool("AutoPlayButtonVisible",!0);this.Duration=getInt("autoPlayDuration",3);this.loopCount=getInt("autoPlayLoopCount",1);this.loopNum=0;this.autoPlay?this.startTimer():this.timer=-1}autoFlip.prototype.startTimer=function(){var a=this;this.timer=window.setInterval(function(){a.onTimer()},1E3*this.Duration)};autoFlip.prototype.stopTimer=function(){-1!==this.timer&&(window.clearInterval(this.timer),this.timer=-1)};
autoFlip.prototype.resetTimer=function(){this.isPlaying()&&(this.stopTimer(),this.startTimer())};
autoFlip.prototype.onTimer=function(){0==bookType&&flipBook.currentPageIndex==totalPageCount||1==bookType&&$(singlePageBook).data().currentPageIndex==originTotalPageCount||2==bookType&&zoomCurrentPage==originTotalPageCount?(this.loopNum++,-1==this.loopCount||this.loopCount>this.loopNum?firstPageFun():(this.stop(),$("#autoPlayImg").attr("src",uiBaseURL+"autoPlay.png"),$("#autoPlay").attr("title","Stop Auto Play"))):nextPageFun()};autoFlip.prototype.start=function(){this.autoPlay=!0;this.startTimer()};
autoFlip.prototype.stop=function(){this.autoPlay=!1;this.stopTimer()};autoFlip.prototype.isPlaying=function(){return this.autoPlay};var buttonType=function(){};buttonType.caption_button=0;buttonType.icon_button=1;buttonType.double_button=2;var buttonAlign=function(){};buttonAlign.icon_left=0;buttonAlign.icon_top=1;buttonAlign.icon_right=2;buttonAlign.icon_bottom=3;
function button(a,b,c,d,e){this.background=$("<div></div>");this.caption="button1";this.iconURL="";this.mainColor="#888888";this.height=this.width=40;this.buttonType=a;this.config=c;this.iconBox=$("<img />");this.needResize=e;this.asImgButton=d;this.create();$(b).append(this.background);$(this.background).asButton()}
button.prototype.create=function(){var a=this;this.background.css({position:"absolute",width:this.width+"px",height:this.height+"px","-webkit-border-radius":"2px","-moz-border-radius":"2px","border-radius":"2px",cursor:"pointer"});void 0!=this.config.mainColor&&(this.mainColor=this.config.mainColor,this.background.css({"background-color":this.config.mainColor}));this.buttonType!=buttonType.icon_button&&(this.caption=this.config.caption,this.captionBox=new label(this.caption,this.background),this.setPosition());
if(this.buttonType!=buttonType.caption_button){this.iconURL=this.config.iconURL;var b=new Image;b.src=this.iconURL;b.onload=function(){if(b.complete==true){$(a.iconBox).attr("src",a.iconURL);a.background.append(a.iconBox);a.setPosition();a.asImgButton&&$(a.iconBox).asImageButton()}}}};
button.prototype.setPosition=function(){if(this.buttonType==buttonType.double_button){var a=this.captionBox.getWidth(),b=this.captionBox.getHeight(),c=this.iconBox.width(),d=this.iconBox.height();switch(this.config.align){case buttonAlign.icon_left:this.width=a+c+12;this.height=Math.max(d,b)+6;$(this.iconBox).css({top:(this.height-d)/2+"px",left:"4px"});$(this.captionBox).css({top:(this.height-b)/2+"px",right:"4px"});break;case buttonAlign.icon_top:this.width=Math.max(c,a)+6;this.height=b+d+8;$(this.iconBox).css({top:"2px",
left:(this.width-c)/2+"px"});$(this.captionBox).css({bottom:"2px",left:(this.width-a)/2+"px"});break;case buttonAlign.icon_right:this.width=a+c+12;this.height=Math.max(d,b)+6;$(this.iconBox).css({top:(this.height-d)/2+"px",right:"4px"});$(this.captionBox).css({top:(this.height-b)/2+"px",left:"4px"});break;case buttonAlign.icon_bottom:this.width=Math.max(c,a)+6,this.height=b+d+8,$(this.iconBox).css({bottom:"2px",left:(this.width-c)/2+"px"}),$(this.captionBox).css({top:"2px",left:(this.width-a)/2+"px"})}}else this.buttonType==
buttonType.caption_button?(this.width=this.captionBox.getWidth()+10,this.height=this.captionBox.getHeight()+10,this.captionBox.setLabelPosition(5,2)):this.buttonType==buttonType.icon_button&&(this.width=$(this.iconBox).width(),this.height=$(this.iconBox).height(),$(this.iconBox).css({top:"0px",left:"0px"}));if(this.needResize)this.onResize(40,50);else $(this.background).css({width:this.width+"px",height:this.height+"px"})};
button.prototype.onResize=function(a,b){$(this.background).css({width:a+"px",height:b+"px"});$(this.iconBox).css({position:"absolute",top:"10px",left:"3px"})};button.prototype.getWidth=function(){return this.width};button.prototype.getHeight=function(){return this.height};button.prototype.setCSS=function(a){$(this.background).css(a)};button.prototype.setButtonPosition=function(a,b,c){void 0==c&&(c=["left","top"]);this.background.css(c[0],a+"px");this.background.css(c[1],b+"px")};
button.prototype.setVisible=function(a){$(this.background).css({display:a?"block":"none"})};button.prototype.changeIcon=function(a){this.iconURL=a;var b=new Image,c=this;b.src=this.iconURL;b.onload=function(){!0==b.complete&&$(c.iconBox).attr("src",c.iconURL)};this.setPosition()};button.prototype.setColor=function(a){this.mainColor=a;$(this.background).css({"background-color":this.mainColor})};button.prototype.onMouseDown=function(a,b){this.background.bind(_event._down,function(c){b.call(a,c);return!1})};
button.prototype.onMouseUp=function(a,b){"msie"==browserType?this.background.bind("click",function(c){b.call(a,c);return!1}):this.background.bind(_event._end,function(){b.call(a);return!1})};button.prototype.onMouseOver=function(a,b){this.background.bind(_event._move,function(){b.call(a);return!1})};button.prototype.onMouseOut=function(){};button.prototype.onMouseLeave=function(){};button.prototype.onMouseMove=function(){};button.prototype.remove=function(){this.background.remove()};var demoBar,initDemoBar=function(){var a=homePage;demoBar=$("<div></div>");demoBar.css({width:"305px",height:"70px",position:"absolute","background-color":"#cccccc",opacity:0.5,"z-index":10,"-moz-border-radius":"5px","-webkit-border-radius":"5px","border-radius":"5px"});var b=$("<img />");b.css({position:"absolute",top:"10px",left:"5px"});var c=$("<div></div>");c.css({position:"absolute",top:"13px",left:"65px"});var d=$("<span>"+productName+"</span>"),a=$("<a href='"+a+"' target='_blank'>"+a+"</a>");
a.css({position:"absolute",top:"25px",left:"0px"});d.css({"font-size":"15px",color:"#333333"});tmpContainer.append(demoBar);demoBar.append(c);c.append(d);c.append(a);$.fn.extend(demoBar,{setDemoPosition:function(){demoBar.css({top:(windowHeight-70)/2+"px",left:(windowWidth-305)/2+"px"})},loadImg:function(){b.load(function(){demoBar.append(b)});b.attr({src:uiBaseURL+"demo.png"})}});demoBar.loadImg();demoBar.setDemoPosition()};function initLeftOrRightButton(a,b){this.buttonBar=$("<div></div>");this.buttonIcon=$("<img />");this.buttonBackColor;this.height=this.width=0;this.buttonBar.css({position:"absolute",left:b?"0px":"auto",right:b?"auto":"0px"});a.append(this.buttonBar);this.buttonBar.append(this.buttonIcon);var c=this;this.buttonIcon.attr("src",b?uiBaseURL+"previous_normal.png":uiBaseURL+"next_normal.png");this.buttonIcon.load(function(){0==userConfig.shortcutButtonWidth&&0==userConfig.shortcutButtonHeight?(c.width=
this.width,c.height=this.height):0==userConfig.shortcutButtonWidth?(c.width=this.width*userConfig.shortcutButtonHeight/this.height,c.height=userConfig.shortcutButtonHeight):0==userConfig.shortcutButtonHeight?(c.width=userConfig.shortcutButtonWidth,c.height=this.height*userConfig.shortcutButtonWidth/this.width):(c.width=userConfig.shortcutButtonWidth,c.height=userConfig.shortcutButtonHeight);c.buttonBar.css({width:c.width+"px",height:c.height+"px",top:(windowHeight-c.height)/2+"px"});c.buttonIcon.css({width:c.width+
"px",height:c.height+"px"})});this.buttonIcon.asImageButton();this.buttonBar.bind(_event._end,function(){b?previousPageFun():nextPageFun()});this.buttonBar.bind(_event._down,function(){"msie"==browserType?event.cancelBubble=!0:event.stopPropagation();event.preventDefault()})}initLeftOrRightButton.prototype.onResize=function(a,b){this.buttonBar.css({width:a+"px",height:b+"px"});this.buttonIcon.css({width:a+"px",height:b+"px"});this.width=a;this.height=b;this.setPosition()};
initLeftOrRightButton.prototype.setPosition=function(){this.buttonBar.css({top:(windowHeight-this.height)/2+"px"})};function bookShadow(a,b,c){this.backgroun=$("<div></div>");this.width=a;this.height=b;$(this.backgroun).css({position:"absolute",width:this.width+"px",height:this.height+"px","-webkit-box-shadow":"0 0 15px rgba(40, 0, 0, 0.7)"});$(c).append(this.backgroun)}bookShadow.prototype.onResize=function(a,b,c){this.width=c?2*a:a;this.height=b;$(this.backgroun).css({width:this.width+"px",height:this.height+"px"})};bookShadow.prototype.setPosition=function(a,b){$(this.backgroun).css({top:b+"px",left:a+"px"})};
bookShadow.prototype.showShadow=function(){$(this.backgroun).css({"-webkit-box-shadow":"0 0 15px rgba(40, 0, 0, 0.7)"})};bookShadow.prototype.hideShadow=function(){$(this.backgroun).css({"-webkit-box-shadow":"0 0 15px rgba(40, 0, 0, 0)"})};function searchElement(a,b,c){var d=$("<div style='position: absolute'></div>"),e=getString("searchColor","#ffff00"),g=getInt("searchAlpha",0.3);d.css({top:a.top*c+"px",left:a.left*b+"px",width:b*a.width+"px",height:c*a.height+"px","background-color":e,opacity:g});$.fn.extend(d,{onResize:function(b,c){d.css({top:a.top*c+"px",left:a.left*b+"px",width:b*a.width+"px",height:c*a.height+"px"})}});return d};function searchItem(a,b,c){this.width=250;this.height=85;this.background=$("<div></div>");this.textField=new label(b,this.background);this.mainColor="#888888";this.pageIndex=a;$(this.background).css({"background-color":this.mainColor,width:this.width+"px",height:this.height+"px",position:"absolute",border:"1px solid #555555",overflow:"hidden",cursor:"pointer"});this.textField.onResize(this.Width-20,this.height-16);this.textField.setLabelPosition(10,8);this.isMouseMove=!1;this.downPoint=Point(0,0);
var d=this;$(c).append(this.background);$(this.background).bind(_event._end,function(){isSearchDrag||gotoPageFun(d.pageIndex)});this.textField.setCaption("P."+a+": "+this.cutText(b,searchWord));this.textField.riseAWord(searchWord);this.textField.setFont("13.5px","#111111",null)}searchItem.prototype.onResize=function(a,b){this.width=a;this.height=b;$(this.background).css({width:a+"px",height:b+"px"});this.textField.onResize(a-20,b-16)};
searchItem.prototype.setPosition=function(a,b){$(this.background).css({top:b+"px",left:a+"px"})};searchItem.prototype.getWidth=function(){return this.width};searchItem.prototype.getHeight=function(){return this.height};
searchItem.prototype.cutText=function(a,b){if(120>a.length||""==b)return a;var c=a.length,d=a.toLowerCase().indexOf(b.toLowerCase()),e;60<=d?(e=Math.max(60<=c-d?d-60:c-120,0),e=".."+a.substring(e,d)):e=a.substring(0,d);c=60<c-d?a.substring(d,60<=d?d+60:120)+"..":a.substring(d,c);return e+c};function form(a,b){this.height=this.width=300;this.mainColor="#888888";$(this).data();this.background=$('<div style="position:absolute; width:300px; height:300px;"></div>');this.formConfig=$.extend({width:this.width,height:this.height,mainColor:this.mainColor},a);this.create();$(b).append(this.background)}
form.prototype.create=function(){$(this).data();var a=this,b=colorDiv(this.formConfig.mainColor,50);this.titleBox=$('<div style="position:absolute; width:300px; height:300px;"></div>');this.contentBox=$('<div style="position:absolute; width:300px; height:300px;"></div>');this.background.append(this.titleBox);this.background.append(this.contentBox);this.background.css({"background-color":this.formConfig.mainColor,"-webkit-border-radius":"5px","-moz-border-radius":"5px","border-radius":"5px",width:this.formConfig.width+
"px",height:this.formConfig.height+"px","-webkit-box-shadow":"0 0 5px rgba(40, 0, 0, 0.5)"});this.titleBox.css({"background-color":b,"-webkit-border-radius":"5px","-moz-border-radius":"5px","border-radius":"5px",width:this.formConfig.width+"px",height:"35px"});this.contentBox.css({top:"35px",left:"0px",width:this.formConfig.width+"px",height:this.formConfig.height-35+"px"});this.initTitleBox();this.drapable=!1;this.formPositionY=this.formPositionX=this.mouseDownPointY=this.mouseDownPointX=0;$(this.titleBox).bind(_event._down,
function(b){var d=a.titleBox[0];d.setCapture?d.setCapture():window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);b=isTouch?b.originalEvent.touches:[b];a.drapable=!0;a.mouseDownPointX=b[0].pageX;a.mouseDownPointY=b[0].pageY;a.formPositionX=$(a.titleBox).offset().left;a.formPositionY=$(a.titleBox).offset().top;return!1});$(this.titleBox).bind(_event._end,function(){var b=a.titleBox[0];b.releaseCapture?b.releaseCapture():window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP);return a.drapable=!1});$(this.titleBox).bind(_event._move,
function(b){b=isTouch?b.originalEvent.touches:[b];if(a.drapable){var d=b[0].pageX-a.mouseDownPointX,b=b[0].pageY-a.mouseDownPointY;$(a.background).css({left:a.formPositionX+d+"px",top:a.formPositionY+b+"px"})}return!1});$(this.titleBox).bind("mouseleave",function(){return a.drapable=!1});$(this.background).bind(_event._down,function(){"msie"==browserType?event.cancelBubble=!0:event.stopPropagation()});$(this.background).bind(_event._move,function(){});$(this.background).bind(_event._end,function(){})};
form.prototype.initTitleBox=function(){$(this).data();this.captionBox=new label(this.formConfig.caption,this.titleBox);this.closeButton=new button(1,this.titleBox,{iconURL:this.formConfig.closeIconURL},!0);this.captionBox.setLabelPosition(5,(30-this.captionBox.getHeight())/2);this.closeButton.setButtonPosition(35,3,["right","top"]);this.closeButton.onMouseUp(this,this.closeForm)};form.prototype.getWidth=function(){return this.width};
form.prototype.setWidth=function(a){$(this).data();this.width=a;100>a&&(this.width=100);this.background.css({width:this.width+"px"});this.contentBox.css({width:this.width+"px"});this.titleBox.css({width:this.width+"px"})};form.prototype.getHeight=function(){return this.height};form.prototype.setHeight=function(a){$(this).data();this.height=a;100>=a&&(this.height=100);this.background.css({height:this.height+"px"});this.contentBox.css({height:this.height-this.titleBox.height()+"px"})};
form.prototype.onResize=function(a,b){this.setWidth(a);this.setHeight(b)};form.prototype.setColor=function(){};form.prototype.closeForm=function(){$(this.background).css({display:"none"})};var searchWord="",searchPageArr=[],isSearchDrag=!1;
function searchForm(a,b){form.call(this,a,b);this.textField=$('<input id="search_text_textField" style="position : absolute" type="text" size="13">');this.searchButton=new button(1,this.contentBox,{iconURL:uiBaseURL+"searchButton.png"});$(this.textField).css({top:"9px",left:"15px",width:"160px"});this.searchButton.setButtonPosition(190,5);this.searchItemsBox=$("<div></div>");this.searchScrollBox=$("<div></div>");this.lblSearchTotalItem=new label(" ",this.contentBox);this.lblSearchTotalItem.setFont("14px",
"#000000",null);$(this.contentBox).append(this.textField);$(this.contentBox).append(this.searchScrollBox);this.onResize(290,400);void 0==window.textForPages&&(window.textForPages=[]);$(this.searchScrollBox).css({position:"absolute",width:this.width-10+"px",height:this.height-95+"px","overflow-y":"auto",top:"55px",left:"5px"});this.lblSearchTotalItem.setLabelPosition(15,34);$(this.background).css({display:"none",bottom:"45px",right:"35px","z-index":100,opacity:0.95});this.initEvent();this.captionBox.setFont("15px",
"#f0f0f0",null);this.captionBox.setCaption("<strong>Search</strong>");this.mouseDownY=-1;this.scrollMouseDown=!1}$.extend(searchForm.prototype,form.prototype);
$.extend(searchForm.prototype,{initEvent:function(){var a=this;this.searchButton.onMouseUp(this,this.searchStart);$(this.textField).bind("keydown",function(b){13==b.keyCode&&a.searchStart()});$(this.contentBox).bind(_event._down,function(b){a.scrollMouseDown=!0;isSearchDrag=!1;b=isTouch?b.originalEvent.touches:[b];a.mouseDownY=b[0].pageY});$(this.contentBox).bind(_event._move,function(b){a.scrollMouseDown&&(b=isTouch?b.originalEvent.touches:[b],20<Math.abs(a.mouseDownY-b[0].pageY)&&(isSearchDrag=
!0))});$(this.contentBox).bind(_event._end,function(){a.scrollMouseDown=!1})},addItems:function(a){searchPageArr=[];for(var b=0;b<a.length;b++){var c=a[b],d=new searchItem(c.search_page,c.search_text,this.searchScrollBox);searchPageArr.push(c.search_page);d.setPosition(11,b*d.getHeight()+2)}},onScrollBoxResize:function(a,b){$(this.searchScrollBox).css({width:a+"px",height:b+"px"})},clearItems:function(){$(this.searchScrollBox).empty();searchWord="";this.lblSearchTotalItem.setCaption("");$(this.textField).val("")},
searchStart:function(){$(this.searchScrollBox).empty();var a=$(this.textField).val();searchWord=a;a=searchFromPages(textForPages,a);this.addItems(a);this.lblSearchTotalItem.setCaption("Searched "+a.length+" items")},closeForm:function(){this.isSearchShow&&($(this.background).css({display:"none"}),this.clearItems(),this.isSearchShow=!1)},showForm:function(){$(this.background).css({display:"block"});this.isSearchShow=!0;$(this.textField).focus()},onResize:function(a,b){this.width=100>a?100:a;this.height=
100>b?100:b;$(this.background).css({width:this.width+"px",height:this.height+"px"});$(this.titleBox).css({width:this.width+"px"});$(this.contentBox).css({width:this.width+"px",height:this.height-$(this.titleBox).height()+"px"});$(this.searchItemsBox).css({width:this.width-10+"px",height:this.height-95+"px"});$(this.searchScrollBox).css({width:this.width-10+"px",height:this.height-95+"px"})},correctPosition:function(a){$(this.background).offset().left+290>a&&$(this.background).css({left:a-320+"px"})},
isSearchShow:!1});function treeNode(a,b){this.config=$.extend({caption:"untitled",page:0,width:280,height:40,backColor:"#888888",level:0},a);var c=this;this.background=$('<div style="position:relative; overflow : hidden;"></div>');this.contentBox=$('<div style="position:absolute;"></div>');this.textField=new label(this.config.caption,this.contentBox);this.expandButton=new button(1,this.contentBox,{iconURL:uiBaseURL+"closed.png"},!1,!0);this.children=[];this.opened=this.hasChild=!1;this.totalHeight=0;this.textField.shortWord(25);
this.isDrag=!1;this.expandButton.setVisible(!1);$(b).append(this.background);$(this.background).append(this.contentBox);this.expandButton.setButtonPosition(0,0);this.textField.setLabelPosition(38,10);$(this.contentBox).css({width:this.config.width-(12*(this.config.level-1)+30)+"px",height:this.config.height+"px",left:12*(this.config.level-1)+5+"px",cursor:"pointer"});$(this.background).css({width:this.config.width-25+"px",height:this.config.height+"px",left:"16px",top:"10px","background-color":this.config.backColor,
"border-left":"1px solid #555555","border-right":"1px solid #555555","border-bottom":"1px solid #555555"});this.expandButton.onMouseUp(this,this.onExpand);$(this.contentBox).bind(_event._end,function(){isBookmarkDrag||gotoPageFun(c.config.page);$(c.background).css({"background-color":c.config.backColor})});$(this.contentBox).bind(_event._down,function(){var a=colorDiv(c.config.backColor,60);$(c.background).css({"background-color":a})});$(this.contentBox).bind("mouseleave",function(){$(c.background).css({"background-color":c.config.backColor})})}
treeNode.prototype.setBorderTop=function(){$(this.background).css("border-top","1px solid #555555")};treeNode.prototype.setButtonVisible=function(a){this.expandButton.setVisible(a)};treeNode.prototype.setHasChildren=function(a){this.hasChild=a};treeNode.prototype.setVisible=function(a){$(this.background).css({display:a?"block":"none"})};treeNode.prototype.getIsExpand=function(){return this.opened};treeNode.prototype.setIsExpand=function(a){this.opened=a};treeNode.prototype.getBackground=function(){return this.background};
treeNode.prototype.getWidth=function(){return this.config.width};treeNode.prototype.getHeight=function(){return this.config.height};treeNode.prototype.setCaption=function(a){this.config.caption=a};treeNode.prototype.setColor=function(){};treeNode.prototype.setPosition=function(a,b,c){void 0==c&&(c=["left","top"]);$(this.background).css(c[0],a+"px");$(this.background).css(c[1],b+"px")};
treeNode.prototype.onResize=function(a,b){this.config.width=a;this.config.height=b;$(this.background).css({width:a+"px",height:b+"px"})};treeNode.prototype.getTotalHeight=function(){return this.totalHeight};treeNode.prototype.expand=function(){if(this.hasChild){this.expandButton.changeIcon(uiBaseURL+"opened.png");for(var a=0;a<this.children.length;a++)this.children[a].setVisible(!0),this.children[a].getIsExpand()&&this.children[a].expand()}};
treeNode.prototype.collapse=function(){if(this.hasChild){this.expandButton.changeIcon(uiBaseURL+"closed.png");for(var a=0;a<this.children.length;a++)this.children[a].setVisible(!1),this.children[a].collapse()}};treeNode.prototype.onExpand=function(){this.opened?this.collapse():this.expand();this.opened=!this.opened;$(this.background).css({"background-color":this.config.backColor})};treeNode.prototype.addChildren=function(a){this.children.push(a)};
treeNode.prototype.addNode=function(a){this.children.push(new treeNode(a,this.background))};treeNode.prototype.deleteNode=function(){};treeNode.prototype.getPageIndex=function(){return this.config.page};var isBookmarkDrag=!1;
function tableContent(a,b){form.call(this,a,b);this.scrollMask=$('<div style = "position : absolute;"></div>');this.scrollBox=$('<div style = "position : absolute; width : 290px; height : 300px; overflow-y : auto;"></div>');this.scrollMouseDown=!1;this.mouseDownY=-1;this.showing=!1;this.onResize(290,4*(window.innerHeight/5));$(this.contentBox).append(this.scrollMask);$(this.scrollMask).append(this.scrollBox);this.closeForm();this.captionBox.setFont("15px","#f0f0f0",null);this.captionBox.setCaption("<strong>Table of Content</strong>");this.initScrollEvent();
try{this.addContent(ols,!1)}catch(c){$("#btnBookmark").css({display:"none"}),bookmarkButtonEnable=!1}$(this.background).css({opacity:0.95,"z-index":99,top:"20px",left:"20px"})}$.extend(tableContent.prototype,form.prototype);
tableContent.prototype.addContent=function(a,b,c){for(var d=0;d<a.length;d++){var e=new treeNode(a[d],this.scrollBox);!b&&0==d&&e.setBorderTop();b&&(c.addChildren(e),e.setVisible(!1));1<=a[d].children.length&&(e.setButtonVisible(!0),e.setHasChildren(!0),this.addContent(a[d].children,!0,e))}};
tableContent.prototype.onResize=function(a,b){this.setWidth(a);this.setHeight(b);$(this.scrollMask).css({width:this.width+"px",height:this.height-this.titleBox.height()+"px"});$(this.scrollBox).css({width:this.width+"px",height:this.height-this.titleBox.height()-15+"px"})};tableContent.prototype.showForm=function(){$(this.background).css({display:"block"});this.showing=!0};tableContent.prototype.closeForm=function(){$(this.background).css({display:"none"});this.showing=!1};
tableContent.prototype.getShowStatu=function(){return this.showing};tableContent.prototype.setShowStatu=function(a){this.showing=a};tableContent.prototype.setPosition=function(a,b,c){void 0==c&&(c=["left","top"]);$(this.background).css(c[0],a+"px");$(this.background).css(c[1],b+"px")};
tableContent.prototype.initScrollEvent=function(){var a=this;$(this.scrollBox).bind(_event._down,function(b){a.scrollMouseDown=!0;isBookmarkDrag=!1;b=isTouch?b.originalEvent.touches:[b];a.mouseDownY=b[0].pageY;"msie"==browserType?event.cancelBubble=!0:event.stopPropagation()});$(this.scrollBox).bind(_event._move,function(b){a.scrollMouseDown&&(b=isTouch?b.originalEvent.touches:[b],20<Math.abs(a.mouseDownY-b[0].pageY)&&(isBookmarkDrag=!0))});$(this.scrollBox).bind(_event._end,function(){a.scrollMouseDown=
!1})};function thumbnailCell(a){this.background=$("<div></div>");this.img=$("<img />");this.pageIndex=-1;this.width=65;this.height=85;this.pageTextField=new label(1,this.background);this.imgHeight=this.imgWidth=-1;$(a).append(this.background);$(this.background).css({position:"absolute",width:this.width+"px",height:this.height+"px"});$(this.img).css({position:"absolute"});this.pageTextField.setFont("12px","#f0f0f0",null);this.pageTextField.setLabelPosition((this.width-this.pageTextField.getWidth())/2,0,
["left","bottom"])}thumbnailCell.prototype.getPageIndex=function(){return this.pageIndex};thumbnailCell.prototype.getWidth=function(){return this.width};thumbnailCell.prototype.getHeight=function(){return this.height};thumbnailCell.prototype.setPosition=function(a,b,c){void 0==c&&(c=["left","top"]);$(this.background).css(c[0],a+"px");$(this.background).css(c[1],b+"px")};thumbnailCell.prototype.onResize=function(a,b){$(this.background).css({width:a+"px",height:b+"px"});this.onResizeImage(a,b)};
thumbnailCell.prototype.onResizeImage=function(){var a=getPageWidthHeight(this.width,this.height-20,zoomPageWidth,zoomPageHeight);this.imgWidth=a.x;this.imgHeight=a.y;$(this.img).css({width:a.x+"px",height:a.y+"px"});$(this.img).css({left:(this.width-a.x)/2+"px",top:(this.height-20-a.y)/2+4+"px"})};
thumbnailCell.prototype.setImgPosition=function(a){switch(a){case "l":$(this.img).css({left:"0px",right:"auto"});break;case "r":$(this.img).css({right:"0px",left:"auto"});break;case "c":$(this.img).css({left:(this.width-this.imgWidth)/2+"px",right:"auto"})}};thumbnailCell.prototype.setCaption=function(a){this.pageTextField.setCaption(a)};
thumbnailCell.prototype.fillImage=function(a){this.pageIndex=a;$(this.img).attr("src",getPageDir(a,"thumb"));$(this.background).append(this.img);this.onResizeImage(this.width,this.height);this.pageTextField.setCaption(a)};thumbnailCell.prototype.showBorder=function(){$(this.background).css({border:"1px solid #444444"})};thumbnailCell.prototype.hideBorder=function(){$(this.background)[0].style.border=""};thumbnailCell.prototype.getTextField=function(){return this.pageTextField};
thumbnailCell.prototype.hideTextField=function(){this.pageTextField.setCSS({display:"none"})};thumbnailCell.prototype.showTextField=function(){this.pageTextField.setCSS({display:"block"})};thumbnailCell.prototype.showCell=function(a){$(this.background).css({display:a?"block":"none"})};thumbnailCell.prototype.onMouseUp=function(a,b){var c=this;$(this.background).bind(_event._end,function(){b.call(a,c)})};thumbnailCell.prototype.highLight=function(a){$(this.background).css({"background-color":a})};
thumbnailCell.prototype.clearHighLight=function(){$(this.background).css({"background-color":""})};function thumbnailItem(a,b){this.background=$("<div></div>");this.itemB=new thumbnailCell(this.background);this.itemA=new thumbnailCell(this.background);this.width=130;this.height=85;this.isMerge=this.isDoublePage=!0;this.pageIndex=b;this.mainColor="#888888";this.textField=new label(b+"-"+(b+1),this.background);this.textField.setLabelPosition((this.width-this.textField.getWidth())/2,0,["left","bottom"]);this.textField.setFont("12px","#f0f0f0",null);$(a).append(this.background);$(this.background).css({position:"absolute",
border:"1px solid #555555",width:this.width+"px",height:this.height+"px"});1!=b&&b!=totalPageCount?(this.itemA.setPosition(0,0),this.itemB.setPosition(0,0,["right","top"]),this.itemB.onMouseUp(this,this.onItemMouseUp)):(this.itemA.setPosition(0,0),this.itemB.showCell(!1),this.textField.setCSS({display:"none"}),this.setBorder(!1));this.itemA.onMouseUp(this,this.onItemMouseUp);this.addImage()}thumbnailItem.prototype.getWidth=function(){return this.width};
thumbnailItem.prototype.addImage=function(){this.itemA.fillImage(this.pageIndex);1!=this.pageIndex&&this.pageIndex!=totalPageCount&&this.itemB.fillImage(this.pageIndex+1)};thumbnailItem.prototype.setPosition=function(a,b,c){void 0==c&&(c=["left","top"]);$(this.background).css(c[0],a+"px");$(this.background).css(c[1],b+"px")};thumbnailItem.prototype.onResize=function(a,b){this.width=a;this.height=b;$(this.background).css({width:a+"px",height:b+"px"})};thumbnailItem.prototype.resetItem=function(){};
thumbnailItem.prototype.fission=function(){1==this.pageIndex||this.pageIndex==totalPageCount||(this.setBorder(!1),this.itemA.setImgPosition("c"),this.itemB.setImgPosition("c"),this.showTextField(!1),this.isMerge=!1,this.onResize(140,85))};thumbnailItem.prototype.merge=function(){1==this.pageIndex||this.pageIndex==totalPageCount||(this.setBorder(!0),this.itemA.setImgPosition("r"),this.itemB.setImgPosition("l"),this.showTextField(!0),this.isMerge=!0,this.onResize(130,85))};
thumbnailItem.prototype.showBorder=function(){$(this.background).css({border:"1px solid #444444"})};thumbnailItem.prototype.hideBorder=function(){$(this.background)[0].style.border=""};thumbnailItem.prototype.showTextField=function(a){var b=a?"none":"block";this.textField.setCSS({display:a?"block":"none"});this.itemA.getTextField().setCSS({display:b});this.itemB.getTextField().setCSS({display:b})};
thumbnailItem.prototype.setBorder=function(a){a?($(this.background).css({border:"1px solid #444444"}),this.itemA.hideBorder(),this.itemB.hideBorder()):($(this.background)[0].style.border="",this.itemA.showBorder(),this.itemB.showBorder())};thumbnailItem.prototype.onItemMouseUp=function(a){isThumbDrag||(a=a.getPageIndex(),gotoPageFun(a))};
thumbnailItem.prototype.highLight=function(a){var b=colorDiv(this.mainColor,50);this.isMerge?1==a||a==totalPageCount?this.itemA.highLight(b):$(this.background).css({"background-color":b}):a==this.pageIndex?this.itemA.highLight(b):this.itemB.highLight(b)};thumbnailItem.prototype.clearHighLight=function(){$(this.background).css({"background-color":""});this.itemA.clearHighLight();this.itemB.clearHighLight()};var isThumbDrag=!1;
function thumbnailBar(a){this.background=$("<div class='thumbBar'></div>");this.contentBox=$("<div class='thumbBG'></div>");this.scrollBox=$("<div class='thumbBox'></div>");this.mouseDown=this.showing=!1;this.scrollBoxX=this.mouseDownX=-1;this.width=800;this.height=120;this.mainColor="#888888";this.thumbArray=[];this.lastMoveTime=this.lastMoveX=-1;this.mergeing=this.moveLeft=!1;$(this.contentBox).css({"-webkit-box-shadow":"0 0 5px rgba(40, 0, 0, 0.5)","-moz-box-shadow":"0 0 5px rgba(40, 0, 0, 0.5)","-o-box-shadow":"0 0 5px rgba(40, 0, 0, 0.5)",
"box-shadow":"0 0 5px rgba(40, 0, 0, 0.5)"});$(a).append(this.background);$(this.background).append(this.contentBox);$(this.contentBox).append(this.scrollBox);this.closeButton=new button(1,this.background,{iconURL:uiBaseURL+"close.png"},!0);this.closeButton.setButtonPosition(5,0,["right","top"]);this.addItem();this.initEvent();this.setHighLight(1)}
thumbnailBar.prototype.onResize=function(){var a=$(this.background).width(),b=$(this.scrollBox).width();if(a>b)$(this.scrollBox).css({left:(a-b)/2+"px"});else{var c=$(this.scrollBox).offset().left;0<c&&(c=0);c<a-b&&(c=a-b);$(this.scrollBox).css({left:c+"px"})}};thumbnailBar.prototype.setPosition=function(a,b,c){void 0==c&&(c=["left","top"]);$(this.background).css(c[0],a+"px");$(this.background).css(c[1],b+"px")};
thumbnailBar.prototype.addItem=function(){for(var a=0;a<=originTotalPageCount;){var b=0==a?new thumbnailItem(this.scrollBox,1):new thumbnailItem(this.scrollBox,a);b.getWidth();b.setPosition(this.thumbArray.length*(b.getWidth()+5)+5,5);this.thumbArray.push(b);a+=2}$(this.scrollBox).css({width:this.thumbArray.length*(b.getWidth()+5)+10+"px"});this.mergeAll()};
thumbnailBar.prototype.resetItemPosition=function(){for(var a=0,b=0;b<this.thumbArray.length;b++){var c=this.thumbArray[b];0==b?(c.setPosition(5,5),a=80):(c.setPosition(a,5),a=a+c.getWidth()+5)}$(this.scrollBox).css({width:a+"px"})};thumbnailBar.prototype.mergeAll=function(){if(!this.mergeing){for(var a=0;a<this.thumbArray.length;a++)this.thumbArray[a].merge();this.resetItemPosition();this.mergeing=!0}};
thumbnailBar.prototype.fissionAll=function(){for(var a=0;a<this.thumbArray.length;a++)this.thumbArray[a].fission();this.resetItemPosition();this.mergeing=!1};thumbnailBar.prototype.getShowStatu=function(){return this.showing};thumbnailBar.prototype.setShowStatu=function(a){this.showing=a};thumbnailBar.prototype.showshow=function(){$(this.background).animate({bottom:0},300);this.showing=!0};thumbnailBar.prototype.hideBox=function(){$(this.background).animate({bottom:-150},300);this.showing=!1};
thumbnailBar.prototype.initEvent=function(){var a=this;this.background.bind(_event._down,function(){return!1});this.closeButton.onMouseUp(this,this.hideBox);$(this.contentBox).bind(_event._down,function(b){a.mouseDown=!0;isThumbDrag=!1;b=isTouch?b.originalEvent.touches:[b];a.mouseDownX=b[0].pageX;a.scrollBoxX=$(a.scrollBox).offset().left;return!1});$(this.contentBox).bind(_event._move,function(b){if(a.mouseDown){var b=isTouch?b.originalEvent.touches:[b],c=a.mouseDownX-b[0].pageX;20<Math.abs(c)&&(isThumbDrag=
!0);$(a.background).width()>$(a.scrollBox).width()||(c=a.scrollBoxX-c,0<c&&(c=0),c<$(a.background).width()-$(a.scrollBox).width()&&(c=$(a.background).width()-$(a.scrollBox).width()),$(a.scrollBox).css({left:c+"px"}),a.moveLeft=a.lastMoveX>b[0].pageX?!0:!1,a.lastMoveX=b[0].pageX,a.lastMoveTime=(new Date).getTime())}});$(this.contentBox).bind(_event._end,function(){a.mouseDown=!1;if(100>(new Date).getTime()-a.lastMoveTime&&-1!=a.lastMoveTime){var b=a.moveLeft?-30:30;a.tweener($(a.scrollBox).offset().left,
b,10)}});$(this.contentBox).bind("mouseleave",function(){a.mouseDown=!1})};
thumbnailBar.prototype.setHighLight=function(a){var b=Math.floor(a/2);if(!(a>originTotalPageCount))if(this.thumbArray[b].highLight(a),$(this.background).width()>$(this.scrollBox).width())$(this.scrollBox).css({left:($(this.background).width()-$(this.scrollBox).width())/2+"px"});else{var a=$(this.scrollBox).offset().left,c=$(this.background).width(),d=(b-1)*(this.thumbArray[b].getWidth()+5)+75,b=this.thumbArray[b].getWidth();this.tweener(a,-(d+a-(c-b)/2)/6,6)}};
thumbnailBar.prototype.clearHighLight=function(){for(var a=0;a<this.thumbArray.length;a++)this.thumbArray[a].clearHighLight()};
thumbnailBar.prototype.tweener=function(a,b,c){var d=function(a,b){for(var c=b/2,d=(a-a/4)/c,e=Array(b),g=0;g<b;g++)e[g]=g<c?a-(c-g)*d:a+(g-c+1)*d;return e.reverse()}(b,c),e=a,g=0,h=this,j=window.setInterval(function(){e+=d[g];g++;g==c&&(e=a+b*c);0<e&&(e=0);e<$(h.background).width()-$(h.scrollBox).width()&&(e=$(h.background).width()-$(h.scrollBox).width());$(h.scrollBox).css({left:e+"px"});g>=c&&window.clearInterval(j)},30)};function link(a,b){var c=$("<div style='position: absolute;'></div>"),d=pageEditor[a-1][b].action;void 0!=d.length&&(d=d[0]);var e=d.url;null!=e&&"www."==e.substr(0,4).toLowerCase()&&(e="http://"+e);var g;try{g=d.triggerEventType}catch(h){g=null}c.bind(_event._down,function(){var h=colorTo0x(pageEditor[a-1][b].downColor);c.css({"background-color":h,opacity:pageEditor[a-1][b].downAlpha});g==PageEditor.TriggerEventType.MouseDown&&(d.actionType==PageEditor.ActionType.GOTO_PAGE?gotoPageFun(d.pageIndex):
d.actionType==PageEditor.ActionType.OPEN_URL&&window.open(e,d.linkTarget));"msie"==browserType?event.cancelBubble=!0:event.stopPropagation()});c.bind("mouseover",function(){var h=colorTo0x(pageEditor[a-1][b].overColor);c.css({"background-color":h,opacity:pageEditor[a-1][b].overAlpha});g==PageEditor.TriggerEventType.MouseOver&&(d.actionType==PageEditor.ActionType.GOTO_PAGE?gotoPageFun(d.pageIndex):d.actionType==PageEditor.ActionType.OPEN_URL&&window.open(e,d.linkTarget))});c.bind(isTouch?_event._end:
"mouseout",function(){var h=colorTo0x(pageEditor[a-1][b].outColor);c.css({"background-color":h,opacity:pageEditor[a-1][b].outAlpha});g==PageEditor.TriggerEventType.MouseOut&&(d.actionType==PageEditor.ActionType.GOTO_PAGE?gotoPageFun(d.pageIndex):d.actionType==PageEditor.ActionType.OPEN_URL&&window.open(e,d.linkTarget))});$.fn.extend(c,{onResize:function(d,e){var g=pageEditor[a-1][b].location;c.css({top:g.y*e+"px",left:g.x*d+"px",width:g.width*d+"px",height:g.height*e+"px"})}});return c}
function initLink(a,b,c,d){this.link=$("<div style='position: absolute;'></div>");this.config=$.extend({width:0.2,height:0.2,x:0.2,y:0.2,action:null},b);this.pw=c;this.ph=d;this.width=this.pw*this.config.width;this.height=this.ph*this.config.height;a.append(this.link);void 0==this.config.downColor?(this.config.downColor=getColor("LinkDownColor","#808080"),this.config.downAlpha=getInt("LinkAlpha",0.6),this.config.overColor=this.config.downColor,this.config.outColor=this.config.downColor,this.config.overAlpha=
this.config.downAlpha/2,this.config.outAlpha=0):(this.config.downColor=colorTo0x(this.config.downColor),this.config.overColor=colorTo0x(this.config.overColor),this.config.outColor=colorTo0x(this.config.outColor));this.link.css({position:"absolute",top:this.config.y*this.ph+"px",left:this.config.x*this.pw+"px",width:this.width+"px",height:this.height+"px"});this.father=a;this.initEvt()}
initLink.prototype.onResize=function(a,b){this.pw=a;this.ph=b;this.width=this.config.width*a;this.height=this.config.height*b;var c=this.config.y*b,d=this.config.x*a;this.link.css({width:this.width+"px",height:this.height+"px"});this.setPosition(d,c);if(null!=this.form)this.form.onResize(bookContainer.width(),bookContainer.height());if(null!=this.slide)this.slide.onResize(bookContainer.width(),bookContainer.height())};initLink.prototype.setPosition=function(a,b){this.link.css({left:a+"px",top:b+"px"})};
initLink.prototype.initEvt=function(){var a=this;this.flag=0;this.slide=this.form=null;this.linkURL;if(null!=a.config.action){try{void 0!=this.config.action.length&&(this.config.action=this.config.action[0]),this.linkURL=this.config.action.url}catch(b){}var c;null!=this.linkURL&&"www"==this.linkURL.substr(0,3).toLowerCase()&&(this.linkURL="http://"+this.linkURL);try{c=this.config.action.triggerEventType}catch(d){c=null}}this.link.bind(_event._down,function(){a.link.css({"background-color":a.config.downColor,
opacity:a.config.downAlpha});c==PageEditor.TriggerEventType.MouseDown&&actionEvent.call(a);"msie"==browserType?event.cancelBubble=!0:event.stopPropagation()});this.link.bind("mouseover",function(){a.link.css({"background-color":a.config.overColor,opacity:a.config.overAlpha});c==PageEditor.TriggerEventType.MouseOver&&actionEvent.call(a)});this.link.bind(isTouch?_event._end:"mouseout",function(){a.link.css({"background-color":a.config.outColor,opacity:a.config.outAlpha});c==PageEditor.TriggerEventType.MouseOut&&
actionEvent.call(a)})};function thickness(a){var b=$("<div></div>"),c=$("<img src='"+uiBaseURL+"thickness.png' style='position:absolute;' />");b.append(c);$.fn.extend(b,{visible:!0,onResize:function(a,e){b.css({width:a,height:e});c.css({width:a,height:e})},setThicknessPosition:function(c,e){b.css({left:c,top:e,position:"absolute","z-index":a?8:9})},hideThickness:function(){b.css("display","none")},showThickness:function(){b.css("display","block")},setVisible:function(a){b.css({display:a?"block":"none"});b.visible=a}});
a&&c.css({"-webkit-transform":"scaleX(-1)","-moz-transform":"scaleX(-1)","-o-transform":"scaleX(-1)"});return b};var gradientColorA,gradientColorB,gradientColorAngle,backGroundImgURL,zoomButtonEnable=!0,thumbButtonEnable=!0,shareButtonEnable=!0,searchButtonEnable=!0,bookmarkButtonEnable=!0,windowWidth=0,windowHeight=0,toolBarColor,buttonColor,originTotalPageCount,totalPageCount,leftShadowWidth=50,rightShadowWidth=50,zoomPageWidth,zoomPageHeight,flipTime=600,isRegister=!1,bookDescription,bookTitle,showFlipButton,normalEventRadius=1E4,singleEventRadius=1E4,stopFlip=!1,flipping=!1,isTouch="Touch"in window,bookContainer,
tmpContainer,zoomBook,flipBook,toolBar,pageIndexTextField,topMargin,leftMargin,bottomMargin,rightMargin,bookType=BookType.normal_book,resizeBookAfterFlip=!1,frmSearch,_rimFlip,flipAudio,backgroundAudio,auto_player,productName,homePage,_tipsBox,frmBookmark,thumbnail,oriPageIndex=1,googleID,hardPageEnable,uiBaseURL,browserType,rightToLeft=!1,appName="",flaudio=0,flagspeak=0,userConfig={leftShadowWidth:30,leftShadowAlpha:1,rightShadowWidth:30,rightShadowAlpha:1,shortcutButtonHeight:370,shortcutButtonWidth:90,
autoPlayButtonVisible:"true",downloadButtonVisible:"false",downloadURL:""},getAliasValue=function(a){a=bookConfig[a]?bookConfig[a]:aliasConfig[a]?aliasConfig[a]:void 0;if(a instanceof Array){if(!(1>a.length))for(var b=0;b<a.length;b++){if(void 0!=bookConfig[a[b]])return bookConfig[a[b]];if(b==a.length-1)break}}else return a},getString=function(a,b){var c=getAliasValue(a);return void 0==c?b:c},getInt=function(a,b){var c=getAliasValue(a);try{return isNaN(c)||void 0==c?b:Number(c)}catch(d){return b}},
getBool=function(a,b){var c=["true","yes","show","enable"],d=["false","no","hide","disanble"],e=getAliasValue(a);try{e=e.toLowerCase()}catch(g){return b}return 0>c.indexOf(e)&&0>d.indexOf(e)?b:0<=c.indexOf(e)},getColor=function(a,b){var c=getAliasValue(a);return void 0!=c?colorTo0x(c):b},singlePageBook,leftShortcutButton,rightShortcutButton,init=function(){if(compareov())if(void 0==window.bookConfig)alert("Miss book config.");else{void 0==window.pageEditor&&(window.pageEditor=void 0);void 0==window.textForPages&&
(window.textForPages=[],searchButtonEnable=!1);void 0==window.ols&&(window.ols={},bookmarkButtonEnable=!1);_singleBook=$("#singleBook");toolBar=$("#fbToolBar");pageIndexTextField=$("#currentPageIndexTextField");bookContainer=$("#bookContainer");flipBook=rightToLeft?new rightToLeftNormalBook:new normalBook;flipBook.create(bookContainer);zoomBook=new initZoomBook(bookContainer);setBackGround();singlePageBook=new singleBook;singlePageBook.Create();initToolBar();showFlipButton&&(leftShortcutButton=new initLeftOrRightButton(tmpContainer,
!0),rightShortcutButton=new initLeftOrRightButton(tmpContainer,!1));frmBookmark=new tableContent({caption:"Table of Content",closeIconURL:uiBaseURL+"close.png"},bookContainer);frmSearch=new searchForm({caption:"Search",closeIconURL:uiBaseURL+"close.png"},bookContainer);_rimFlip=new rimFlip;1!=oriPageIndex&&_rimFlip.removeRimFlip();onStageResize();setToolBarPosition();_tipsBox=new tipsBox("This is the last page",bookContainer);_tipsBox.setPosition((windowWidth-_tipsBox.getWidth())/2,100);auto_player=
new autoFlip;bookType=windowWidth>=windowHeight?BookType.normal_book:BookType.single_book;isTouch?window.onorientationchange=function(){onStageResize()}:$(window).resize(function(){onStageResize()});var a=window.location.hash;""!=a&&3<a.length&&"#p="==a.substr(0,3)&&(isNaN(a.substr(3,a.length-3))||window.setTimeout(function(){var b=a.substr(3,a.length-3);gotoPageFun(b)},1E3));initEvent()}else alert("Purchase from www.flipbuilder.com to preview the book.")};
function createAll(){tmpContainer=$("<div class='bookStage' id= 'tmpContainer'></div>");bookContainer=$("<div class='bookStage' id= 'bookContainer'></div>");$("body").append(tmpContainer);tmpContainer.append(bookContainer);bookContainer.css({"-webkit-transform":"perspective(1000px)","-moz-transform":"perspective(1000px)"});var a=$("<div id='singleBookMask' style='position: absolute;'></div>");_singleBook=$("<div id='singleBook' class='singleBook' style='display: none; position: absolute;'></div>");
var b=$("<div id='singlePrePage' style='position: absolute;z-index: 1;'></div>"),c=$("<div id='singleCurPage' style='position: absolute;z-index: 3;'></div>"),d=$("<div id='singleNextPage' style='position: absolute;z-index: 2;'></div>");bookContainer.append(a);a.append(_singleBook);_singleBook.append(b);_singleBook.append(c);_singleBook.append(d);var a=$("<div class='fbToolBar' id='fbToolBar'></div>"),b=$("<img id='toolBarBack' alt='&gt;'  src='"+uiBaseURL+"BackGround.jpg' style='position: absolute;z-index: 1;' />"),
c=$("<div id='logoBar' style='position: absolute;z-index: 2;'></div>"),d=$("<div class='bottom right' style='position: absolute;left: auto;right: 0px;z-index: 3;'></div>"),e=$("<div title='Last Page' id='btnLast' class='numbering'><img alt='&gt;' src='"+uiBaseURL+"Last.png'></div>"),g=$("<div title='Next Page' id='btnRight' class='numbering'><img alt='&gt;' src='"+uiBaseURL+"next.png'></div>"),h=$("<div class='numbering' id='tfPageIndex'><input type='text' id='currentPageIndexTextField' size='13' value='' style='text-align: center' /></div>"),
j=$("<div title='Previous Page'  id='btnLeft' class='numbering'><img alt='&lt;' src='"+uiBaseURL+"prev.png'></div>"),k=$("<div title='First Page' id='btnFirst' class='numbering' ><img alt='&lt;' src='"+uiBaseURL+"First.png'></div>"),o=$("<div title='Auto Play' id='btnAutoPlay' class='numbering' ><img alt='&lt;' id='autoPlayImg' src='"+uiBaseURL+"autoPlay.png'></div>"),r=$("<div title='Zoom In' id='btnZoom' class='numbering'> <img id='zoomImg' alt='&lt;' src='"+uiBaseURL+"ZoomIn.png'/> </div>"),n=
$("<div title='Thumbnails'  id='btnThumb' class='numbering'><img alt='&lt;' src='"+uiBaseURL+"thumbnails.png'></div>"),t=$("<div title='Share'  id='btnShare' class='numbering'><img alt='&lt;' src='"+uiBaseURL+"sharethis.png'></div>"),y=$("<div title='Search' id='btnSearch' class='numbering'><img alt='&lt;' src='"+uiBaseURL+"search.png'></div>"),m=$("<div title='Bookmark' id='btnBookmark' class='numbering'><img alt='&lt;' src='"+uiBaseURL+"bookmark.png'></div>"),z=$("<div title='download' id='btnDownload' class='numbering'><img alt='&lt;' src='"+
uiBaseURL+"download.png' /></div>");tmpContainer.append(a);a.css("z-index",99);a.append(b);a.append(c);a.append(d);d.append(e);d.append(g);d.append(h);d.append(j);d.append(k);d.append(o);d.append(r);d.append(n);d.append(t);d.append(y);d.append(m);d.append(z);"undefined"!=typeof speakConfig&&"none"!=speakConfig.title&&(a=$("<div id='LectureBook' style='position:absolute;right:20px;bottom:40px; width:190px; height:330px;'></div>"),b=$("<div id='LectureBox' style='position:absolute;z-index:70; width:190px; height:88px;top:0;opacity:0.6;background-image:url(style/icon/lecturetext.png)'></div>"),
c=$("<div style='position:absolute;overflow: hidden; height:60px;top:5px;'><div id='LectureText' style='word-break: break-word;color:#fff;padding:5px 10px 5px 10px;text-shadow: 2px 2px 2px #000000;'></div></div>"),d=$("<div id='LecturePre' style='position:absolute; top:95px;left:25px;z-index:100;'></div>"),LectureCon=$("<div id='LectureCon' style='position:absolute; display:none;z-index:101; width:105px; height:105px; top:150px;left:40px;background-image:url(style/icon/co_bg.png)'><div style='position:absolute; cursor: pointer;width:23px;height:23px;left:41px; top:15px'><img id='lstop' src='style/icon/Pause.png' title='Pause' /></div><div style='position:absolute; cursor: pointer;width:23px;height:23px;right:15px;top:41px;'><img id='lnext' src='style/icon/Nextpage.png' title='Next Page' /></div><div style='position:absolute; cursor: pointer;width:23px;height:23px;left:15px;top:41px;'><img id='lpre' src='style/icon/Pre.png' title='Previous Page' /></div><div style='position:absolute; cursor: pointer;width:23px;height:23px;left:41px;bottom:15px;'><img id='laudio' src='style/icon/Muteclose.png' title='Mute' /></div></div>"),
LectureClose=$("<div id='LectureClose' style='position:absolute; right:60px; top:85px;display:none;z-index:200;cursor:pointer;'><img style='z-index:200;' src='style/icon/Closediv.png' title='Close' /></div>"),LectureShow=$("<div id='LectureShow' style='position:absolute; right:0;bottom:35px;display:none;z-index:200;cursor:pointer;'><img  src='style/icon/LectureShow.png' /></div>"),bookContainer.append(a),a.append(b),b.append(c),a.append(d),a.append(LectureCon),a.append(LectureClose),bookContainer.append(LectureShow))}
function LectureAudio(a){var b=document.getElementById("LecturePre");b.innerHTML="<img id='LectureSpe' style='width:126px;' src='"+uiBaseURL+"speak.gif' />";var c=document.createElement("audio");c.setAttribute("id","LectureID");c.type="audio/mpeg";c.setAttribute("autoplay","autoplay");0==speakConfig.page[a].type?c.src=speakConfig.page[a].speakmp3:(c.src=speakConfig.page[a].importmp3,$("#LectureBox").css("display","none"));b.appendChild(c)}
function LectureSoll(a){var b=$("#LectureText");$("#LectureBox").css("display","block");b.html(speakConfig.page[a].speaktext);var c=b.height();40<c&&b.animate({marginTop:-c+40+"px"},90*c,function(){b.css("marginTop",0);$("#LectureBox").css("display","none");$("#LectureSpe").attr("src",uiBaseURL+"nospeak.gif");a+1<totalPageCount/2+1&&0==flaudio&&(nextPageFun(),LectureAudio(a+1),LectureSoll(a+1))})}
function initToolBar(){thumbnail=new thumbnailBar(tmpContainer);initShareBar();initLogoBar();setPageIndexTextField();$("#btnLast").asButton();$("#btnFirst").asButton();$("#btnRight").asButton();$("#btnLeft").asButton();$("#btnZoom").asButton();$("#btnThumb").asButton();$("#btnShare").asButton();$("#btnSearch").asButton();$("#btnAutoPlay").asButton();$("#btnDownload").asButton();getBool("autoPlayAutoStart",!1)&&($("#autoPlayImg").attr("src",uiBaseURL+"stopAutoPlay.png"),$("#btnAutoPlay").attr("title",
"Stop Auto Play"))}
var setToolBarPosition=function(){$("#toolBarBack").css({width:windowWidth+"px",height:"42px"});var a=$("#tfPageIndex").width();$("#btnLast").css({right:"3px"});$("#btnRight").css({right:"48px"});$("#tfPageIndex").css({right:"93px",top:"5px"});$("#btnLeft").css({right:90+a+3+"px"});$("#btnFirst").css({right:135+a+3+"px"});a=180+a+3;userConfig.autoPlayButtonVisible&&($("#btnAutoPlay").css({right:a+"px"}),a+=45);zoomButtonEnable&&($("#btnZoom").css({right:a+"px"}),a+=45);thumbButtonEnable&&($("#btnThumb").css({right:a+
"px"}),a+=45);shareButtonEnable&&($("#btnShare").css({right:a+"px"}),a+=45,shareBar.setSharePosition(a-95,38));searchButtonEnable&&($("#btnSearch").css({right:a+"px"}),a+=45);bookmarkButtonEnable&&($("#btnBookmark").css({right:a+"px"}),a+=45);userConfig.downloadButtonVisible&&$("#btnDownload").css({right:a+"px"})},onStageResize=function(){resizeBookAfterFlip=!1;if(bookType==BookType.normal_book&&nBookStatu==normalBookStatu.book_statu_auto_flip||bookType==BookType.single_book&&1==$(singlePageBook).data().bookStatu)resizeBookAfterFlip=
!0;else{windowWidth=bookContainer.width();windowHeight=bookContainer.height();var a,b,c=windowWidth,d=windowHeight,e=bookConfig.largePageWidth,g=bookConfig.largePageHeight,h=c-leftMargin-rightMargin,j=d-topMargin-bottomMargin-40;bookContainer.resizeBackGroundImg(c,d);a=2*e/g;h/j>a?(b=j,a*=b):(a=h,b=g*a/(2*e));flipBook.onResize(a/2,b);flipBook.setCSS({top:(j-b)/2+topMargin+"px",left:(h-a)/2+leftMargin+"px"});flipBook.fillNearPage(flipBook.getCurrentPageIndex());b=getPageWidthHeight(c,d-toolBar.height(),
e,g);singlePageBook.onResize(b.x,b.y);singlePageBook.setBookPosition((c-b.x)/2,(d-toolBar.height()-b.y)/2);e=b=0;zoomBook.width<c&&(b=(c-zoomBook.width)/2);zoomBook.height<d&&(e=(d-zoomBook.height)/2);zoomBook.setPosition(b,e);flipBook.setThicknessPosition();bookType==BookType.normal_book&&c<d&&(changeShowBook(1),bookType=BookType.single_book,$(singlePageBook).data().gotoPage(flipBook.currentPageIndex),setCurrentIndexTextField($(singlePageBook).data().currentPageIndex,!1),thumbnail.clearHighLight(),
thumbnail.setHighLight(flipBook.currentPageIndex));bookType==BookType.single_book&&c>=d&&(changeShowBook(0),bookType=BookType.normal_book,flipBook.gotoPage($(singlePageBook).data().currentPageIndex),setCurrentIndexTextField(flipBook.currentPageIndex,!0),thumbnail.clearHighLight(),thumbnail.setHighLight($(singlePageBook).data().currentPageIndex));thumbnail.onResize();setToolBarPosition();frmSearch.onResize(290,4*d/5);frmSearch.correctPosition(c);if(void 0!=frmBookmark)frmBookmark.onResize(290,4*d/
5);void 0!=_tipsBox&&_tipsBox.setPosition((windowWidth-_tipsBox.getWidth())/2,100);showFlipButton&&(leftShortcutButton.setPosition(),rightShortcutButton.setPosition())}};
function initEvent(){var a=-1,b=void 0,c,d,e=!1;bookContainer.bind(_event._move,function(g){g=isTouch?g.originalEvent.touches:[g];if(2==g.length&&e){var h=$(singlePageBook).data(),j=globalToBook(!0,g[0].pageX,g[0].pageY,!0),g=globalToBook(!0,g[1].pageX,g[1].pageY);if(15<Math.abs(j.x-c.x)||15<Math.abs(j.y-c.y)||15<Math.abs(g.x-d.x)||15<Math.abs(g.y-d.y))zoomBook.currentIndex=h.currentPageIndex,zoomBook.showPage.fillContent(zoomBook.currentIndex),changeShowBook(2),bookType=2,$("#zoomImg").attr("src",
uiBaseURL+"ZoomOut.png"),$("#btnZoom").attr("title","Zoom Out"),setCurrentIndexTextField(zoomBook.currentIndex,!1),thumbnail.clearHighLight(),thumbnail.setHighLight(zoomBook.currentIndex);return!1}1==bookType&&$(singlePageBook).data().bookMouseDown&&(flipPoint=globalToBook(!0,g[0].pageX,g[0].pageY,!0),$(singlePageBook).data().flippingPage.flipToPoint(flipPoint),-1!=a&&(b=flipPoint.x>a?!1:!0),a=flipPoint.x);return!1});bookContainer.bind(_event._end,function(a){var c=$(singlePageBook).data(),a=isTouch?
a.originalEvent.changedTouches:[a];e=!1;if(bookType==BookType.single_book)if(c.bookMouseDown){var a=globalToBook(!0,a[0].pageX,a[0].pageY,!0),d=!0,k;if(c.isLeft&&a.x>=c.pageWidth/2||!c.isLeft&&a.x<c.pageWidth/2)d=!1;void 0!=b&&(d=!(c.isLeft^b));d||(rightToLeft?(c.gotoPageIndex=c.isLeft?c.currentPageIndex+1:c.currentPageIndex-1,c.differPageNum=c.isLeft?1:-1):(c.gotoPageIndex=c.isLeft?c.currentPageIndex-1:c.currentPageIndex+1,c.differPageNum=c.isLeft?-1:1));k=rightToLeft?d?Point(c.isLeft?0:2,c.isTop?
0:1):Point(c.isLeft?2:0,c.isTop?0:1):d?Point(c.isLeft?-1:1,c.isTop?0:1):Point(c.isLeft?1:-1,c.isTop?0:1);k=Point(k.x*c.pageWidth,k.y*c.pageHeight);c.timer("tr",6,30,k,a,!1,!0,!d);c.bookMouseDown=!1}else flipping&&2==c.bookStatu&&(stopFlip=!0)});bookContainer.bind(_event._down,function(g){document.getElementById("currentPageIndexTextField").blur();thumbnail.hideBox();a=-1;b=void 0;var h=$(singlePageBook).data(),g=isTouch?g.originalEvent.touches:[g];if(2==g.length){if(2==h.bookStatu){var j;"tl"==h.flippingPage.realCorner?
j=rightToLeft?Point(0,0):Point(-h.pageWidth,0):"tr"==h.flippingPage.realCorner?j=rightToLeft?Point(2*h.pageWidth,h.pageHeight):Point(h.pageWidth,0):"bl"==h.flippingPage.realCorner?j=rightToLeft?Point(0,h.pageHeight):Point(-h.pageWidth,h.pageHeight):"br"==h.flippingPage.realCorner&&(j=rightToLeft?Point(2*h.pageWidth,h.pageHeight):Point(h.pageWidth,h.pageHeight));h.stopTimer();h.timer(h.flippingPage.realCorner,6,30,j,h.flipPoint,!1,!0,!1)}c=globalToBook(!0,g[0].x,g[0].y,!0);d=globalToBook(!0,g[1].x,
g[1].y,!0);g=h.isPointInPage(c,h.pageWidth,h.pageHeight);j=h.isPointInPage(d,h.pageWidth,h.pageHeight);e=g&&j;return h.bookMouseDown=!1}if(bookType==BookType.single_book&&0==h.bookStatu){var g=globalToBook(!0,g[0].pageX,g[0].pageY,!0),k;if(0>g.x||g.x>h.pageWidth||0>g.y||g.y>h.pageHeight)return;if(Math.pow(g.x,2)+Math.pow(g.y,2)<singleEventRadius)if(k="tl",h.isLeft=!0,h.isTop=!0,j=Point(-h.pageWidth,0),rightToLeft){if(j=Point(0,0),h.flippingPage=h.currentPage,h.gotoPageIndex=h.currentPageIndex+1,h.currentPageIndex==
originTotalPageCount){_tipsBox.setCaption("This is the last page");_tipsBox.showTipsBox();return}}else{if(h.flippingPage=h.previousPage,h.gotoPageIndex=h.currentPageIndex-1,1==h.currentPageIndex){_tipsBox.setCaption("This is the first page");_tipsBox.showTipsBox();return}}else if(Math.pow(g.x,2)+Math.pow(h.pageHeight-g.y,2)<singleEventRadius)if(k="bl",h.isLeft=!0,h.isTop=!1,j=Point(-h.pageWidth,h.pageHeight),rightToLeft){if(j=Point(0,h.pageHeight),h.flippingPage=h.currentPage,h.gotoPageIndex=h.currentPageIndex+
1,h.currentPageIndex==originTotalPageCount){_tipsBox.setCaption("This is the last page");_tipsBox.showTipsBox();return}}else{if(h.flippingPage=h.previousPage,h.gotoPageIndex=h.currentPageIndex-1,1==h.currentPageIndex){_tipsBox.setCaption("This is the first page");_tipsBox.showTipsBox();return}}else if(Math.pow(h.pageWidth-g.x,2)+Math.pow(g.y,2)<singleEventRadius)if(k="tr",h.isLeft=!1,h.isTop=!0,j=Point(h.pageWidth,0),rightToLeft){if(j=Point(2*h.pageWidth,0),h.flippingPage=h.previousPage,h.gotoPageIndex=
h.currentPageIndex-1,1==h.currentPageIndex){_tipsBox.setCaption("This is the first page");_tipsBox.showTipsBox();return}}else{if(h.flippingPage=h.currentPage,h.gotoPageIndex=h.currentPageIndex+1,h.currentPageIndex==originTotalPageCount){_tipsBox.setCaption("This is the last page");_tipsBox.showTipsBox();return}}else if(Math.pow(h.pageWidth-g.x,2)+Math.pow(h.pageHeight-g.y,2)<singleEventRadius)if(k="br",h.isLeft=!1,h.isTop=!1,j=Point(h.pageWidth,h.pageHeight),rightToLeft){if(h.gotoPageIndex=h.currentPageIndex-
1,j=Point(2*h.pageWidth,h.pageHeight),h.flippingPage=h.previousPage,1==h.currentPageIndex){_tipsBox.setCaption("This is the first page");_tipsBox.showTipsBox();return}}else{if(h.flippingPage=h.currentPage,h.gotoPageIndex=h.currentPageIndex+1,h.currentPageIndex==originTotalPageCount){_tipsBox.setCaption("This is the last page");_tipsBox.showTipsBox();return}}else return;_rimFlip.removeRimFlip();h.bookStatu=2;h.flippingPage.beginFlip(k);h.timer(k,6,30,g,j,!1,!1)}else if(2==bookType)return;return!1});
$("#btnLast").bind(_event._end,function(){lastPageFun()});$("#btnFirst").bind(_event._end,function(){firstPageFun()});$("#btnLeft").bind(_event._end,function(){previousPageFun()});$("#btnRight").bind(_event._end,function(){nextPageFun()});$("#btnAutoPlay").bind(_event._end,function(){auto_player.isPlaying()?(auto_player.stop(),$("#autoPlayImg").attr("src",uiBaseURL+"autoPlay.png"),$("#autoPlay").attr("title","Stop Auto Play")):(auto_player.start(),$("#autoPlayImg").attr("src",uiBaseURL+"stopAutoPlay.png"),
$("#autoPlay").attr("title","Auto Play"))});$("#btnZoom").bind(_event._end,function(){2==bookType?(windowWidth<windowHeight?(changeShowBook(1),bookType=1,setCurrentIndexTextField($(singlePageBook).data().currentPageIndex),$(singlePageBook).data().gotoPage(zoomBook.currentIndex)):(changeShowBook(0),bookType=0,setCurrentIndexTextField(flipBook.currentPageIndex,!0),flipBook.gotoPage(zoomBook.currentIndex)),thumbnail.clearHighLight(),thumbnail.setHighLight(zoomBook.currentIndex),$("#zoomImg").attr("src",
uiBaseURL+"ZoomIn.png"),$("#btnZoom").attr("title","Zoom In")):(zoomBook.currentIndex=flipBook.currentPageIndex,zoomBook.showPage.fillContent(zoomBook.currentIndex),changeShowBook(2),bookType=2,$("#zoomImg").attr("src",uiBaseURL+"ZoomOut.png"),$("#btnZoom").attr("title","Zoom Out"),setCurrentIndexTextField(zoomBook.currentIndex,!1),thumbnail.clearHighLight(),thumbnail.setHighLight(zoomBook.currentIndex))});$("#btnThumb").bind(_event._end,function(){thumbnail.getShowStatu()?thumbnail.hideBox():thumbnail.showshow()});
$("#btnShare").bind(_event._end,function(){isShareShow?shareBar.hideShareBar():shareBar.showShareBar();isShareShow=!isShareShow;return!1});$("#btnShare").bind(_event._down,function(){return!1});$("#btnSearch").bind(_event._end,function(){frmSearch.isSearchShow?frmSearch.closeForm():frmSearch.showForm()});$("#btnBookmark").bind(_event._end,function(){frmBookmark.getShowStatu()?frmBookmark.closeForm():frmBookmark.showForm()});$("#btnDownload").bind(_event._end,function(){""!=userConfig.downloadURL&&
window.open(userConfig.downloadURL,"_Blank")});$("#fbToolBar").mousedown(function(){isShareShow&&(shareBar.hideShareBar(),isShareShow=!1)});bookContainer.mousedown(function(){isShareShow&&(shareBar.hideShareBar(),isShareShow=!1)});"undefined"!=typeof speakConfig&&"none"!=speakConfig.title&&($("#LecturePre").bind(_event._down,function(){"none"===$("#LectureCon").css("display")?($("#LectureCon").css("display","block"),$("#LectureClose").css("display","block")):($("#LectureCon").css("display","none"),
$("#LectureClose").css("display","none"));$("#lnext").asImageButton();$("#lpre").asImageButton()}),$("#lstop").bind(_event._down,function(){var a=document.getElementById("LectureID"),b=document.getElementById("LectureSpe");0==flaudio?(a.pause(),$("#LectureText").stop(!0),b.src="style/icon/nospeak.gif",$("#lstop").attr("src",uiBaseURL+"Play.png"),$("#lstop").attr("title","Play"),$("#LectureBox").css("display","none"),flaudio=1):(flaudio=0,LectureSoll(Math.floor(flipBook.getCurrentPageIndex()/2)),a.play(),
b.src="style/icon/speak.gif",$("#lstop").attr("src",uiBaseURL+"Pause.png"),$("#lstop").attr("title","Pause"))}),$("#lnext").bind(_event._down,function(){nextPageFun()}),$("#lnext").bind(_event._move,function(){$("#lnext").attr("src",uiBaseURL+"Nextpage_down.png")}),$("#lpre").bind(_event._down,function(){previousPageFun()}),$("#lpre").bind(_event._move,function(){$("#lpre").attr("src",uiBaseURL+"Pre_down.png")}),$("#laudio").bind(_event._down,function(){var a=document.getElementById("LectureID");
!1==a.muted?(a.muted=!0,$("#laudio").attr("src",uiBaseURL+"Mute.png"),$("#laudio").attr("title","Play"),$("#LectureSpe").attr("src",uiBaseURL+"nospeak.gif")):(a.muted=!1,$("#laudio").attr("src",uiBaseURL+"Muteclose.png"),$("#laudio").attr("title","Mute"),$("#LectureSpe").attr("src",uiBaseURL+"speak.gif"))}),$("#LectureClose").bind(_event._down,function(){document.getElementById("LectureID").pause();$("#LectureText").stop(!0);$("#LectureBook").css("display","none");$("#LectureShow").css("display",
"block");flagspeak=1}),$("#LectureShow").bind(_event._down,function(){$("#LectureBook").css("display","block");$("#LectureShow").css("display","none");$("#LectureBox").css("display","none");$("#LectureSpe").attr("src",uiBaseURL+"nospeak.gif");$("#LectureCon").css("display","none");$("#LectureClose").css("display","none");flagspeak=0}))}
jQuery(document).ready(function(){$.browser.msie&&9>$.browser.version&&alert("Your browser version is too low, please use version 9.0 or above.");void 0==window.aliasConfig&&(window.aliasConfig={});uiBaseURL=getString("UIBaseURL","");"string"==typeof uiBaseURL&&"/"!=uiBaseURL.substr(uiBaseURL.length-1,1)&&""!=uiBaseURL&&(uiBaseURL+="/");uiBaseURL+="style/icon/";createAll();zoomButtonEnable=getBool("ZoomButtonVisible",!0);thumbButtonEnable=getBool("ThumbnailsButtonVisible",!0);shareButtonEnable=getBool("ShareButtonVisible",
!0);searchButtonEnable=getBool("SearchButtonVisible",!0);bookmarkButtonEnable=getBool("BookMarkButtonVisible",!0);originTotalPageCount=getInt("totalPageCount",2);totalPageCount=originTotalPageCount+(1==originTotalPageCount%2?1:0);zoomPageWidth=getInt("largePageWidth",640);zoomPageHeight=getInt("largePageHeight",920);gradientColorA=getColor("bgBeginColor","#a93268");gradientColorB=getColor("bgEndColor","#588643");gradientColorAngle=getInt("bgMRotation",0);backGroundImgURL=getString("backGroundImgURL",
"");bookDescription=getString("bookDescription","This is a jQuery book.");bookTitle=getString("bookTitle","flipBook");showFlipButton=getBool("flipshortcutbutton",!0);productName=getString("productName","Demo created by Flip PDF for iPad");homePage=getString("homePage","http://www.flipbuilder.com/");leftMargin=getInt("leftMargin",10);topMargin=getInt("topMargin",10);rightMargin=getInt("rightMargin",10);bottomMargin=getInt("bottomMargin",10);rightToLeft=getBool("RightToLeft",!1);appName=getString("appName",
"");try{_gaq[0]=["_setAccount",getString("googleAnalyticsID","")]}catch(a){}oriPageIndex=getInt("OriginPageIndex",1);hardPageEnable=getBool("HardPageEnable",!1);userConfig.leftShadowWidth=getInt("LeftShadowWidth",40);userConfig.leftShadowAlpha=getInt("LeftShadowAlpha",1);userConfig.rightShadowWidth=getInt("RightShadowWidth",40);userConfig.rightShadowAlpha=getInt("RightShadowAlpha",1);userConfig.shortcutButtonHeight=getInt("ShortcutButtonHeight",0);userConfig.shortcutButtonWidth=getInt("ShortcutButtonWidth",
0);userConfig.autoPlayButtonVisible=getBool("AutoPlayButtonVisible",!0);userConfig.downloadButtonVisible=getBool("DownloadButtonVisible",!0);userConfig.downloadURL=getString("DownloadURL","");window.document.title=bookTitle;$.browser.msie?browserType="msie":$.browser.mozilla?browserType="mozilla":$.browser.safari?browserType="safari":$.browser.opera&&(browserType="opera");windowWidth=bookContainer.width();windowHeight=bookContainer.height();init();userConfig.autoPlayButtonVisible||$("#btnAutoPlay").css("display",
"none");zoomButtonEnable||$("#btnZoom").css("display","none");thumbButtonEnable||$("#btnThumb").css("display","none");shareButtonEnable||$("#btnShare").css("display","none");searchButtonEnable||$("#btnSearch").css("display","none");bookmarkButtonEnable||$("#btnBookmark").css("display","none");"undefined"!=typeof speakConfig&&"none"!=speakConfig.title&&(LectureAudio(0),LectureSoll(0))});var _thumbBar,isThumbShow=!1,thumbBar=function(){var a=$("<div class='thumbBG'></div>"),b=$("<img src='"+uiBaseURL+"close.png' style='top:0px;right:1px;position:absolute;'>"),c=$("<div class='thumbBox'></div>"),d=$("<div class='scrollButton' style='display:none; left:0px;'></div>"),e=$("<div class='scrollButton' style='display:none;right:0px;'></div>"),g=$("<img src='"+uiBaseURL+"previous_down.png' style='position:absolute;top:-5px;left:-5px;' />"),h=$("<img src='"+uiBaseURL+"next_down.png' style='position:absolute;top:-5px;left:-5px;' />");
b.asImageButton();d.asButton();e.asButton();_thumbBar=$("<div class='thumbBar' style='display:none;'></div>");_thumbBar.append(a);_thumbBar.append(b);a.append(c);a.append(d);a.append(e);bookContainer.append(_thumbBar);d.append(g);e.append(h);d.bind(_event._end,function(){if(!_thumbBar.thumbDrag){var a=parseInt(c.css("left").substring(0,c.css("left").length-2));_thumbBar.contentPos=-158>a?a+200:42;c.animate({left:_thumbBar.contentPos},100,"linear")}});e.bind(_event._end,function(){if(!_thumbBar.thumbDrag){var a=
parseInt(c.css("left").substring(0,c.css("left").length-2));_thumbBar.contentPos=a+c.width()>_thumbBar.width()+158?a-200:_thumbBar.width()-42-c.width();c.animate({left:_thumbBar.contentPos},100,"linear")}});$.fn.extend(_thumbBar,{thumbDown:Point(0,0),thumbMove:Point(0,0),thumbEnd:0,thumbStartTime:0,thumbMoveTime:0,thumbEndTime:0,contentPos:0,thumbMouseDown:!1,thumbDrag:!1,dragEnable:!1,showThumb:function(){_thumbBar.css("display","block");_thumbBar.animate({bottom:0},300,"linear")},hideThumb:function(){_thumbBar.animate({bottom:-120},
300,"linear")},thumbW_H:function(){var a={x:0,y:0};1<bookConfig.largePageWidth/bookConfig.largePageHeight?(a.x=60,a.y=60*bookConfig.largePageHeight/bookConfig.largePageWidth):(a.y=60,a.x=60*bookConfig.largePageWidth/bookConfig.largePageHeight);return a},addAllItem:function(){for(var a=_thumbBar.thumbW_H(),b=getInt("totalPageCount"),d=1;d<=b;d++){var e=initThumbItem();c.append(e);e.css("top","12px");e.css("left",65*(d-1)+"px");e.fillImg(d);e.setImgSize(a.x,a.y,60,60)}c.css("width",65*b);c.width()>=
windowWidth?(c.css("left","42px"),_thumbBar.dragEnable=!0,_thumbBar.showSrcollButton()):c.css("left",(_thumbBar.width()-c.width())/2)},onResize:function(){c.width()>=windowWidth?(0>parseInt(c.css("left").substring(0,c.css("left").length-2))||(c.css("left","42px"),_thumbBar.dragEnable=!0),_thumbBar.showSrcollButton()):(c.css("left",(_thumbBar.width()-c.width())/2),_thumbBar.hideSrcollButton(),_thumbBar.dragEnable=!1)},showSrcollButton:function(){d.css("display","block");e.css("display","block")},hideSrcollButton:function(){d.css("display",
"none");e.css("display","none")}});b.bind(_event._end,function(){_thumbBar.hideThumb();isThumbShow=!1});_thumbBar.addAllItem();_thumbBar.bind(_event._down,function(a){_thumbBar.thumbDrag=!1;a=isTouch?a.originalEvent.touches:[a];_thumbBar.thumbDown=Point(a[0].pageX,a[0].pageY);_thumbBar.thumbMouseDown=!0;_thumbBar.contentPos=c.offset().left;return!1});_thumbBar.bind(_event._move,function(a){if(_thumbBar.thumbMouseDown&&_thumbBar.dragEnable)return a=isTouch?a.originalEvent.touches:[a],_thumbBar.thumbMove=
Point(a[0].pageX,a[0].pageY),!_thumbBar.thumbDrag&&30<Math.abs(_thumbBar.thumbDown.x-_thumbBar.thumbMove.x)&&(_thumbBar.thumbDrag=!0),a=_thumbBar.contentPos-(_thumbBar.thumbDown.x-_thumbBar.thumbMove.x),42<a?c.css({left:"42px"}):a+c.width()<_thumbBar.width()-42?c.css({left:_thumbBar.width()-c.width()-42+"px"}):c.css({left:a+"px"}),!1});_thumbBar.bind(_event._end,function(){return _thumbBar.thumbMouseDown=!1})},initThumbItem=function(){var a=$("<div class='thumbItem'></div>"),b=$("<img style='position:absolute' />");
a.append(b);var c;$.fn.extend(a,{setThumbItemPosition:function(b,c){a.css("top",b);a.css("left",c)},onResize:function(b,c){a.css("width",b);a.css("height",c)},setImgSize:function(a,c,g,h){b.css("width",a);b.css("height",c);b.css("top",(h-c)/2+"px");b.css("left",(g-a)/2+"px")},fillImg:function(d){d!=c&&(c=d,b.attr("src",getPageDir(c,"thumb")),d=$("<span id='thumbPageIndex' style='position:absolute;width:50px;padding:10px 5px;color:#999999 !important;' ><center>"+c+"</center></span>"),a.append(d),d.css({top:"52px",
left:"0px"}))},setImgPosition:function(a,c){b.css("top",a+"px");b.css("left",c+"px")}});a.bind(_event._end,function(){if(!_thumbBar.thumbDrag)return gotoPageFun(c),_thumbBar.thumbMouseDown=!1});a.mouseover(function(){a.css("background-color","#888888")});a.mouseout(function(){a.css("background-color","transparent")});return a},isShareShow=!1,initShareBar=function(){shareBar=$("<div class='shareBar' style='display:none;opacity:0;'>");bookContainer.append(shareBar);shareBar.css("z-index",2002);shareBar.css("bottom",
"38px");shareBar.css("right","300px");shareBar.css({"-webkit-box-shadow":"0 0 10px rgba(40, 0, 0, 0.5)","-moz-box-shadow":"0 0 10px rgba(40, 0, 0, 0.5)","box-shadow":"0 0 10px rgba(40, 0, 0, 0.5)"});var a=window.location.href,b=window.document.title,c=window.location.pathname,c=c.substring(0,c.lastIndexOf("/"))+"/files/thumb/1.jpg",d="?&url="+a+"&title="+b+"&description="+bookDescription+"&screenshot="+c,a=initShareButton("email",d),b=initShareButton("facebook",d),c=initShareButton("google",d),e=
initShareButton("mySpace",d),g=initShareButton("twitter",d),h=initShareButton("digg",d),d=initShareButton("more",d);shareBar.append(a);a.css({top:"8px",left:"5px"});shareBar.append(b);b.css({top:"38px",left:"5px"});shareBar.append(c);c.css({top:"68px",left:"5px"});shareBar.append(e);e.css({top:"98px",left:"5px"});shareBar.append(g);g.css({top:"128px",left:"5px"});shareBar.append(h);h.css({top:"158px",left:"5px"});shareBar.append(d);d.css({top:"188px",left:"5px"});$.fn.extend(shareBar,{showShareBar:function(){shareBar.css("display",
"block");shareBar.animate({opacity:0.9},200,"linear")},hideShareBar:function(){shareBar.animate({opacity:0},200,"linear",function(){shareBar.css("display","none")})},setSharePosition:function(a,b){shareBar.css({right:a+"px",bottom:b+"px"})}})},initShareButton=function(a,b){var c=$("<div style = 'position: absolute;width:135px;height:33px'></div>"),d;switch(a){case "email":d=$("<a class='shareButton' href='http://api.addthis.com/oexchange/0.8/forward/email/offer"+b+"' target='_blank'><img src='"+uiBaseURL+
"email.png' class='shareImg' />Email</a>");break;case "facebook":d=$("<a class='shareButton' href='http://api.addthis.com/oexchange/0.8/forward/facebook/offer"+b+"' target='_blank'><img src='"+uiBaseURL+"facebook.png' class='shareImg' />Facebook</a>");break;case "google":d=$("<a class='shareButton' href='http://api.addthis.com/oexchange/0.8/forward/igoogle/offer"+b+"' target='_blank'><img src='"+uiBaseURL+"google.png' class='shareImg' />Google+</a>");break;case "mySpace":d=$("<a class='shareButton' href='http://api.addthis.com/oexchange/0.8/forward/myspace/offer"+
b+"' target='_blank'><img src='"+uiBaseURL+"myspace.png' class='shareImg' />MySpace</a>");break;case "netvibes":d=$("<a class='shareButton' href='http://api.addthis.com/oexchange/0.8/forward/netvibes/offer"+b+"' target='_blank'><img src='"+uiBaseURL+"netvibes.png' class='shareImg' />netvibes</a>");break;case "twitter":d=$("<a class='shareButton' href='http://api.addthis.com/oexchange/0.8/forward/twitter/offer"+b+"' target='_blank'><img src='"+uiBaseURL+"twitter.png' class='shareImg' />Twitter</a>");
break;case "digg":d=$("<a class='shareButton' href='http://api.addthis.com/oexchange/0.8/forward/digg/offer"+b+"' target='_blank'><img src='"+uiBaseURL+"digg.png' class='shareImg' />Digg</a>");break;case "more":d=$("<a class='shareButton' href='http://api.addthis.com/oexchange/0.8/offer"+b+"' target='_blank'><img src='"+uiBaseURL+"more.png' class='shareImg' />More</a>")}c.append(d);c.mousedown(function(){c.css("background-color","#0000f0")});c.mouseup(function(){c.css("background-color","transparent");
shareBar.hideShareBar()});return c},logoBar,initLogoBar=function(){logoBar=$("#logoBar");if(void 0!=bookConfig.appLogoIcon||""!=bookConfig.appLogoIcon){var a=bookConfig.appLogoLinkURL,b="_blank";if(void 0==a||""==a)a="javascript:Void();",b="_self";var c=$("<a id='logoLink' href='"+a+"' target='"+b+"' style='width:35px;height:35px;'></a>"),d=$("<img />");d.load(function(){logoBar.append(c);c.append(d)});d.attr({src:bookConfig.appLogoIcon});d.css({position:"absolute",top:"0px",left:"0px",height:toolBar.height()+
"px"})}logoBar.css({top:"0px",left:"0px"})},setPageIndexTextField=function(){setCurrentIndexTextField(flipBook.getCurrentPageIndex(),bookType==BookType.normal_book);var a=[8,13,46,48,49,50,51,52,53,54,55,56,57,96,97,98,99,100,101,102,103,104,105];pageIndexTextField.css({padding:"3px"});pageIndexTextField.bind("keydown",function(b){if(0>a.indexOf(b.keyCode))return!1;13==b.keyCode&&(b=pageIndexTextField.val().replace(/\D/g,""),b=Math.min(Math.max(b,1),totalPageCount),gotoPageFun(b))});pageIndexTextField.bind("blur",
function(){var a=flipBook.currentPageIndex;bookType==BookType.single_book&&(a=$(singlePageBook).data().currentPageIndex);bookType==BookType.zoom_book&&(a=zoomCurrentIndex);setCurrentIndexTextField(a,bookType==BookType.normal_book)});pageIndexTextField.bind(_event._end,function(){pageIndexTextField.val("")})};var hexcase=0,b64pad="",chrsz=8;function compareov(){var a=Date.parse(new Date);return orgt(a)===vldt(a)}function orgt(){return""}function vldt(a){return binl2hex(core_hx(str2binl(a),a.length*chrsz))}
function core_hx(a,b){a[b>>5]|=128<<b%32;a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,e=-1732584194,g=271733878,h=0;h<a.length;h+=16)var j=c,k=d,o=e,r=g,c=hx_ff(c,d,e,g,a[h+0],7,-680876936),g=hx_ff(g,c,d,e,a[h+1],12,-389564586),e=hx_ff(e,g,c,d,a[h+2],17,606105819),d=hx_ff(d,e,g,c,a[h+3],22,-1044525330),c=hx_ff(c,d,e,g,a[h+4],7,-176418897),g=hx_ff(g,c,d,e,a[h+5],12,1200080426),e=hx_ff(e,g,c,d,a[h+6],17,-1473231341),d=hx_ff(d,e,g,c,a[h+7],22,-45705983),c=hx_ff(c,d,e,g,a[h+8],7,1770035416),
g=hx_ff(g,c,d,e,a[h+9],12,-1958414417),e=hx_ff(e,g,c,d,a[h+10],17,-42063),d=hx_ff(d,e,g,c,a[h+11],22,-1990404162),c=hx_ff(c,d,e,g,a[h+12],7,1804603682),g=hx_ff(g,c,d,e,a[h+13],12,-40341101),e=hx_ff(e,g,c,d,a[h+14],17,-1502002290),d=hx_ff(d,e,g,c,a[h+15],22,1236535329),c=hx_gg(c,d,e,g,a[h+1],5,-165796510),g=hx_gg(g,c,d,e,a[h+6],9,-1069501632),e=hx_gg(e,g,c,d,a[h+11],14,643717713),d=hx_gg(d,e,g,c,a[h+0],20,-373897302),c=hx_gg(c,d,e,g,a[h+5],5,-701558691),g=hx_gg(g,c,d,e,a[h+10],9,38016083),e=hx_gg(e,
g,c,d,a[h+15],14,-660478335),d=hx_gg(d,e,g,c,a[h+4],20,-405537848),c=hx_gg(c,d,e,g,a[h+9],5,568446438),g=hx_gg(g,c,d,e,a[h+14],9,-1019803690),e=hx_gg(e,g,c,d,a[h+3],14,-187363961),d=hx_gg(d,e,g,c,a[h+8],20,1163531501),c=hx_gg(c,d,e,g,a[h+13],5,-1444681467),g=hx_gg(g,c,d,e,a[h+2],9,-51403784),e=hx_gg(e,g,c,d,a[h+7],14,1735328473),d=hx_gg(d,e,g,c,a[h+12],20,-1926607734),c=hx_hh(c,d,e,g,a[h+5],4,-378558),g=hx_hh(g,c,d,e,a[h+8],11,-2022574463),e=hx_hh(e,g,c,d,a[h+11],16,1839030562),d=hx_hh(d,e,g,c,a[h+
14],23,-35309556),c=hx_hh(c,d,e,g,a[h+1],4,-1530992060),g=hx_hh(g,c,d,e,a[h+4],11,1272893353),e=hx_hh(e,g,c,d,a[h+7],16,-155497632),d=hx_hh(d,e,g,c,a[h+10],23,-1094730640),c=hx_hh(c,d,e,g,a[h+13],4,681279174),g=hx_hh(g,c,d,e,a[h+0],11,-358537222),e=hx_hh(e,g,c,d,a[h+3],16,-722521979),d=hx_hh(d,e,g,c,a[h+6],23,76029189),c=hx_hh(c,d,e,g,a[h+9],4,-640364487),g=hx_hh(g,c,d,e,a[h+12],11,-421815835),e=hx_hh(e,g,c,d,a[h+15],16,530742520),d=hx_hh(d,e,g,c,a[h+2],23,-995338651),c=hx_ii(c,d,e,g,a[h+0],6,-198630844),
g=hx_ii(g,c,d,e,a[h+7],10,1126891415),e=hx_ii(e,g,c,d,a[h+14],15,-1416354905),d=hx_ii(d,e,g,c,a[h+5],21,-57434055),c=hx_ii(c,d,e,g,a[h+12],6,1700485571),g=hx_ii(g,c,d,e,a[h+3],10,-1894986606),e=hx_ii(e,g,c,d,a[h+10],15,-1051523),d=hx_ii(d,e,g,c,a[h+1],21,-2054922799),c=hx_ii(c,d,e,g,a[h+8],6,1873313359),g=hx_ii(g,c,d,e,a[h+15],10,-30611744),e=hx_ii(e,g,c,d,a[h+6],15,-1560198380),d=hx_ii(d,e,g,c,a[h+13],21,1309151649),c=hx_ii(c,d,e,g,a[h+4],6,-145523070),g=hx_ii(g,c,d,e,a[h+11],10,-1120210379),e=hx_ii(e,
g,c,d,a[h+2],15,718787259),d=hx_ii(d,e,g,c,a[h+9],21,-343485551),c=safe_add(c,j),d=safe_add(d,k),e=safe_add(e,o),g=safe_add(g,r);return[c,d,e,g]}function hx_cmn(a,b,c,d,e,g){return safe_add(bit_rol(safe_add(safe_add(b,a),safe_add(d,g)),e),c)}function hx_ff(a,b,c,d,e,g,h){return hx_cmn(b&c|~b&d,a,b,e,g,h)}function hx_gg(a,b,c,d,e,g,h){return hx_cmn(b&d|c&~d,a,b,e,g,h)}function hx_hh(a,b,c,d,e,g,h){return hx_cmn(b^c^d,a,b,e,g,h)}function hx_ii(a,b,c,d,e,g,h){return hx_cmn(c^(b|~d),a,b,e,g,h)}
function safe_add(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535}function bit_rol(a,b){return a<<b|a>>>32-b}function str2binl(a){for(var b=[],c=(1<<chrsz)-1,d=0;d<a.length*chrsz;d+=chrsz)b[d>>5]|=(a.charCodeAt(d/chrsz)&c)<<d%32;return b}function binl2hex(a){for(var b=hexcase?"0123456789ABCDEF":"0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>8*(d%4)+4&15)+b.charAt(a[d>>2]>>8*(d%4)&15);return c};
